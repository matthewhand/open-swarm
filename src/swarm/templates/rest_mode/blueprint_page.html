{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Interactive Chat Interface</title>
    <!-- Include CSRF token in a meta tag -->
    <meta name="csrf-token" content="{{ csrf_token }}">
    <link rel="stylesheet" href="{% static 'rest_mode/style.css' %}">
</head>
<body>
    <div class="container">
        <!-- Chat Pane -->
        <div class="chat-pane">
            <!-- Blueprint Metadata -->
            <div class="blueprint-metadata" id="blueprintMetadata">
                <h2>Loading...</h2>
                <p>Please wait, fetching blueprint metadata...</p>
            </div>

            <h1>Interactive Chat Interface</h1>

            <!-- Toggle Controls -->
            <div class="toggle-container">
                <div>
                    <input type="checkbox" id="debugToggle" onclick="toggleDebugPane()" />
                    <label for="debugToggle">Show Debug Info</label>
                </div>
                <div>
                    <input type="checkbox" id="rawToggle" onclick="toggleRawMessages()" />
                    <label for="rawToggle">Show Raw Messages</label>
                </div>
            </div>

            <!-- Message History -->
            <div id="messageHistory" class="message-container"></div>

            <!-- Input Form -->
            <div class="form-container">
                <input
                    type="text"
                    id="userInput"
                    placeholder="Type your message here..."
                    onkeypress="handleKeyPress(event)"
                />
                <button id="submitButton" onclick="handleSubmit()">Send</button>
            </div>
        </div>

        <!-- Raw and Debug Panes -->
        <div class="raw-debug-container">
            <!-- Debug Pane -->
            <div class="debug-pane" id="debugPane">
                <h2>Debug Information</h2>
                <div id="debugContent"></div>
            </div>

            <!-- Raw Messages Pane -->
            <div class="raw-messages-pane" id="rawMessagesPane">
                <h2>Raw Messages</h2>
                <div id="rawMessagesContent"></div>
            </div>
        </div>
    </div>
    <script type="module" src="{% static 'rest_mode/script.js' %}"></script>
</body>
</html>