/home/chatgpt/.local/lib/python3.10/site-packages/_testinfra_renamed.py:5: DeprecationWarning: testinfra package has been renamed to pytest-testinfra. Please `pip install pytest-testinfra` and `pip uninstall testinfra` and update your package requirements to avoid this message
  warnings.warn((

tests/api/test_models_negative.py::test_models_empty_registry_returns_200 PASSED                                                                                                                                                                                       [  0%]
tests/api/test_models_negative.py::test_models_non_mapping_iterable_gracefully_handles_type PASSED                                                                                                                                                                     [  0%]
tests/api/test_models_negative.py::test_models_exception_returns_500 XFAIL (View currently returns 200 on exception; adjust view to 500 to strengthen contract.)                                                                                                       [  0%]
tests/api/test_models_negative.py::test_models_unauthorized_when_permission_enforced XFAIL (Endpoint appears open (AllowAny); unauthorized path not applicable.)                                                                                                       [  1%]
tests/blueprints/test_dilbot_universe.py::test_dilbot_db_initialization SKIPPED (SQLite interaction testing needs refinement.)                                                                                                                                         [  1%]
tests/blueprints/test_dilbot_universe.py::test_dilbot_get_agent_config_from_db SKIPPED (SQLite interaction testing needs refinement.)                                                                                                                                  [  1%]
tests/blueprints/test_dilbot_universe.py::test_dilbot_delegation_flow_sqlite SKIPPED (Blueprint interaction tests not yet implemented.)                                                                                                                                [  2%]
tests/blueprints/test_dilbot_universe.py::test_dilbot_build_action_sqlite SKIPPED (Blueprint action tests not yet implemented)                                                                                                                                         [  2%]
tests/blueprints/test_divine_code.py::test_zeus_agent_creation PASSED                                                                                                                                                                                                  [  2%]
tests/blueprints/test_divine_code.py::test_zeus_run_method PASSED                                                                                                                                                                                                      [  2%]
tests/blueprints/test_divine_code.py::test_zeus_delegation_to_odin PASSED                                                                                                                                                                                              [  3%]
tests/blueprints/test_divine_code.py::test_zeus_basic PASSED                                                                                                                                                                                                           [  3%]
tests/blueprints/test_divine_code.py::test_zeus_full_flow_example PASSED                                                                                                                                                                                               [  3%]
tests/blueprints/test_divine_code.py::test_zeus_cli_execution SKIPPED (Blueprint CLI tests not yet implemented)                                                                                                                                                        [  4%]
tests/blueprints/test_echocraft.py::test_echocraft_blueprint_run PASSED                                                                                                                                                                                                [  4%]
tests/blueprints/test_echocraft.py::test_echocraft_blueprint_no_user_message PASSED                                                                                                                                                                                    [  4%]
tests/blueprints/test_echocraft.py::test_echocraft_blueprint_multiple_messages PASSED                                                                                                                                                                                  [  5%]
tests/blueprints/test_echocraft_cli.py::test_run_echocraft_cli_success PASSED                                                                                                                                                                                          [  5%]
tests/blueprints/test_echocraft_cli.py::test_run_echocraft_cli_unexpected_response_format PASSED                                                                                                                                                                       [  5%]
tests/blueprints/test_family_ties.py::test_stewie_agent_creation PASSED                                                                                                                                                                                                [  5%]
tests/blueprints/test_family_ties.py::test_stewie_delegation_to_brian SKIPPED (Blueprint interaction tests not yet implemented)                                                                                                                                        [  6%]
tests/blueprints/test_family_ties.py::test_stewie_cli_execution SKIPPED (Blueprint CLI tests not yet implemented)                                                                                                                                                      [  6%]
tests/blueprints/test_geese.py::test_geese_agent_handoff_and_astool SKIPPED (Test needs review for SDK Agent tool handling)                                                                                                                                            [  6%]
tests/blueprints/test_geese.py::test_agent_tool_creation SKIPPED (Test needs review for SDK Agent tool handling)                                                                                                                                                       [  7%]
tests/blueprints/test_geese.py::test_spinner_state_updates SKIPPED (Spinner tests need refactoring for GeeseSpinner class methods)                                                                                                                                     [  7%]
tests/blueprints/test_geese.py::test_spinner_state_transitions SKIPPED (Spinner tests need refactoring for GeeseSpinner class methods)                                                                                                                                 [  7%]
tests/blueprints/test_geese.py::test_geese_story_delegation_flow SKIPPED (Tool structure needs review with SDK Agent)                                                                                                                                                  [  7%]
tests/blueprints/test_geese.py::test_operation_box_styles PASSED                                                                                                                                                                                                       [  8%]
tests/blueprints/test_geese.py::test_display_splash_screen_variants PASSED                                                                                                                                                                                             [  8%]
tests/blueprints/test_geese.py::test_main_entry SKIPPED (Main entry test needs review for async structure and Geese CLI specifics)                                                                                                                                     [  8%]
tests/blueprints/test_geese.py::test_create_story_outline SKIPPED (Relies on removed module-level functions; needs agent-based testing.)                                                                                                                               [  9%]
tests/blueprints/test_geese.py::test_write_story_part SKIPPED (Relies on removed module-level functions; needs agent-based testing.)                                                                                                                                   [  9%]
tests/blueprints/test_geese.py::test_edit_story SKIPPED (Relies on removed module-level functions; needs agent-based testing.)                                                                                                                                         [  9%]
tests/blueprints/test_geese.py::test_spinner_messages PASSED                                                                                                                                                                                                           [ 10%]
tests/blueprints/test_geese.py::test_story_generation_flow PASSED                                                                                                                                                                                                      [ 10%]
tests/blueprints/test_geese_agent_mcp_assignment.py::test_agent_mcp_assignment SKIPPED (Test needs update for refactored GeeseBlueprint agent creation.)                                                                                                               [ 10%]
tests/blueprints/test_geese_agent_mcp_assignment.py::test_agent_mcp_assignment_cli_override SKIPPED (Test needs update for refactored GeeseBlueprint agent creation.)                                                                                                  [ 10%]
tests/blueprints/test_geese_spinner_and_box.py::test_geese_spinner_methods SKIPPED (GeeseSpinner internal API changed; test needs update or removal.)                                                                                                                  [ 11%]
tests/blueprints/test_geese_spinner_and_box.py::test_display_operation_box_basic PASSED                                                                                                                                                                                [ 11%]
tests/blueprints/test_geese_spinner_and_box.py::test_display_operation_box_default_emoji PASSED                                                                                                                                                                        [ 11%]
tests/blueprints/test_geese_spinner_and_box.py::test_progressive_demo_operation_box SKIPPED (Test needs update for refactored GeeseBlueprint agent creation.)                                                                                                          [ 12%]
tests/blueprints/test_gotchaman.py::test_gotchaman_agent_creation SKIPPED (Implementation for GotchamanBlueprint not found in codebase; skipping test.)                                                                                                                [ 12%]
tests/blueprints/test_gotchaman.py::test_gotchaman_execute_command_tool SKIPPED (Tool function tests not yet implemented)                                                                                                                                              [ 12%]
tests/blueprints/test_gotchaman.py::test_gotchaman_delegation_flow SKIPPED (Blueprint interaction tests not yet implemented)                                                                                                                                           [ 12%]
tests/blueprints/test_gotchaman.py::test_gotchaman_cli_execution SKIPPED (Blueprint CLI tests not yet implemented)                                                                                                                                                     [ 13%]
tests/blueprints/test_jeeves.py::test_jeeves_agent_creation PASSED                                                                                                                                                                                                     [ 13%]
tests/blueprints/test_jeeves.py::test_jeeves_delegation_to_mycroft PASSED                                                                                                                                                                                              [ 13%]
tests/blueprints/test_jeeves.py::test_jeeves_delegation_to_gutenberg SKIPPED (Blueprint interaction tests not yet implemented)                                                                                                                                         [ 14%]
tests/blueprints/test_jeeves.py::test_jeeves_cli_execution PASSED                                                                                                                                                                                                      [ 14%]
tests/blueprints/test_jeeves_progressive_tool.py::test_display_operation_box_progress PASSED                                                                                                                                                                           [ 14%]
tests/blueprints/test_jeeves_spinner_and_box.py::test_jeeves_spinner_frames[0-Polishing the silver] PASSED                                                                                                                                                             [ 15%]
tests/blueprints/test_jeeves_spinner_and_box.py::test_jeeves_spinner_frames[1-Generating.] PASSED                                                                                                                                                                      [ 15%]
tests/blueprints/test_jeeves_spinner_and_box.py::test_jeeves_spinner_frames[2-Generating..] PASSED                                                                                                                                                                     [ 15%]
tests/blueprints/test_jeeves_spinner_and_box.py::test_jeeves_spinner_frames[3-Generating...] PASSED                                                                                                                                                                    [ 15%]
tests/blueprints/test_jeeves_spinner_and_box.py::test_jeeves_spinner_frames[4-Running...] PASSED                                                                                                                                                                       [ 16%]
tests/blueprints/test_jeeves_spinner_and_box.py::test_jeeves_spinner_frames[5-Polishing the silver] PASSED                                                                                                                                                             [ 16%]
tests/blueprints/test_jeeves_spinner_and_box.py::test_jeeves_spinner_long_wait PASSED                                                                                                                                                                                  [ 16%]
tests/blueprints/test_jeeves_spinner_and_box.py::test_display_operation_box_basic PASSED                                                                                                                                                                               [ 17%]
tests/blueprints/test_jeeves_spinner_and_box.py::test_display_operation_box_long_wait PASSED                                                                                                                                                                           [ 17%]
tests/blueprints/test_mcp_demo.py::test_mcpdemo_agent_creation PASSED                                                                                                                                                                                                  [ 17%]
tests/blueprints/test_mcp_demo.py::test_mcpdemo_bad_config PASSED                                                                                                                                                                                                      [ 17%]
tests/blueprints/test_mcp_demo.py::test_mcpdemo_filesystem_interaction PASSED                                                                                                                                                                                          [ 18%]
tests/blueprints/test_mcp_demo.py::test_mcpdemo_memory_interaction PASSED                                                                                                                                                                                              [ 18%]
tests/blueprints/test_mcp_demo.py::test_mcpdemo_cli_execution PASSED                                                                                                                                                                                                   [ 18%]
tests/blueprints/test_mcp_demo.py::test_mcp_demo_cli_help SKIPPED (Legacy CLI tests require specific old setup/mocking)                                                                                                                                                [ 19%]
tests/blueprints/test_mcp_demo.py::test_mcp_demo_cli_simple_task SKIPPED (Legacy CLI tests require specific old setup/mocking)                                                                                                                                         [ 19%]
tests/blueprints/test_mcp_demo.py::test_mcp_demo_cli_time SKIPPED (Legacy CLI tests require specific old setup/mocking)                                                                                                                                                [ 19%]
tests/blueprints/test_mcp_demo.py::test_mcp_demo_cli_list_files SKIPPED (Legacy CLI tests require specific old setup/mocking)                                                                                                                                          [ 20%]
tests/blueprints/test_mission_improbable.py::test_mission_db_initialization PASSED                                                                                                                                                                                     [ 20%]
tests/blueprints/test_mission_improbable.py::test_mission_agent_creation PASSED                                                                                                                                                                                        [ 20%]
tests/blueprints/test_mission_improbable.py::test_mission_delegation_flow SKIPPED (Blueprint interaction tests not yet implemented)                                                                                                                                    [ 20%]
tests/blueprints/test_mission_improbable.py::test_mission_cli_execution SKIPPED (Blueprint CLI tests not yet implemented)                                                                                                                                              [ 21%]
tests/blueprints/test_monkai_magic.py::test_monkai_agent_creation SKIPPED (Blueprint tests not yet implemented)                                                                                                                                                        [ 21%]
tests/blueprints/test_monkai_magic.py::test_monkai_aws_cli_tool SKIPPED (Tool function tests not yet implemented)                                                                                                                                                      [ 21%]
tests/blueprints/test_monkai_magic.py::test_monkai_delegation_flow SKIPPED (Blueprint interaction tests not yet implemented)                                                                                                                                           [ 22%]
tests/blueprints/test_monkai_magic.py::test_monkai_cli_execution SKIPPED (Blueprint CLI tests not yet implemented)                                                                                                                                                     [ 22%]
tests/blueprints/test_nebula_shellz.py::test_nebula_shellz_cli_simple_task SKIPPED (CLI tests require more setup/mocking)                                                                                                                                              [ 22%]
tests/blueprints/test_nebula_shellz.py::test_nebula_shellz_cli_shell_command SKIPPED (CLI tests require more setup/mocking)                                                                                                                                            [ 22%]
tests/blueprints/test_nebula_shellz.py::test_nebula_shellz_cli_delegate_shell SKIPPED (CLI tests require more setup/mocking)                                                                                                                                           [ 23%]
tests/blueprints/test_omniplex.py::test_omniplex_agent_creation_all_types PASSED                                                                                                                                                                                       [ 23%]
tests/blueprints/test_omniplex.py::test_omniplex_agent_creation_only_npx PASSED                                                                                                                                                                                        [ 23%]
tests/blueprints/test_omniplex.py::test_omniplex_delegation_to_amazo PASSED                                                                                                                                                                                            [ 24%]
tests/blueprints/test_omniplex.py::test_omniplex_cli_execution PASSED                                                                                                                                                                                                  [ 24%]
tests/blueprints/test_poets.py::test_poets_db_initialization PASSED                                                                                                                                                                                                    [ 24%]
tests/blueprints/test_poets.py::test_poets_agent_creation PASSED                                                                                                                                                                                                       [ 25%]
tests/blueprints/test_poets.py::test_poets_collaboration_flow SKIPPED (Blueprint interaction tests not yet implemented)                                                                                                                                                [ 25%]
tests/blueprints/test_poets.py::test_poets_cli_execution SKIPPED (Blueprint CLI tests not yet implemented)                                                                                                                                                             [ 25%]
tests/blueprints/test_rue_code_cost.py::test_gpt4_cost PASSED                                                                                                                                                                                                          [ 25%]
tests/blueprints/test_rue_code_cost.py::test_invalid_model PASSED                                                                                                                                                                                                      [ 26%]
tests/blueprints/test_rue_code_spinner_and_box.py::test_rue_spinner_states PASSED                                                                                                                                                                                      [ 26%]
tests/blueprints/test_rue_code_spinner_and_box.py::test_rue_operation_box_output PASSED                                                                                                                                                                                [ 26%]
tests/blueprints/test_rue_code_spinner_and_box.py::test_rue_run_box PASSED                                                                                                                                                                                             [ 27%]
tests/blueprints/test_rue_code_spinner_and_box.py::test_rue_run_empty PASSED                                                                                                                                                                                           [ 27%]
tests/blueprints/test_suggestion.py::test_suggestion_agent_creation SKIPPED (Only run if DEFAULT_LLM is set to 'test')                                                                                                                                                 [ 27%]
tests/blueprints/test_suggestion.py::test_suggestion_run_produces_structured_output SKIPPED (Only run if DEFAULT_LLM is set to 'test')                                                                                                                                 [ 27%]
tests/blueprints/test_suggestion.py::test_suggestion_cli_execution SKIPPED (Only run if DEFAULT_LLM is set to 'test')                                                                                                                                                  [ 28%]
tests/blueprints/test_whinge_surf.py::test_run_and_check_status PASSED                                                                                                                                                                                                 [ 28%]
tests/blueprints/test_whinge_surf.py::test_kill_subprocess PASSED                                                                                                                                                                                                      [ 28%]
tests/blueprints/test_whinge_surf.py::test_tail_and_show_output PASSED                                                                                                                                                                                                 [ 29%]
tests/blueprints/test_whinge_surf.py::test_list_and_prune_jobs PASSED                                                                                                                                                                                                  [ 29%]
tests/blueprints/test_whinge_surf.py::test_resource_usage_and_analyze_self PASSED                                                                                                                                                                                      [ 29%]
tests/blueprints/test_whinge_surf.py::test_self_update PASSED                                                                                                                                                                                                          [ 30%]
tests/blueprints/test_whinge_surf_analysis.py::test_analyze_self_runs PASSED                                                                                                                                                                                           [ 30%]
tests/blueprints/test_whiskeytangofoxtrot.py::test_wtf_agent_creation PASSED                                                                                                                                                                                           [ 30%]
tests/blueprints/test_whiskeytangofoxtrot.py::test_wtf_db_initialization PASSED                                                                                                                                                                                        [ 30%]
tests/blueprints/test_whiskeytangofoxtrot.py::test_wtf_delegation_flow SKIPPED (Blueprint interaction tests not yet implemented)                                                                                                                                       [ 31%]
tests/blueprints/test_whiskeytangofoxtrot.py::test_wtf_cli_execution SKIPPED (Blueprint CLI tests not yet implemented)                                                                                                                                                 [ 31%]
tests/blueprints/test_zeus.py::test_metadata_lists_cli_as_divine_ass PASSED                                                                                                                                                                                            [ 31%]
tests/blueprints/test_zeus_cli.py::test_zeus_cli_banner PASSED                                                                                                                                                                                                         [ 32%]
tests/blueprints/test_zeus_cli.py::test_zeus_cli_multiple_inputs PASSED                                                                                                                                                                                                [ 32%]
tests/blueprints/test_zeus_spinner_and_box.py::test_zeus_spinner_states PASSED                                                                                                                                                                                         [ 32%]
tests/blueprints/test_zeus_spinner_and_box.py::test_zeus_operation_box_output PASSED                                                                                                                                                                                   [ 32%]
tests/blueprints/test_zeus_spinner_and_box.py::test_zeus_assist_box PASSED                                                                                                                                                                                             [ 33%]
tests/blueprints/test_zeus_spinner_and_box.py::test_zeus_run_empty PASSED                                                                                                                                                                                              [ 33%]
tests/cli/test_cli_config.py::test_create_llm_config PASSED                                                                                                                                                                                                            [ 33%]
tests/cli/test_cli_config.py::test_read_llm_config PASSED                                                                                                                                                                                                              [ 34%]
tests/cli/test_cli_config.py::test_update_llm_config PASSED                                                                                                                                                                                                            [ 34%]
tests/cli/test_cli_config.py::test_partial_update_llm_config PASSED                                                                                                                                                                                                    [ 34%]
tests/cli/test_cli_config.py::test_delete_llm_config PASSED                                                                                                                                                                                                            [ 35%]
tests/cli/test_cli_config.py::test_invalid_config_handling PASSED                                                                                                                                                                                                      [ 35%]
tests/cli/test_cli_config.py::test_config_list_all PASSED                                                                                                                                                                                                              [ 35%]
tests/cli/test_config_secrets_and_env_expansion.py::test_cli_config_add_persists_secrets_to_env_file[OPENAI_API_KEY-sk-test-123] XFAIL (swarm-cli config add not implemented or unavailable. stderr:)                                                                  [ 35%]
tests/cli/test_config_secrets_and_env_expansion.py::test_cli_config_add_persists_secrets_to_env_file[CUSTOM_SECRET-s3cr3t!] XFAIL (swarm-cli config add not implemented or unavailable. stderr:)                                                                       [ 36%]
tests/cli/test_config_secrets_and_env_expansion.py::test_env_var_expansion_in_config_loader PASSED                                                                                                                                                                     [ 36%]
tests/cli/test_launchers.py::test_swarm_cli_entrypoint PASSED                                                                                                                                                                                                          [ 36%]
tests/cli/test_launchers.py::test_swarm_cli_install_executable_creates_executable PASSED                                                                                                                                                                               [ 37%]
tests/cli/test_launchers.py::test_swarm_install_executable_failure PASSED                                                                                                                                                                                              [ 37%]
tests/cli/test_launchers.py::test_swarm_launch_runs_executable PASSED                                                                                                                                                                                                  [ 37%]
tests/cli/test_launchers.py::test_swarm_launch_failure_not_found PASSED                                                                                                                                                                                                [ 37%]
tests/cli/test_list_blueprints.py::test_execute_list_user_installed PASSED                                                                                                                                                                                             [ 38%]
tests/cli/test_list_blueprints.py::test_execute_list_available PASSED                                                                                                                                                                                                  [ 38%]
tests/cli/test_list_blueprints.py::test_execute_no_user_installed_blueprints PASSED                                                                                                                                                                                    [ 38%]
tests/cli/test_list_blueprints.py::test_execute_no_available_blueprints PASSED                                                                                                                                                                                         [ 39%]
tests/cli/test_list_blueprints.py::test_execute_discovery_exception_user_installed PASSED                                                                                                                                                                              [ 39%]
tests/cli/test_list_blueprints.py::test_execute_discovery_exception_available PASSED                                                                                                                                                                                   [ 39%]
tests/cli/test_swarm_cli_startup_hints.py::test_startup_hints_no_config_no_key[args0] PASSED                                                                                                                                                                           [ 40%]
tests/cli/test_swarm_cli_startup_hints.py::test_startup_hints_no_config_no_key[args1] PASSED                                                                                                                                                                           [ 40%]
tests/cli/test_swarm_cli_startup_hints.py::test_startup_hints_no_key_with_config PASSED                                                                                                                                                                                [ 40%]
tests/cli/test_swarm_cli_startup_hints.py::test_startup_hints_suppressed_when_env_flag_unset PASSED                                                                                                                                                                    [ 40%]
tests/core/test_blueprint_model_override.py::test_blueprint_default_model_override PASSED                                                                                                                                                                              [ 41%]
tests/core/test_blueprint_model_override.py::test_fallback_logs_warning PASSED                                                                                                                                                                                         [ 41%]
tests/core/test_config_default_generation.py::test_default_config_generation PASSED                                                                                                                                                                                    [ 41%]
tests/core/test_config_discovery.py::test_xdg_config_discovery PASSED                                                                                                                                                                                                  [ 42%]
tests/core/test_config_discovery.py::test_config_fallback_to_cwd PASSED                                                                                                                                                                                                [ 42%]
tests/core/test_config_loader.py::test_load_full_configuration_defaults PASSED                                                                                                                                                                                         [ 42%]
tests/core/test_config_loader.py::test_load_full_configuration_profile_merging PASSED                                                                                                                                                                                  [ 42%]
tests/core/test_config_loader.py::test_load_full_configuration_env_substitution PASSED                                                                                                                                                                                 [ 43%]
tests/core/test_config_loader.py::test_load_full_configuration_missing_file PASSED                                                                                                                                                                                     [ 43%]
tests/core/test_config_loader.py::test_load_full_configuration_bad_json PASSED                                                                                                                                                                                         [ 43%]
tests/core/test_config_loader.py::test_load_full_configuration_empty_config PASSED                                                                                                                                                                                     [ 44%]
tests/core/test_config_loader.py::test_load_environment PASSED                                                                                                                                                                                                         [ 44%]
tests/core/test_fallback_to_default_model.py::test_fallback_to_default_model PASSED                                                                                                                                                                                    [ 44%]
tests/core/test_mcp_server_config.py::test_mcp_server_config_parsing PASSED                                                                                                                                                                                            [ 45%]
tests/core/test_mcp_server_config.py::test_mcp_server_add_remove_and_edge_cases PASSED                                                                                                                                                                                 [ 45%]
tests/core/test_redact_sensitive_data.py::test_redacts_api_keys_and_tokens PASSED                                                                                                                                                                                      [ 45%]
tests/core/test_redact_sensitive_data.py::test_does_not_redact_non_sensitive_strings PASSED                                                                                                                                                                            [ 45%]
tests/core/test_redact_sensitive_data.py::test_partial_redaction_behavior PASSED                                                                                                                                                                                       [ 46%]
tests/core/test_redact_sensitive_data.py::test_handles_empty_and_non_dict_inputs PASSED                                                                                                                                                                                [ 46%]
tests/extensions/launchers/test_swarm_api_launcher.py::test_swarm_api_basic_run PASSED                                                                                                                                                                                 [ 46%]
tests/extensions/launchers/test_swarm_api_launcher.py::test_swarm_api_custom_port_and_config_creation PASSED                                                                                                                                                           [ 47%]
tests/extensions/launchers/test_swarm_api_launcher.py::test_swarm_api_daemon_mode PASSED                                                                                                                                                                               [ 47%]
tests/extensions/launchers/test_swarm_api_launcher.py::test_swarm_api_blueprint_not_found PASSED                                                                                                                                                                       [ 47%]
tests/integration/test_cli_codey.py::test_codey_cli_ux PASSED                                                                                                                                                                                                          [ 47%]
tests/integration/test_cli_codey_packaged.py::test_packaged_codey_cli_install_and_launch PASSED                                                                                                                                                                        [ 48%]
tests/integration/test_cli_commands.py::test_cli_help[/mnt/models/open-swarm-mcp/.venv/bin/codey---help] PASSED                                                                                                                                                        [ 48%]
tests/integration/test_cli_commands.py::test_cli_help[/mnt/models/open-swarm-mcp/.venv/bin/swarm-cli---help] PASSED                                                                                                                                                    [ 48%]
tests/integration/test_cli_commands.py::test_cli_minimal_prompt[/mnt/models/open-swarm-mcp/.venv/bin/codey-Say hello from codey!] PASSED                                                                                                                               [ 49%]
tests/integration/test_cli_commands.py::test_swarm_cli_interactive_shell PASSED                                                                                                                                                                                        [ 49%]
tests/integration/test_cli_geese.py::test_geese_cli_search_ux SKIPPED (GeeseBlueprint functionality changed; CLI test needs review for story output vs search UX.)                                                                                                     [ 49%]
tests/integration/test_cli_jeeves.py::test_jeeves_cli_ux PASSED                                                                                                                                                                                                        [ 50%]
tests/integration/test_cli_rue_code.py::test_rue_cli_token_cost PASSED                                                                                                                                                                                                 [ 50%]
tests/integration/test_cli_rue_code.py::test_rue_cli_ux PASSED                                                                                                                                                                                                         [ 50%]
tests/integration/test_cli_whinge.py::test_whinge_cli_background_job PASSED                                                                                                                                                                                            [ 50%]
tests/integration/test_cli_zeus.py::test_zeus_cli_integration PASSED                                                                                                                                                                                                   [ 51%]
tests/manual/test_blueprintbase_init.py::test_init PASSED                                                                                                                                                                                                              [ 51%]
tests/system/test_codey_binary.py::test_codey_binary SKIPPED (Binary ./dist/codey_cli not found. Build with: pyinstaller --onefile src/swarm/blueprints/codey/codey_cli.py --name codey_cli)                                                                           [ 51%]
tests/system/test_rue_code_binary.py::test_rue_code_binary SKIPPED (Binary ./dist/rue_code_cli not found. Build with: pyinstaller --onefile src/swarm/blueprints/rue_code/rue_code_cli.py --name rue_code_cli)                                                         [ 52%]
tests/system/test_whinge_binary.py::test_whinge_binary SKIPPED (Binary ./dist/whinge not found. Build with: pyinstaller --onefile src/swarm/blueprints/whinge_surf/whinge_surf_cli.py --name whinge)                                                                   [ 52%]
tests/system/test_zeus_binary.py::test_zeus_binary SKIPPED (Binary ./dist/zeus_cli not found. Build with: pyinstaller --onefile src/swarm/blueprints/zeus/zeus_cli.py --name zeus_cli)                                                                                 [ 52%]
tests/test_cli_mode_selection.py::test_valid_input PASSED                                                                                                                                                                                                              [ 52%]
tests/test_core_filter_duplicate_system_messages.py::test_filter_duplicate_system_messages PASSED                                                                                                                                                                      [ 53%]
tests/test_core_filter_duplicate_system_messages.py::test_filter_no_system_messages PASSED                                                                                                                                                                             [ 53%]
tests/test_core_filter_duplicate_system_messages.py::test_filter_only_system_messages PASSED                                                                                                                                                                           [ 53%]
tests/test_core_filter_duplicate_system_messages.py::test_filter_empty_list PASSED                                                                                                                                                                                     [ 54%]
tests/test_core_filter_duplicate_system_messages.py::test_filter_mixed_valid_invalid PASSED                                                                                                                                                                            [ 54%]
tests/test_core_filter_messages.py::test_filter_messages_empty_and_none_content PASSED                                                                                                                                                                                 [ 54%]
tests/test_core_filter_messages.py::test_filter_messages_all_valid PASSED                                                                                                                                                                                              [ 55%]
tests/test_core_filter_messages.py::test_filter_messages_with_non_dict_items PASSED                                                                                                                                                                                    [ 55%]
tests/test_core_filter_messages.py::test_filter_messages_empty_input PASSED                                                                                                                                                                                            [ 55%]
tests/test_core_filter_messages.py::test_filter_messages_ignores_other_keys PASSED                                                                                                                                                                                     [ 55%]
tests/test_core_truncate_message_history.py::test_truncate_no_action_needed[simple] PASSED                                                                                                                                                                             [ 56%]
tests/test_core_truncate_message_history.py::test_truncate_no_action_needed[pairs] PASSED                                                                                                                                                                              [ 56%]
tests/test_core_truncate_message_history.py::test_truncate_by_message_count_basic[simple] PASSED                                                                                                                                                                       [ 56%]
tests/test_core_truncate_message_history.py::test_truncate_by_message_count_basic[pairs] PASSED                                                                                                                                                                        [ 57%]
tests/test_core_truncate_message_history.py::test_truncate_by_token_count_basic[simple] PASSED                                                                                                                                                                         [ 57%]
tests/test_core_truncate_message_history.py::test_truncate_by_token_count_basic[pairs] PASSED                                                                                                                                                                          [ 57%]
tests/test_core_truncate_message_history.py::test_pairs_preserves_basic_pair_ample_space PASSED                                                                                                                                                                        [ 57%]
tests/test_core_truncate_message_history.py::test_pairs_preserves_basic_pair_tight_space PASSED                                                                                                                                                                        [ 58%]
tests/test_core_truncate_message_history.py::test_pairs_preserves_multi_step_ample_space PASSED                                                                                                                                                                        [ 58%]
tests/test_core_truncate_message_history.py::test_pairs_preserves_multi_step_cuts_early_user PASSED                                                                                                                                                                    [ 58%]
tests/test_core_truncate_message_history.py::test_pairs_preserves_multi_step_cuts_first_pair PASSED                                                                                                                                                                    [ 59%]
tests/test_core_truncate_message_history.py::test_pairs_drops_lone_tool_due_to_separation_or_limit PASSED                                                                                                                                                              [ 59%]
tests/test_core_truncate_message_history.py::test_pairs_handles_missing_tool_response PASSED                                                                                                                                                                           [ 59%]
tests/test_core_truncate_message_history.py::test_pairs_interspersed_messages_truncation PASSED                                                                                                                                                                        [ 60%]
tests/test_core_truncate_message_history.py::test_pairs_system_message_priority_and_exceeds_limit PASSED                                                                                                                                                               [ 60%]
tests/test_core_truncate_message_history.py::test_pairs_multi_call_in_one_turn_fits PASSED                                                                                                                                                                             [ 60%]
tests/test_core_truncate_message_history.py::test_pairs_multi_call_in_one_turn_cuts_user PASSED                                                                                                                                                                        [ 60%]
tests/test_core_truncate_message_history.py::test_pairs_multi_call_in_one_turn_cuts_pair PASSED                                                                                                                                                                        [ 61%]
tests/test_core_truncate_message_history.py::test_pairs_back_to_back_tools_fit PASSED                                                                                                                                                                                  [ 61%]
tests/test_core_truncate_message_history.py::test_pairs_back_to_back_tools_cut_user PASSED                                                                                                                                                                             [ 61%]
tests/test_core_truncate_message_history.py::test_pairs_back_to_back_tools_cut_first_pair PASSED                                                                                                                                                                       [ 62%]
tests/test_core_truncate_message_history.py::test_pairs_empty_input_list PASSED                                                                                                                                                                                        [ 62%]
tests/test_core_truncate_message_history.py::test_pairs_only_system_message PASSED                                                                                                                                                                                     [ 62%]
tests/test_core_truncate_message_history.py::test_pairs_invalid_messages_mixed_in PASSED                                                                                                                                                                               [ 62%]
tests/test_core_truncate_message_history.py::test_pairs_non_serializable_content PASSED                                                                                                                                                                                [ 63%]
tests/test_core_truncate_message_history.py::test_simple_truncation_fallback_simulation PASSED                                                                                                                                                                         [ 63%]
tests/test_core_update_null_content.py::test_update_null_content_list PASSED                                                                                                                                                                                           [ 63%]
tests/test_core_update_null_content.py::test_update_null_content_single_dict PASSED                                                                                                                                                                                    [ 64%]
tests/test_core_update_null_content.py::test_update_null_content_no_change_needed PASSED                                                                                                                                                                               [ 64%]
tests/test_core_update_null_content.py::test_update_null_content_empty_list_or_invalid_input PASSED                                                                                                                                                                    [ 64%]
tests/test_dummy.py::test_dummy PASSED                                                                                                                                                                                                                                 [ 65%]
tests/test_truncate_message_history.py::test_truncate_no_action_needed[simple] PASSED                                                                                                                                                                                  [ 65%]
tests/test_truncate_message_history.py::test_truncate_no_action_needed[pairs] PASSED                                                                                                                                                                                   [ 65%]
tests/test_truncate_message_history.py::test_truncate_by_message_count_basic[simple] PASSED                                                                                                                                                                            [ 65%]
tests/test_truncate_message_history.py::test_truncate_by_message_count_basic[pairs] PASSED                                                                                                                                                                             [ 66%]
tests/test_truncate_message_history.py::test_truncate_by_token_count_basic[simple] PASSED                                                                                                                                                                              [ 66%]
tests/test_truncate_message_history.py::test_truncate_by_token_count_basic[pairs] PASSED                                                                                                                                                                               [ 66%]
tests/test_truncate_message_history.py::test_pairs_preserves_basic_pair_ample_space PASSED                                                                                                                                                                             [ 67%]
tests/test_truncate_message_history.py::test_pairs_preserves_basic_pair_tight_space PASSED                                                                                                                                                                             [ 67%]
tests/test_truncate_message_history.py::test_pairs_preserves_multi_step_ample_space PASSED                                                                                                                                                                             [ 67%]
tests/test_truncate_message_history.py::test_pairs_preserves_multi_step_cuts_early_user PASSED                                                                                                                                                                         [ 67%]
tests/test_truncate_message_history.py::test_pairs_preserves_multi_step_cuts_first_pair PASSED                                                                                                                                                                         [ 68%]
tests/test_truncate_message_history.py::test_pairs_drops_lone_tool_due_to_separation_or_limit PASSED                                                                                                                                                                   [ 68%]
tests/test_truncate_message_history.py::test_pairs_handles_missing_tool_response PASSED                                                                                                                                                                                [ 68%]
tests/test_truncate_message_history.py::test_pairs_interspersed_messages_truncation PASSED                                                                                                                                                                             [ 69%]
tests/test_truncate_message_history.py::test_pairs_system_message_priority_and_exceeds_limit PASSED                                                                                                                                                                    [ 69%]
tests/test_truncate_message_history.py::test_pairs_multi_call_in_one_turn_fits PASSED                                                                                                                                                                                  [ 69%]
tests/test_truncate_message_history.py::test_pairs_multi_call_in_one_turn_cuts_user PASSED                                                                                                                                                                             [ 70%]
tests/test_truncate_message_history.py::test_pairs_multi_call_in_one_turn_cuts_pair PASSED                                                                                                                                                                             [ 70%]
tests/test_truncate_message_history.py::test_pairs_back_to_back_tools_fit PASSED                                                                                                                                                                                       [ 70%]
tests/test_truncate_message_history.py::test_pairs_back_to_back_tools_cut_user PASSED                                                                                                                                                                                  [ 70%]
tests/test_truncate_message_history.py::test_pairs_back_to_back_tools_cut_first_pair PASSED                                                                                                                                                                            [ 71%]
tests/test_truncate_message_history.py::test_pairs_empty_input_list PASSED                                                                                                                                                                                             [ 71%]
tests/test_truncate_message_history.py::test_pairs_only_system_message PASSED                                                                                                                                                                                          [ 71%]
tests/test_truncate_message_history.py::test_pairs_invalid_messages_mixed_in PASSED                                                                                                                                                                                    [ 72%]
tests/test_truncate_message_history.py::test_pairs_non_serializable_content SKIPPED (Need to verify how non-serializable data is handled)                                                                                                                              [ 72%]
tests/test_truncate_message_history.py::test_simple_truncation_fallback_simulation PASSED                                                                                                                                                                              [ 72%]
tests/unit/test_ansi_box.py::test_ansi_box_basic PASSED                                                                                                                                                                                                                [ 72%]
tests/unit/test_ansi_box.py::test_ansi_box_multiline PASSED                                                                                                                                                                                                            [ 73%]
tests/unit/test_blueprint_base_config.py::TestBlueprintBaseConfigLoading::test_init_does_not_raise PASSED                                                                                                                                                              [ 73%]
tests/unit/test_blueprint_base_config.py::TestBlueprintBaseConfigLoading::test_markdown_setting_priority PASSED                                                                                                                                                        [ 73%]
tests/unit/test_blueprint_base_config.py::TestBlueprintBaseConfigLoading::test_llm_profile_resolution_priority PASSED                                                                                                                                                  [ 74%]
tests/unit/test_blueprint_base_config.py::TestBlueprintBaseConfigLoading::test_missing_llm_profile_raises PASSED                                                                                                                                                       [ 74%]
tests/unit/test_hook_chain_deterministic.py::test_deterministic_order_enabled PASSED                                                                                                                                                                                   [ 74%]
tests/unit/test_hook_chain_deterministic.py::test_deterministic_order_disabled PASSED                                                                                                                                                                                  [ 75%]
tests/unit/test_operation_box_utils.py::test_basic_box_output PASSED                                                                                                                                                                                                   [ 75%]
tests/unit/test_operation_box_utils.py::test_code_vs_semantic_box PASSED                                                                                                                                                                                               [ 75%]
tests/unit/test_operation_box_utils.py::test_spinner_escalation_box PASSED                                                                                                                                                                                             [ 75%]
tests/unit/test_output_utils.py::test_pretty_print_response_plain_text PASSED                                                                                                                                                                                          [ 76%]
tests/unit/test_output_utils.py::test_pretty_print_response_with_code_fence PASSED                                                                                                                                                                                     [ 76%]
tests/unit/test_redact.py::test_redact_sensitive_data_basic PASSED                                                                                                                                                                                                     [ 76%]
tests/unit/test_redact.py::test_redact_sensitive_data_string PASSED                                                                                                                                                                                                    [ 77%]
tests/unit/test_redact.py::test_redact_sensitive_data_custom_keys PASSED                                                                                                                                                                                               [ 77%]
tests/unit/test_slash_commands.py::test_help_and_compact_registered PASSED                                                                                                                                                                                             [ 77%]
tests/unit/test_slash_commands.py::test_model_command_list_and_set PASSED                                                                                                                                                                                              [ 77%]
tests/unit/test_slash_commands.py::test_additional_slash_commands[/approval-approval] PASSED                                                                                                                                                                           [ 78%]
tests/unit/test_slash_commands.py::test_additional_slash_commands[/history-history] PASSED                                                                                                                                                                             [ 78%]
tests/unit/test_slash_commands.py::test_additional_slash_commands[/clear-cleared] PASSED                                                                                                                                                                               [ 78%]
tests/unit/test_slash_commands.py::test_additional_slash_commands[/clearhistory-cleared] PASSED                                                                                                                                                                        [ 79%]
tests/unit/test_spinner.py::test_spinner_runs_and_stops PASSED                                                                                                                                                                                                         [ 79%]
tests/unit/test_spinner.py::test_spinner_long_wait PASSED                                                                                                                                                                                                              [ 79%]
tests/views/test_agent_creator_pro.py::TestAdvancedCodeValidator::test_validate_blueprint_code_comprehensive PASSED                                                                                                                                                    [ 80%]
tests/views/test_agent_creator_pro.py::TestAdvancedCodeValidator::test_validate_blueprint_semantics_missing_yield PASSED                                                                                                                                               [ 80%]
tests/views/test_agent_creator_pro.py::TestAdvancedCodeValidator::test_validate_blueprint_semantics_valid PASSED                                                                                                                                                       [ 80%]
tests/views/test_agent_creator_pro.py::TestAdvancedCodeValidator::test_validate_performance_problematic_code PASSED                                                                                                                                                    [ 80%]
tests/views/test_agent_creator_pro.py::TestAdvancedCodeValidator::test_validate_performance_safe_code PASSED                                                                                                                                                           [ 81%]
tests/views/test_agent_creator_pro.py::TestAdvancedCodeValidator::test_validate_security_dangerous_code PASSED                                                                                                                                                         [ 81%]
tests/views/test_agent_creator_pro.py::TestAdvancedCodeValidator::test_validate_security_hardcoded_secrets PASSED                                                                                                                                                      [ 81%]
tests/views/test_agent_creator_pro.py::TestAdvancedCodeValidator::test_validate_security_safe_code PASSED                                                                                                                                                              [ 82%]
tests/views/test_agent_creator_pro.py::TestProAgentGenerator::test_generate_agent_code_basic PASSED                                                                                                                                                                    [ 82%]
tests/views/test_agent_creator_pro.py::TestProAgentGenerator::test_generate_agent_code_with_complex_expertise PASSED                                                                                                                                                   [ 82%]
tests/views/test_agent_creator_pro.py::TestProAgentGenerator::test_sanitize_class_name PASSED                                                                                                                                                                          [ 82%]
tests/views/test_agent_creator_pro.py::TestProAgentGenerator::test_template_selection_analytical PASSED                                                                                                                                                                [ 83%]
tests/views/test_agent_creator_pro.py::TestProAgentGenerator::test_template_selection_conversational PASSED                                                                                                                                                            [ 83%]
tests/views/test_agent_creator_pro.py::TestProAgentGenerator::test_template_selection_creative PASSED                                                                                                                                                                  [ 83%]
tests/views/test_agent_creator_pro.py::TestAgentCreatorProViews::test_agent_creator_pro_page_context FAILED                                                                                                                                                            [ 84%]
tests/views/test_agent_creator_pro.py::TestAgentCreatorProViews::test_agent_creator_pro_page_get FAILED                                                                                                                                                                [ 84%]
tests/views/test_agent_creator_pro.py::TestAgentCreatorProIntegration::test_full_agent_creation_workflow PASSED                                                                                                                                                        [ 84%]
tests/views/test_agent_creator_pro.py::TestAgentCreatorProErrorHandling::test_generator_handles_empty_expertise PASSED                                                                                                                                                 [ 85%]
tests/views/test_agent_creator_pro.py::TestAgentCreatorProErrorHandling::test_generator_handles_missing_fields PASSED                                                                                                                                                  [ 85%]
tests/views/test_agent_creator_pro.py::TestAgentCreatorProErrorHandling::test_validator_handles_empty_code PASSED                                                                                                                                                      [ 85%]
tests/views/test_agent_creator_pro.py::TestAgentCreatorProErrorHandling::test_validator_handles_invalid_syntax PASSED                                                                                                                                                  [ 85%]
tests/views/test_settings_dashboard.py::TestSettingsManager::test_collect_all_settings PASSED                                                                                                                                                                          [ 86%]
tests/views/test_settings_dashboard.py::TestSettingsManager::test_collect_auth_settings PASSED                                                                                                                                                                         [ 86%]
tests/views/test_settings_dashboard.py::TestSettingsManager::test_collect_database_settings PASSED                                                                                                                                                                     [ 86%]
tests/views/test_settings_dashboard.py::TestSettingsManager::test_collect_django_settings PASSED                                                                                                                                                                       [ 87%]
tests/views/test_settings_dashboard.py::TestSettingsManager::test_collect_llm_settings_error PASSED                                                                                                                                                                    [ 87%]
tests/views/test_settings_dashboard.py::TestSettingsManager::test_collect_llm_settings_success PASSED                                                                                                                                                                  [ 87%]
tests/views/test_settings_dashboard.py::TestSettingsManager::test_collect_logging_settings PASSED                                                                                                                                                                      [ 87%]
tests/views/test_settings_dashboard.py::TestSettingsManager::test_collect_performance_settings PASSED                                                                                                                                                                  [ 88%]
tests/views/test_settings_dashboard.py::TestSettingsManager::test_collect_swarm_core_settings PASSED                                                                                                                                                                   [ 88%]
tests/views/test_settings_dashboard.py::TestSettingsManager::test_collect_ui_settings PASSED                                                                                                                                                                           [ 88%]
tests/views/test_settings_dashboard.py::TestSettingsManager::test_settings_manager_initialization PASSED                                                                                                                                                               [ 89%]
tests/views/test_settings_dashboard.py::TestSettingsDashboardViews::test_environment_variables_filtering FAILED                                                                                                                                                        [ 89%]
tests/views/test_settings_dashboard.py::TestSettingsDashboardViews::test_environment_variables_get FAILED                                                                                                                                                              [ 89%]
tests/views/test_settings_dashboard.py::TestSettingsDashboardViews::test_settings_api_get FAILED                                                                                                                                                                       [ 90%]
tests/views/test_settings_dashboard.py::TestSettingsDashboardViews::test_settings_api_sensitive_data_filtering FAILED                                                                                                                                                  [ 90%]
tests/views/test_settings_dashboard.py::TestSettingsDashboardViews::test_settings_dashboard_context FAILED                                                                                                                                                             [ 90%]
tests/views/test_settings_dashboard.py::TestSettingsDashboardViews::test_settings_dashboard_error_handling FAILED                                                                                                                                                      [ 90%]
tests/views/test_settings_dashboard.py::TestSettingsDashboardViews::test_settings_dashboard_get FAILED                                                                                                                                                                 [ 91%]
tests/views/test_settings_dashboard.py::TestSettingsManagerEdgeCases::test_empty_config_file PASSED                                                                                                                                                                    [ 91%]
tests/views/test_settings_dashboard.py::TestSettingsManagerEdgeCases::test_missing_django_settings PASSED                                                                                                                                                              [ 91%]
tests/views/test_settings_dashboard.py::TestSettingsManagerEdgeCases::test_no_environment_variables PASSED                                                                                                                                                             [ 92%]
tests/views/test_settings_dashboard.py::TestSettingsIntegration::test_full_settings_collection_workflow PASSED                                                                                                                                                         [ 92%]
tests/api/test_chat_completions_auth_async.py::TestChatCompletionsAuthAsync::test_no_auth_returns_403 ERROR                                                                                                                                                            [ 92%]
tests/api/test_chat_completions_auth_async.py::TestChatCompletionsAuthAsync::test_invalid_token_returns_403 ERROR                                                                                                                                                      [ 92%]
tests/api/test_chat_completions_auth_async.py::TestChatCompletionsAuthAsync::test_valid_token_allows_access ERROR                                                                                                                                                      [ 93%]
tests/api/test_chat_completions_auth_async.py::TestChatCompletionsAuthAsync::test_valid_session_allows_access ERROR                                                                                                                                                    [ 93%]
tests/api/test_chat_completions_auth_async.py::TestChatCompletionsAuthAsync::test_echocraft_non_streaming_success_auth_disabled ERROR                                                                                                                                  [ 93%]
tests/api/test_chat_completions_auth_async.py::TestChatCompletionsAuthAsync::test_chatbot_non_streaming_success_auth_disabled ERROR                                                                                                                                    [ 94%]
tests/api/test_chat_completions_failing_async.py::TestChatCompletionsAPIFailingAsync::test_echocraft_streaming_success ERROR                                                                                                                                           [ 94%]
tests/api/test_chat_completions_failing_async.py::TestChatCompletionsAPIFailingAsync::test_chatbot_streaming_success ERROR                                                                                                                                             [ 94%]
tests/api/test_chat_completions_failing_async.py::TestChatCompletionsAPIFailingAsync::test_blueprint_run_exception_streaming_returns_error_sse ERROR                                                                                                                   [ 95%]
tests/api/test_chat_completions_validation_async.py::TestChatCompletionsValidationAsync::test_missing_required_field_returns_400[model] ERROR                                                                                                                          [ 95%]
tests/api/test_chat_completions_validation_async.py::TestChatCompletionsValidationAsync::test_missing_required_field_returns_400[messages] ERROR                                                                                                                       [ 95%]
tests/api/test_chat_completions_validation_async.py::TestChatCompletionsValidationAsync::test_invalid_field_type_or_content_returns_400[invalid_data0-Ensure this field has at least 1 elements] ERROR                                                                 [ 95%]
tests/api/test_chat_completions_validation_async.py::TestChatCompletionsValidationAsync::test_invalid_field_type_or_content_returns_400[invalid_data1-Expected a list of items] ERROR                                                                                  [ 96%]
tests/api/test_chat_completions_validation_async.py::TestChatCompletionsValidationAsync::test_invalid_field_type_or_content_returns_400[invalid_data2-This field is required.] ERROR                                                                                   [ 96%]
tests/api/test_chat_completions_validation_async.py::TestChatCompletionsValidationAsync::test_invalid_field_type_or_content_returns_400[invalid_data3-This field is required.] ERROR                                                                                   [ 96%]
tests/api/test_chat_completions_validation_async.py::TestChatCompletionsValidationAsync::test_invalid_field_type_or_content_returns_400[invalid_data4-invalid" is not a valid choice] ERROR                                                                            [ 97%]
tests/api/test_chat_completions_validation_async.py::TestChatCompletionsValidationAsync::test_invalid_field_type_or_content_returns_400[invalid_data5-Content must be a string or null.] ERROR                                                                         [ 97%]
tests/api/test_chat_completions_validation_async.py::TestChatCompletionsValidationAsync::test_malformed_json_returns_400 ERROR                                                                                                                                         [ 97%]
tests/api/test_chat_completions_validation_async.py::TestChatCompletionsValidationAsync::test_nonexistent_model_permission_denied ERROR                                                                                                                                [ 97%]
tests/api/test_chat_completions_validation_async.py::TestChatCompletionsValidationAsync::test_nonexistent_model_not_found ERROR                                                                                                                                        [ 98%]
tests/api/test_chat_completions_validation_async.py::TestChatCompletionsValidationAsync::test_blueprint_init_error_returns_500 ERROR                                                                                                                                   [ 98%]
tests/api/test_chat_completions_validation_async.py::TestChatCompletionsValidationAsync::test_blueprint_run_exception_non_streaming_returns_500 ERROR                                                                                                                  [ 98%]
tests/api/test_endpoints_list_blueprints_models.py::test_models_and_blueprints_endpoints_include_dynamic_team PASSED                                                                                                                                                   [ 99%]
tests/api/test_teams_export_import.py::test_export_json_and_csv_and_import_roundtrip PASSED                                                                                                                                                                            [ 99%]
tests/integration/test_dynamic_teams_reset.py::test_reset_clears_dynamic_registry_and_discovery PASSED                                                                                                                                                                 [ 99%]
tests/integration/test_dynamic_teams_smoke.py::test_dynamic_team_registry_and_discovery_roundtrip PASSED                                                                                                                                                               [100%]

=================================================================================================================================== ERRORS ===================================================================================================================================
__________________________________________________________________________________________________ ERROR at setup of TestChatCompletionsAuthAsync.test_no_auth_returns_403 ___________________________________________________________________________________________________

self = <django.db.backends.utils.CursorWrapper object at 0xfeb7b99d5990>
sql = 'SELECT "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."u...staff", "auth_user"."is_active", "auth_user"."date_joined" FROM "auth_user" WHERE "auth_user"."username" = %s LIMIT 21', params = ('testuser',)
ignored_wrapper_args = (False, {'connection': <DatabaseWrapper vendor='sqlite' alias='default'>, 'cursor': <django.db.backends.utils.CursorWrapper object at 0xfeb7b99d5990>})

    def _execute(self, sql, params, *ignored_wrapper_args):
        self.db.validate_no_broken_transaction()
        with self.db.wrap_database_errors:
            if params is None:
                # params default might be backend specific.
                return self.cursor.execute(sql)
            else:
>               return self.cursor.execute(sql, params)

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:89: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <django.db.backends.sqlite3.base.SQLiteCursorWrapper object at 0xfeb7b93d4820>
query = 'SELECT "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."u..._staff", "auth_user"."is_active", "auth_user"."date_joined" FROM "auth_user" WHERE "auth_user"."username" = ? LIMIT 21'
params = ('testuser',)

    def execute(self, query, params=None):
        if params is None:
            return super().execute(query)
        # Extract names if params is a mapping, i.e. "pyformat" style is used.
        param_names = list(params) if isinstance(params, Mapping) else None
        query = self.convert_query(query, param_names=param_names)
>       return super().execute(query, params)
E       sqlite3.OperationalError: no such table: auth_user

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/sqlite3/base.py:328: OperationalError

The above exception was the direct cause of the following exception:

db = None

    @pytest.fixture
    def test_user(db): # db fixture ensures DB is available *within* this fixture's scope
        """Creates a standard test user."""
        from django.contrib.auth import get_user_model
        User = get_user_model()
        # Use update_or_create for robustness
>       user, created = User.objects.update_or_create(
            username='testuser',
            defaults={'is_staff': False, 'is_superuser': False}
        )

tests/conftest.py:74: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/manager.py:87: in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:949: in update_or_create
    obj, created = self.select_for_update().get_or_create(defaults, **kwargs)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:916: in get_or_create
    return self.get(**kwargs), False
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:633: in get
    num = len(clone)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:380: in __len__
    self._fetch_all()
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:1881: in _fetch_all
    self._result_cache = list(self._iterable_class(self))
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:91: in __iter__
    results = compiler.execute_sql(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/sql/compiler.py:1562: in execute_sql
    cursor.execute(sql, params)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:67: in execute
    return self._execute_with_wrappers(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:80: in _execute_with_wrappers
    return executor(sql, params, many, context)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:84: in _execute
    with self.db.wrap_database_errors:
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/utils.py:91: in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:89: in _execute
    return self.cursor.execute(sql, params)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <django.db.backends.sqlite3.base.SQLiteCursorWrapper object at 0xfeb7b93d4820>
query = 'SELECT "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."u..._staff", "auth_user"."is_active", "auth_user"."date_joined" FROM "auth_user" WHERE "auth_user"."username" = ? LIMIT 21'
params = ('testuser',)

    def execute(self, query, params=None):
        if params is None:
            return super().execute(query)
        # Extract names if params is a mapping, i.e. "pyformat" style is used.
        param_names = list(params) if isinstance(params, Mapping) else None
        query = self.convert_query(query, param_names=param_names)
>       return super().execute(query, params)
E       django.db.utils.OperationalError: no such table: auth_user

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/sqlite3/base.py:328: OperationalError
_______________________________________________________________________________________________ ERROR at setup of TestChatCompletionsAuthAsync.test_invalid_token_returns_403 ________________________________________________________________________________________________

self = <django.db.backends.utils.CursorWrapper object at 0xfeb7ba5b6a10>
sql = 'SELECT "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."u...staff", "auth_user"."is_active", "auth_user"."date_joined" FROM "auth_user" WHERE "auth_user"."username" = %s LIMIT 21', params = ('testuser',)
ignored_wrapper_args = (False, {'connection': <DatabaseWrapper vendor='sqlite' alias='default'>, 'cursor': <django.db.backends.utils.CursorWrapper object at 0xfeb7ba5b6a10>})

    def _execute(self, sql, params, *ignored_wrapper_args):
        self.db.validate_no_broken_transaction()
        with self.db.wrap_database_errors:
            if params is None:
                # params default might be backend specific.
                return self.cursor.execute(sql)
            else:
>               return self.cursor.execute(sql, params)

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:89: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <django.db.backends.sqlite3.base.SQLiteCursorWrapper object at 0xfeb7b93d53f0>
query = 'SELECT "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."u..._staff", "auth_user"."is_active", "auth_user"."date_joined" FROM "auth_user" WHERE "auth_user"."username" = ? LIMIT 21'
params = ('testuser',)

    def execute(self, query, params=None):
        if params is None:
            return super().execute(query)
        # Extract names if params is a mapping, i.e. "pyformat" style is used.
        param_names = list(params) if isinstance(params, Mapping) else None
        query = self.convert_query(query, param_names=param_names)
>       return super().execute(query, params)
E       sqlite3.OperationalError: no such table: auth_user

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/sqlite3/base.py:328: OperationalError

The above exception was the direct cause of the following exception:

db = None

    @pytest.fixture
    def test_user(db): # db fixture ensures DB is available *within* this fixture's scope
        """Creates a standard test user."""
        from django.contrib.auth import get_user_model
        User = get_user_model()
        # Use update_or_create for robustness
>       user, created = User.objects.update_or_create(
            username='testuser',
            defaults={'is_staff': False, 'is_superuser': False}
        )

tests/conftest.py:74: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/manager.py:87: in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:949: in update_or_create
    obj, created = self.select_for_update().get_or_create(defaults, **kwargs)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:916: in get_or_create
    return self.get(**kwargs), False
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:633: in get
    num = len(clone)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:380: in __len__
    self._fetch_all()
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:1881: in _fetch_all
    self._result_cache = list(self._iterable_class(self))
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:91: in __iter__
    results = compiler.execute_sql(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/sql/compiler.py:1562: in execute_sql
    cursor.execute(sql, params)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:67: in execute
    return self._execute_with_wrappers(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:80: in _execute_with_wrappers
    return executor(sql, params, many, context)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:84: in _execute
    with self.db.wrap_database_errors:
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/utils.py:91: in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:89: in _execute
    return self.cursor.execute(sql, params)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <django.db.backends.sqlite3.base.SQLiteCursorWrapper object at 0xfeb7b93d53f0>
query = 'SELECT "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."u..._staff", "auth_user"."is_active", "auth_user"."date_joined" FROM "auth_user" WHERE "auth_user"."username" = ? LIMIT 21'
params = ('testuser',)

    def execute(self, query, params=None):
        if params is None:
            return super().execute(query)
        # Extract names if params is a mapping, i.e. "pyformat" style is used.
        param_names = list(params) if isinstance(params, Mapping) else None
        query = self.convert_query(query, param_names=param_names)
>       return super().execute(query, params)
E       django.db.utils.OperationalError: no such table: auth_user

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/sqlite3/base.py:328: OperationalError
_______________________________________________________________________________________________ ERROR at setup of TestChatCompletionsAuthAsync.test_valid_token_allows_access ________________________________________________________________________________________________

self = <django.db.backends.utils.CursorWrapper object at 0xfeb7b94e14b0>
sql = 'SELECT "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."u...staff", "auth_user"."is_active", "auth_user"."date_joined" FROM "auth_user" WHERE "auth_user"."username" = %s LIMIT 21', params = ('testuser',)
ignored_wrapper_args = (False, {'connection': <DatabaseWrapper vendor='sqlite' alias='default'>, 'cursor': <django.db.backends.utils.CursorWrapper object at 0xfeb7b94e14b0>})

    def _execute(self, sql, params, *ignored_wrapper_args):
        self.db.validate_no_broken_transaction()
        with self.db.wrap_database_errors:
            if params is None:
                # params default might be backend specific.
                return self.cursor.execute(sql)
            else:
>               return self.cursor.execute(sql, params)

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:89: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <django.db.backends.sqlite3.base.SQLiteCursorWrapper object at 0xfeb7b93d49d0>
query = 'SELECT "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."u..._staff", "auth_user"."is_active", "auth_user"."date_joined" FROM "auth_user" WHERE "auth_user"."username" = ? LIMIT 21'
params = ('testuser',)

    def execute(self, query, params=None):
        if params is None:
            return super().execute(query)
        # Extract names if params is a mapping, i.e. "pyformat" style is used.
        param_names = list(params) if isinstance(params, Mapping) else None
        query = self.convert_query(query, param_names=param_names)
>       return super().execute(query, params)
E       sqlite3.OperationalError: no such table: auth_user

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/sqlite3/base.py:328: OperationalError

The above exception was the direct cause of the following exception:

db = None

    @pytest.fixture
    def test_user(db): # db fixture ensures DB is available *within* this fixture's scope
        """Creates a standard test user."""
        from django.contrib.auth import get_user_model
        User = get_user_model()
        # Use update_or_create for robustness
>       user, created = User.objects.update_or_create(
            username='testuser',
            defaults={'is_staff': False, 'is_superuser': False}
        )

tests/conftest.py:74: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/manager.py:87: in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:949: in update_or_create
    obj, created = self.select_for_update().get_or_create(defaults, **kwargs)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:916: in get_or_create
    return self.get(**kwargs), False
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:633: in get
    num = len(clone)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:380: in __len__
    self._fetch_all()
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:1881: in _fetch_all
    self._result_cache = list(self._iterable_class(self))
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:91: in __iter__
    results = compiler.execute_sql(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/sql/compiler.py:1562: in execute_sql
    cursor.execute(sql, params)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:67: in execute
    return self._execute_with_wrappers(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:80: in _execute_with_wrappers
    return executor(sql, params, many, context)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:84: in _execute
    with self.db.wrap_database_errors:
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/utils.py:91: in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:89: in _execute
    return self.cursor.execute(sql, params)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <django.db.backends.sqlite3.base.SQLiteCursorWrapper object at 0xfeb7b93d49d0>
query = 'SELECT "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."u..._staff", "auth_user"."is_active", "auth_user"."date_joined" FROM "auth_user" WHERE "auth_user"."username" = ? LIMIT 21'
params = ('testuser',)

    def execute(self, query, params=None):
        if params is None:
            return super().execute(query)
        # Extract names if params is a mapping, i.e. "pyformat" style is used.
        param_names = list(params) if isinstance(params, Mapping) else None
        query = self.convert_query(query, param_names=param_names)
>       return super().execute(query, params)
E       django.db.utils.OperationalError: no such table: auth_user

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/sqlite3/base.py:328: OperationalError
______________________________________________________________________________________________ ERROR at setup of TestChatCompletionsAuthAsync.test_valid_session_allows_access _______________________________________________________________________________________________

self = <django.db.backends.utils.CursorWrapper object at 0xfeb7b9af3910>
sql = 'SELECT "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."u...staff", "auth_user"."is_active", "auth_user"."date_joined" FROM "auth_user" WHERE "auth_user"."username" = %s LIMIT 21', params = ('testuser',)
ignored_wrapper_args = (False, {'connection': <DatabaseWrapper vendor='sqlite' alias='default'>, 'cursor': <django.db.backends.utils.CursorWrapper object at 0xfeb7b9af3910>})

    def _execute(self, sql, params, *ignored_wrapper_args):
        self.db.validate_no_broken_transaction()
        with self.db.wrap_database_errors:
            if params is None:
                # params default might be backend specific.
                return self.cursor.execute(sql)
            else:
>               return self.cursor.execute(sql, params)

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:89: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <django.db.backends.sqlite3.base.SQLiteCursorWrapper object at 0xfeb7b93d5750>
query = 'SELECT "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."u..._staff", "auth_user"."is_active", "auth_user"."date_joined" FROM "auth_user" WHERE "auth_user"."username" = ? LIMIT 21'
params = ('testuser',)

    def execute(self, query, params=None):
        if params is None:
            return super().execute(query)
        # Extract names if params is a mapping, i.e. "pyformat" style is used.
        param_names = list(params) if isinstance(params, Mapping) else None
        query = self.convert_query(query, param_names=param_names)
>       return super().execute(query, params)
E       sqlite3.OperationalError: no such table: auth_user

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/sqlite3/base.py:328: OperationalError

The above exception was the direct cause of the following exception:

db = None

    @pytest.fixture
    def test_user(db): # db fixture ensures DB is available *within* this fixture's scope
        """Creates a standard test user."""
        from django.contrib.auth import get_user_model
        User = get_user_model()
        # Use update_or_create for robustness
>       user, created = User.objects.update_or_create(
            username='testuser',
            defaults={'is_staff': False, 'is_superuser': False}
        )

tests/conftest.py:74: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/manager.py:87: in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:949: in update_or_create
    obj, created = self.select_for_update().get_or_create(defaults, **kwargs)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:916: in get_or_create
    return self.get(**kwargs), False
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:633: in get
    num = len(clone)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:380: in __len__
    self._fetch_all()
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:1881: in _fetch_all
    self._result_cache = list(self._iterable_class(self))
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:91: in __iter__
    results = compiler.execute_sql(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/sql/compiler.py:1562: in execute_sql
    cursor.execute(sql, params)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:67: in execute
    return self._execute_with_wrappers(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:80: in _execute_with_wrappers
    return executor(sql, params, many, context)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:84: in _execute
    with self.db.wrap_database_errors:
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/utils.py:91: in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:89: in _execute
    return self.cursor.execute(sql, params)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <django.db.backends.sqlite3.base.SQLiteCursorWrapper object at 0xfeb7b93d5750>
query = 'SELECT "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."u..._staff", "auth_user"."is_active", "auth_user"."date_joined" FROM "auth_user" WHERE "auth_user"."username" = ? LIMIT 21'
params = ('testuser',)

    def execute(self, query, params=None):
        if params is None:
            return super().execute(query)
        # Extract names if params is a mapping, i.e. "pyformat" style is used.
        param_names = list(params) if isinstance(params, Mapping) else None
        query = self.convert_query(query, param_names=param_names)
>       return super().execute(query, params)
E       django.db.utils.OperationalError: no such table: auth_user

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/sqlite3/base.py:328: OperationalError
_____________________________________________________________________________________ ERROR at setup of TestChatCompletionsAuthAsync.test_echocraft_non_streaming_success_auth_disabled ______________________________________________________________________________________

self = <django.db.backends.utils.CursorWrapper object at 0xfeb7ba489ae0>
sql = 'SELECT "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."u...staff", "auth_user"."is_active", "auth_user"."date_joined" FROM "auth_user" WHERE "auth_user"."username" = %s LIMIT 21', params = ('testuser',)
ignored_wrapper_args = (False, {'connection': <DatabaseWrapper vendor='sqlite' alias='default'>, 'cursor': <django.db.backends.utils.CursorWrapper object at 0xfeb7ba489ae0>})

    def _execute(self, sql, params, *ignored_wrapper_args):
        self.db.validate_no_broken_transaction()
        with self.db.wrap_database_errors:
            if params is None:
                # params default might be backend specific.
                return self.cursor.execute(sql)
            else:
>               return self.cursor.execute(sql, params)

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:89: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <django.db.backends.sqlite3.base.SQLiteCursorWrapper object at 0xfeb7b93b5090>
query = 'SELECT "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."u..._staff", "auth_user"."is_active", "auth_user"."date_joined" FROM "auth_user" WHERE "auth_user"."username" = ? LIMIT 21'
params = ('testuser',)

    def execute(self, query, params=None):
        if params is None:
            return super().execute(query)
        # Extract names if params is a mapping, i.e. "pyformat" style is used.
        param_names = list(params) if isinstance(params, Mapping) else None
        query = self.convert_query(query, param_names=param_names)
>       return super().execute(query, params)
E       sqlite3.OperationalError: no such table: auth_user

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/sqlite3/base.py:328: OperationalError

The above exception was the direct cause of the following exception:

db = None

    @pytest.fixture
    def test_user(db): # db fixture ensures DB is available *within* this fixture's scope
        """Creates a standard test user."""
        from django.contrib.auth import get_user_model
        User = get_user_model()
        # Use update_or_create for robustness
>       user, created = User.objects.update_or_create(
            username='testuser',
            defaults={'is_staff': False, 'is_superuser': False}
        )

tests/conftest.py:74: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/manager.py:87: in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:949: in update_or_create
    obj, created = self.select_for_update().get_or_create(defaults, **kwargs)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:916: in get_or_create
    return self.get(**kwargs), False
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:633: in get
    num = len(clone)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:380: in __len__
    self._fetch_all()
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:1881: in _fetch_all
    self._result_cache = list(self._iterable_class(self))
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:91: in __iter__
    results = compiler.execute_sql(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/sql/compiler.py:1562: in execute_sql
    cursor.execute(sql, params)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:67: in execute
    return self._execute_with_wrappers(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:80: in _execute_with_wrappers
    return executor(sql, params, many, context)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:84: in _execute
    with self.db.wrap_database_errors:
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/utils.py:91: in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:89: in _execute
    return self.cursor.execute(sql, params)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <django.db.backends.sqlite3.base.SQLiteCursorWrapper object at 0xfeb7b93b5090>
query = 'SELECT "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."u..._staff", "auth_user"."is_active", "auth_user"."date_joined" FROM "auth_user" WHERE "auth_user"."username" = ? LIMIT 21'
params = ('testuser',)

    def execute(self, query, params=None):
        if params is None:
            return super().execute(query)
        # Extract names if params is a mapping, i.e. "pyformat" style is used.
        param_names = list(params) if isinstance(params, Mapping) else None
        query = self.convert_query(query, param_names=param_names)
>       return super().execute(query, params)
E       django.db.utils.OperationalError: no such table: auth_user

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/sqlite3/base.py:328: OperationalError
______________________________________________________________________________________ ERROR at setup of TestChatCompletionsAuthAsync.test_chatbot_non_streaming_success_auth_disabled _______________________________________________________________________________________

self = <django.db.backends.utils.CursorWrapper object at 0xfeb7b98c1600>
sql = 'SELECT "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."u...staff", "auth_user"."is_active", "auth_user"."date_joined" FROM "auth_user" WHERE "auth_user"."username" = %s LIMIT 21', params = ('testuser',)
ignored_wrapper_args = (False, {'connection': <DatabaseWrapper vendor='sqlite' alias='default'>, 'cursor': <django.db.backends.utils.CursorWrapper object at 0xfeb7b98c1600>})

    def _execute(self, sql, params, *ignored_wrapper_args):
        self.db.validate_no_broken_transaction()
        with self.db.wrap_database_errors:
            if params is None:
                # params default might be backend specific.
                return self.cursor.execute(sql)
            else:
>               return self.cursor.execute(sql, params)

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:89: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <django.db.backends.sqlite3.base.SQLiteCursorWrapper object at 0xfeb7b93d63b0>
query = 'SELECT "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."u..._staff", "auth_user"."is_active", "auth_user"."date_joined" FROM "auth_user" WHERE "auth_user"."username" = ? LIMIT 21'
params = ('testuser',)

    def execute(self, query, params=None):
        if params is None:
            return super().execute(query)
        # Extract names if params is a mapping, i.e. "pyformat" style is used.
        param_names = list(params) if isinstance(params, Mapping) else None
        query = self.convert_query(query, param_names=param_names)
>       return super().execute(query, params)
E       sqlite3.OperationalError: no such table: auth_user

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/sqlite3/base.py:328: OperationalError

The above exception was the direct cause of the following exception:

db = None

    @pytest.fixture
    def test_user(db): # db fixture ensures DB is available *within* this fixture's scope
        """Creates a standard test user."""
        from django.contrib.auth import get_user_model
        User = get_user_model()
        # Use update_or_create for robustness
>       user, created = User.objects.update_or_create(
            username='testuser',
            defaults={'is_staff': False, 'is_superuser': False}
        )

tests/conftest.py:74: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/manager.py:87: in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:949: in update_or_create
    obj, created = self.select_for_update().get_or_create(defaults, **kwargs)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:916: in get_or_create
    return self.get(**kwargs), False
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:633: in get
    num = len(clone)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:380: in __len__
    self._fetch_all()
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:1881: in _fetch_all
    self._result_cache = list(self._iterable_class(self))
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:91: in __iter__
    results = compiler.execute_sql(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/sql/compiler.py:1562: in execute_sql
    cursor.execute(sql, params)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:67: in execute
    return self._execute_with_wrappers(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:80: in _execute_with_wrappers
    return executor(sql, params, many, context)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:84: in _execute
    with self.db.wrap_database_errors:
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/utils.py:91: in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:89: in _execute
    return self.cursor.execute(sql, params)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <django.db.backends.sqlite3.base.SQLiteCursorWrapper object at 0xfeb7b93d63b0>
query = 'SELECT "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."u..._staff", "auth_user"."is_active", "auth_user"."date_joined" FROM "auth_user" WHERE "auth_user"."username" = ? LIMIT 21'
params = ('testuser',)

    def execute(self, query, params=None):
        if params is None:
            return super().execute(query)
        # Extract names if params is a mapping, i.e. "pyformat" style is used.
        param_names = list(params) if isinstance(params, Mapping) else None
        query = self.convert_query(query, param_names=param_names)
>       return super().execute(query, params)
E       django.db.utils.OperationalError: no such table: auth_user

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/sqlite3/base.py:328: OperationalError
___________________________________________________________________________________________ ERROR at setup of TestChatCompletionsAPIFailingAsync.test_echocraft_streaming_success ____________________________________________________________________________________________

self = <django.db.backends.utils.CursorWrapper object at 0xfeb7b9559390>
sql = 'SELECT "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."u...staff", "auth_user"."is_active", "auth_user"."date_joined" FROM "auth_user" WHERE "auth_user"."username" = %s LIMIT 21', params = ('testuser',)
ignored_wrapper_args = (False, {'connection': <DatabaseWrapper vendor='sqlite' alias='default'>, 'cursor': <django.db.backends.utils.CursorWrapper object at 0xfeb7b9559390>})

    def _execute(self, sql, params, *ignored_wrapper_args):
        self.db.validate_no_broken_transaction()
        with self.db.wrap_database_errors:
            if params is None:
                # params default might be backend specific.
                return self.cursor.execute(sql)
            else:
>               return self.cursor.execute(sql, params)

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:89: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <django.db.backends.sqlite3.base.SQLiteCursorWrapper object at 0xfeb7b93b52d0>
query = 'SELECT "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."u..._staff", "auth_user"."is_active", "auth_user"."date_joined" FROM "auth_user" WHERE "auth_user"."username" = ? LIMIT 21'
params = ('testuser',)

    def execute(self, query, params=None):
        if params is None:
            return super().execute(query)
        # Extract names if params is a mapping, i.e. "pyformat" style is used.
        param_names = list(params) if isinstance(params, Mapping) else None
        query = self.convert_query(query, param_names=param_names)
>       return super().execute(query, params)
E       sqlite3.OperationalError: no such table: auth_user

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/sqlite3/base.py:328: OperationalError

The above exception was the direct cause of the following exception:

db = None

    @pytest.fixture
    def test_user(db): # db fixture ensures DB is available *within* this fixture's scope
        """Creates a standard test user."""
        from django.contrib.auth import get_user_model
        User = get_user_model()
        # Use update_or_create for robustness
>       user, created = User.objects.update_or_create(
            username='testuser',
            defaults={'is_staff': False, 'is_superuser': False}
        )

tests/conftest.py:74: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/manager.py:87: in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:949: in update_or_create
    obj, created = self.select_for_update().get_or_create(defaults, **kwargs)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:916: in get_or_create
    return self.get(**kwargs), False
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:633: in get
    num = len(clone)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:380: in __len__
    self._fetch_all()
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:1881: in _fetch_all
    self._result_cache = list(self._iterable_class(self))
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:91: in __iter__
    results = compiler.execute_sql(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/sql/compiler.py:1562: in execute_sql
    cursor.execute(sql, params)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:67: in execute
    return self._execute_with_wrappers(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:80: in _execute_with_wrappers
    return executor(sql, params, many, context)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:84: in _execute
    with self.db.wrap_database_errors:
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/utils.py:91: in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:89: in _execute
    return self.cursor.execute(sql, params)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <django.db.backends.sqlite3.base.SQLiteCursorWrapper object at 0xfeb7b93b52d0>
query = 'SELECT "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."u..._staff", "auth_user"."is_active", "auth_user"."date_joined" FROM "auth_user" WHERE "auth_user"."username" = ? LIMIT 21'
params = ('testuser',)

    def execute(self, query, params=None):
        if params is None:
            return super().execute(query)
        # Extract names if params is a mapping, i.e. "pyformat" style is used.
        param_names = list(params) if isinstance(params, Mapping) else None
        query = self.convert_query(query, param_names=param_names)
>       return super().execute(query, params)
E       django.db.utils.OperationalError: no such table: auth_user

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/sqlite3/base.py:328: OperationalError
____________________________________________________________________________________________ ERROR at setup of TestChatCompletionsAPIFailingAsync.test_chatbot_streaming_success _____________________________________________________________________________________________

self = <django.db.backends.utils.CursorWrapper object at 0xfeb7b9911180>
sql = 'SELECT "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."u...staff", "auth_user"."is_active", "auth_user"."date_joined" FROM "auth_user" WHERE "auth_user"."username" = %s LIMIT 21', params = ('testuser',)
ignored_wrapper_args = (False, {'connection': <DatabaseWrapper vendor='sqlite' alias='default'>, 'cursor': <django.db.backends.utils.CursorWrapper object at 0xfeb7b9911180>})

    def _execute(self, sql, params, *ignored_wrapper_args):
        self.db.validate_no_broken_transaction()
        with self.db.wrap_database_errors:
            if params is None:
                # params default might be backend specific.
                return self.cursor.execute(sql)
            else:
>               return self.cursor.execute(sql, params)

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:89: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <django.db.backends.sqlite3.base.SQLiteCursorWrapper object at 0xfeb7b93d5990>
query = 'SELECT "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."u..._staff", "auth_user"."is_active", "auth_user"."date_joined" FROM "auth_user" WHERE "auth_user"."username" = ? LIMIT 21'
params = ('testuser',)

    def execute(self, query, params=None):
        if params is None:
            return super().execute(query)
        # Extract names if params is a mapping, i.e. "pyformat" style is used.
        param_names = list(params) if isinstance(params, Mapping) else None
        query = self.convert_query(query, param_names=param_names)
>       return super().execute(query, params)
E       sqlite3.OperationalError: no such table: auth_user

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/sqlite3/base.py:328: OperationalError

The above exception was the direct cause of the following exception:

db = None

    @pytest.fixture
    def test_user(db): # db fixture ensures DB is available *within* this fixture's scope
        """Creates a standard test user."""
        from django.contrib.auth import get_user_model
        User = get_user_model()
        # Use update_or_create for robustness
>       user, created = User.objects.update_or_create(
            username='testuser',
            defaults={'is_staff': False, 'is_superuser': False}
        )

tests/conftest.py:74: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/manager.py:87: in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:949: in update_or_create
    obj, created = self.select_for_update().get_or_create(defaults, **kwargs)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:916: in get_or_create
    return self.get(**kwargs), False
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:633: in get
    num = len(clone)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:380: in __len__
    self._fetch_all()
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:1881: in _fetch_all
    self._result_cache = list(self._iterable_class(self))
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:91: in __iter__
    results = compiler.execute_sql(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/sql/compiler.py:1562: in execute_sql
    cursor.execute(sql, params)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:67: in execute
    return self._execute_with_wrappers(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:80: in _execute_with_wrappers
    return executor(sql, params, many, context)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:84: in _execute
    with self.db.wrap_database_errors:
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/utils.py:91: in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:89: in _execute
    return self.cursor.execute(sql, params)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <django.db.backends.sqlite3.base.SQLiteCursorWrapper object at 0xfeb7b93d5990>
query = 'SELECT "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."u..._staff", "auth_user"."is_active", "auth_user"."date_joined" FROM "auth_user" WHERE "auth_user"."username" = ? LIMIT 21'
params = ('testuser',)

    def execute(self, query, params=None):
        if params is None:
            return super().execute(query)
        # Extract names if params is a mapping, i.e. "pyformat" style is used.
        param_names = list(params) if isinstance(params, Mapping) else None
        query = self.convert_query(query, param_names=param_names)
>       return super().execute(query, params)
E       django.db.utils.OperationalError: no such table: auth_user

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/sqlite3/base.py:328: OperationalError
_______________________________________________________________________________ ERROR at setup of TestChatCompletionsAPIFailingAsync.test_blueprint_run_exception_streaming_returns_error_sse ________________________________________________________________________________

self = <django.db.backends.utils.CursorWrapper object at 0xfeb7b92e1960>
sql = 'SELECT "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."u...staff", "auth_user"."is_active", "auth_user"."date_joined" FROM "auth_user" WHERE "auth_user"."username" = %s LIMIT 21', params = ('testuser',)
ignored_wrapper_args = (False, {'connection': <DatabaseWrapper vendor='sqlite' alias='default'>, 'cursor': <django.db.backends.utils.CursorWrapper object at 0xfeb7b92e1960>})

    def _execute(self, sql, params, *ignored_wrapper_args):
        self.db.validate_no_broken_transaction()
        with self.db.wrap_database_errors:
            if params is None:
                # params default might be backend specific.
                return self.cursor.execute(sql)
            else:
>               return self.cursor.execute(sql, params)

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:89: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <django.db.backends.sqlite3.base.SQLiteCursorWrapper object at 0xfeb7b93d6710>
query = 'SELECT "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."u..._staff", "auth_user"."is_active", "auth_user"."date_joined" FROM "auth_user" WHERE "auth_user"."username" = ? LIMIT 21'
params = ('testuser',)

    def execute(self, query, params=None):
        if params is None:
            return super().execute(query)
        # Extract names if params is a mapping, i.e. "pyformat" style is used.
        param_names = list(params) if isinstance(params, Mapping) else None
        query = self.convert_query(query, param_names=param_names)
>       return super().execute(query, params)
E       sqlite3.OperationalError: no such table: auth_user

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/sqlite3/base.py:328: OperationalError

The above exception was the direct cause of the following exception:

db = None

    @pytest.fixture
    def test_user(db): # db fixture ensures DB is available *within* this fixture's scope
        """Creates a standard test user."""
        from django.contrib.auth import get_user_model
        User = get_user_model()
        # Use update_or_create for robustness
>       user, created = User.objects.update_or_create(
            username='testuser',
            defaults={'is_staff': False, 'is_superuser': False}
        )

tests/conftest.py:74: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/manager.py:87: in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:949: in update_or_create
    obj, created = self.select_for_update().get_or_create(defaults, **kwargs)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:916: in get_or_create
    return self.get(**kwargs), False
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:633: in get
    num = len(clone)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:380: in __len__
    self._fetch_all()
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:1881: in _fetch_all
    self._result_cache = list(self._iterable_class(self))
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:91: in __iter__
    results = compiler.execute_sql(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/sql/compiler.py:1562: in execute_sql
    cursor.execute(sql, params)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:67: in execute
    return self._execute_with_wrappers(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:80: in _execute_with_wrappers
    return executor(sql, params, many, context)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:84: in _execute
    with self.db.wrap_database_errors:
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/utils.py:91: in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:89: in _execute
    return self.cursor.execute(sql, params)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <django.db.backends.sqlite3.base.SQLiteCursorWrapper object at 0xfeb7b93d6710>
query = 'SELECT "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."u..._staff", "auth_user"."is_active", "auth_user"."date_joined" FROM "auth_user" WHERE "auth_user"."username" = ? LIMIT 21'
params = ('testuser',)

    def execute(self, query, params=None):
        if params is None:
            return super().execute(query)
        # Extract names if params is a mapping, i.e. "pyformat" style is used.
        param_names = list(params) if isinstance(params, Mapping) else None
        query = self.convert_query(query, param_names=param_names)
>       return super().execute(query, params)
E       django.db.utils.OperationalError: no such table: auth_user

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/sqlite3/base.py:328: OperationalError
____________________________________________________________________________________ ERROR at setup of TestChatCompletionsValidationAsync.test_missing_required_field_returns_400[model] _____________________________________________________________________________________

self = <django.db.backends.utils.CursorWrapper object at 0xfeb7b96762f0>
sql = 'SELECT "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."u...staff", "auth_user"."is_active", "auth_user"."date_joined" FROM "auth_user" WHERE "auth_user"."username" = %s LIMIT 21', params = ('testuser',)
ignored_wrapper_args = (False, {'connection': <DatabaseWrapper vendor='sqlite' alias='default'>, 'cursor': <django.db.backends.utils.CursorWrapper object at 0xfeb7b96762f0>})

    def _execute(self, sql, params, *ignored_wrapper_args):
        self.db.validate_no_broken_transaction()
        with self.db.wrap_database_errors:
            if params is None:
                # params default might be backend specific.
                return self.cursor.execute(sql)
            else:
>               return self.cursor.execute(sql, params)

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:89: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <django.db.backends.sqlite3.base.SQLiteCursorWrapper object at 0xfeb7b93d6e60>
query = 'SELECT "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."u..._staff", "auth_user"."is_active", "auth_user"."date_joined" FROM "auth_user" WHERE "auth_user"."username" = ? LIMIT 21'
params = ('testuser',)

    def execute(self, query, params=None):
        if params is None:
            return super().execute(query)
        # Extract names if params is a mapping, i.e. "pyformat" style is used.
        param_names = list(params) if isinstance(params, Mapping) else None
        query = self.convert_query(query, param_names=param_names)
>       return super().execute(query, params)
E       sqlite3.OperationalError: no such table: auth_user

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/sqlite3/base.py:328: OperationalError

The above exception was the direct cause of the following exception:

db = None

    @pytest.fixture
    def test_user(db): # db fixture ensures DB is available *within* this fixture's scope
        """Creates a standard test user."""
        from django.contrib.auth import get_user_model
        User = get_user_model()
        # Use update_or_create for robustness
>       user, created = User.objects.update_or_create(
            username='testuser',
            defaults={'is_staff': False, 'is_superuser': False}
        )

tests/conftest.py:74: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/manager.py:87: in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:949: in update_or_create
    obj, created = self.select_for_update().get_or_create(defaults, **kwargs)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:916: in get_or_create
    return self.get(**kwargs), False
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:633: in get
    num = len(clone)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:380: in __len__
    self._fetch_all()
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:1881: in _fetch_all
    self._result_cache = list(self._iterable_class(self))
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:91: in __iter__
    results = compiler.execute_sql(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/sql/compiler.py:1562: in execute_sql
    cursor.execute(sql, params)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:67: in execute
    return self._execute_with_wrappers(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:80: in _execute_with_wrappers
    return executor(sql, params, many, context)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:84: in _execute
    with self.db.wrap_database_errors:
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/utils.py:91: in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:89: in _execute
    return self.cursor.execute(sql, params)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <django.db.backends.sqlite3.base.SQLiteCursorWrapper object at 0xfeb7b93d6e60>
query = 'SELECT "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."u..._staff", "auth_user"."is_active", "auth_user"."date_joined" FROM "auth_user" WHERE "auth_user"."username" = ? LIMIT 21'
params = ('testuser',)

    def execute(self, query, params=None):
        if params is None:
            return super().execute(query)
        # Extract names if params is a mapping, i.e. "pyformat" style is used.
        param_names = list(params) if isinstance(params, Mapping) else None
        query = self.convert_query(query, param_names=param_names)
>       return super().execute(query, params)
E       django.db.utils.OperationalError: no such table: auth_user

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/sqlite3/base.py:328: OperationalError
___________________________________________________________________________________ ERROR at setup of TestChatCompletionsValidationAsync.test_missing_required_field_returns_400[messages] ___________________________________________________________________________________

self = <django.db.backends.utils.CursorWrapper object at 0xfeb7ba46b220>
sql = 'SELECT "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."u...staff", "auth_user"."is_active", "auth_user"."date_joined" FROM "auth_user" WHERE "auth_user"."username" = %s LIMIT 21', params = ('testuser',)
ignored_wrapper_args = (False, {'connection': <DatabaseWrapper vendor='sqlite' alias='default'>, 'cursor': <django.db.backends.utils.CursorWrapper object at 0xfeb7ba46b220>})

    def _execute(self, sql, params, *ignored_wrapper_args):
        self.db.validate_no_broken_transaction()
        with self.db.wrap_database_errors:
            if params is None:
                # params default might be backend specific.
                return self.cursor.execute(sql)
            else:
>               return self.cursor.execute(sql, params)

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:89: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <django.db.backends.sqlite3.base.SQLiteCursorWrapper object at 0xfeb7b93d76d0>
query = 'SELECT "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."u..._staff", "auth_user"."is_active", "auth_user"."date_joined" FROM "auth_user" WHERE "auth_user"."username" = ? LIMIT 21'
params = ('testuser',)

    def execute(self, query, params=None):
        if params is None:
            return super().execute(query)
        # Extract names if params is a mapping, i.e. "pyformat" style is used.
        param_names = list(params) if isinstance(params, Mapping) else None
        query = self.convert_query(query, param_names=param_names)
>       return super().execute(query, params)
E       sqlite3.OperationalError: no such table: auth_user

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/sqlite3/base.py:328: OperationalError

The above exception was the direct cause of the following exception:

db = None

    @pytest.fixture
    def test_user(db): # db fixture ensures DB is available *within* this fixture's scope
        """Creates a standard test user."""
        from django.contrib.auth import get_user_model
        User = get_user_model()
        # Use update_or_create for robustness
>       user, created = User.objects.update_or_create(
            username='testuser',
            defaults={'is_staff': False, 'is_superuser': False}
        )

tests/conftest.py:74: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/manager.py:87: in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:949: in update_or_create
    obj, created = self.select_for_update().get_or_create(defaults, **kwargs)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:916: in get_or_create
    return self.get(**kwargs), False
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:633: in get
    num = len(clone)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:380: in __len__
    self._fetch_all()
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:1881: in _fetch_all
    self._result_cache = list(self._iterable_class(self))
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:91: in __iter__
    results = compiler.execute_sql(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/sql/compiler.py:1562: in execute_sql
    cursor.execute(sql, params)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:67: in execute
    return self._execute_with_wrappers(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:80: in _execute_with_wrappers
    return executor(sql, params, many, context)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:84: in _execute
    with self.db.wrap_database_errors:
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/utils.py:91: in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:89: in _execute
    return self.cursor.execute(sql, params)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <django.db.backends.sqlite3.base.SQLiteCursorWrapper object at 0xfeb7b93d76d0>
query = 'SELECT "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."u..._staff", "auth_user"."is_active", "auth_user"."date_joined" FROM "auth_user" WHERE "auth_user"."username" = ? LIMIT 21'
params = ('testuser',)

    def execute(self, query, params=None):
        if params is None:
            return super().execute(query)
        # Extract names if params is a mapping, i.e. "pyformat" style is used.
        param_names = list(params) if isinstance(params, Mapping) else None
        query = self.convert_query(query, param_names=param_names)
>       return super().execute(query, params)
E       django.db.utils.OperationalError: no such table: auth_user

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/sqlite3/base.py:328: OperationalError
________________________________________________________ ERROR at setup of TestChatCompletionsValidationAsync.test_invalid_field_type_or_content_returns_400[invalid_data0-Ensure this field has at least 1 elements] ________________________________________________________

self = <django.db.backends.utils.CursorWrapper object at 0xfeb7b9991c00>
sql = 'SELECT "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."u...staff", "auth_user"."is_active", "auth_user"."date_joined" FROM "auth_user" WHERE "auth_user"."username" = %s LIMIT 21', params = ('testuser',)
ignored_wrapper_args = (False, {'connection': <DatabaseWrapper vendor='sqlite' alias='default'>, 'cursor': <django.db.backends.utils.CursorWrapper object at 0xfeb7b9991c00>})

    def _execute(self, sql, params, *ignored_wrapper_args):
        self.db.validate_no_broken_transaction()
        with self.db.wrap_database_errors:
            if params is None:
                # params default might be backend specific.
                return self.cursor.execute(sql)
            else:
>               return self.cursor.execute(sql, params)

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:89: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <django.db.backends.sqlite3.base.SQLiteCursorWrapper object at 0xfeb7b93d7ac0>
query = 'SELECT "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."u..._staff", "auth_user"."is_active", "auth_user"."date_joined" FROM "auth_user" WHERE "auth_user"."username" = ? LIMIT 21'
params = ('testuser',)

    def execute(self, query, params=None):
        if params is None:
            return super().execute(query)
        # Extract names if params is a mapping, i.e. "pyformat" style is used.
        param_names = list(params) if isinstance(params, Mapping) else None
        query = self.convert_query(query, param_names=param_names)
>       return super().execute(query, params)
E       sqlite3.OperationalError: no such table: auth_user

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/sqlite3/base.py:328: OperationalError

The above exception was the direct cause of the following exception:

db = None

    @pytest.fixture
    def test_user(db): # db fixture ensures DB is available *within* this fixture's scope
        """Creates a standard test user."""
        from django.contrib.auth import get_user_model
        User = get_user_model()
        # Use update_or_create for robustness
>       user, created = User.objects.update_or_create(
            username='testuser',
            defaults={'is_staff': False, 'is_superuser': False}
        )

tests/conftest.py:74: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/manager.py:87: in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:949: in update_or_create
    obj, created = self.select_for_update().get_or_create(defaults, **kwargs)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:916: in get_or_create
    return self.get(**kwargs), False
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:633: in get
    num = len(clone)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:380: in __len__
    self._fetch_all()
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:1881: in _fetch_all
    self._result_cache = list(self._iterable_class(self))
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:91: in __iter__
    results = compiler.execute_sql(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/sql/compiler.py:1562: in execute_sql
    cursor.execute(sql, params)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:67: in execute
    return self._execute_with_wrappers(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:80: in _execute_with_wrappers
    return executor(sql, params, many, context)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:84: in _execute
    with self.db.wrap_database_errors:
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/utils.py:91: in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:89: in _execute
    return self.cursor.execute(sql, params)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <django.db.backends.sqlite3.base.SQLiteCursorWrapper object at 0xfeb7b93d7ac0>
query = 'SELECT "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."u..._staff", "auth_user"."is_active", "auth_user"."date_joined" FROM "auth_user" WHERE "auth_user"."username" = ? LIMIT 21'
params = ('testuser',)

    def execute(self, query, params=None):
        if params is None:
            return super().execute(query)
        # Extract names if params is a mapping, i.e. "pyformat" style is used.
        param_names = list(params) if isinstance(params, Mapping) else None
        query = self.convert_query(query, param_names=param_names)
>       return super().execute(query, params)
E       django.db.utils.OperationalError: no such table: auth_user

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/sqlite3/base.py:328: OperationalError
________________________________________________________________ ERROR at setup of TestChatCompletionsValidationAsync.test_invalid_field_type_or_content_returns_400[invalid_data1-Expected a list of items] _________________________________________________________________

self = <django.db.backends.utils.CursorWrapper object at 0xfeb7ba5e1f90>
sql = 'SELECT "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."u...staff", "auth_user"."is_active", "auth_user"."date_joined" FROM "auth_user" WHERE "auth_user"."username" = %s LIMIT 21', params = ('testuser',)
ignored_wrapper_args = (False, {'connection': <DatabaseWrapper vendor='sqlite' alias='default'>, 'cursor': <django.db.backends.utils.CursorWrapper object at 0xfeb7ba5e1f90>})

    def _execute(self, sql, params, *ignored_wrapper_args):
        self.db.validate_no_broken_transaction()
        with self.db.wrap_database_errors:
            if params is None:
                # params default might be backend specific.
                return self.cursor.execute(sql)
            else:
>               return self.cursor.execute(sql, params)

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:89: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <django.db.backends.sqlite3.base.SQLiteCursorWrapper object at 0xfeb7b93d7880>
query = 'SELECT "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."u..._staff", "auth_user"."is_active", "auth_user"."date_joined" FROM "auth_user" WHERE "auth_user"."username" = ? LIMIT 21'
params = ('testuser',)

    def execute(self, query, params=None):
        if params is None:
            return super().execute(query)
        # Extract names if params is a mapping, i.e. "pyformat" style is used.
        param_names = list(params) if isinstance(params, Mapping) else None
        query = self.convert_query(query, param_names=param_names)
>       return super().execute(query, params)
E       sqlite3.OperationalError: no such table: auth_user

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/sqlite3/base.py:328: OperationalError

The above exception was the direct cause of the following exception:

db = None

    @pytest.fixture
    def test_user(db): # db fixture ensures DB is available *within* this fixture's scope
        """Creates a standard test user."""
        from django.contrib.auth import get_user_model
        User = get_user_model()
        # Use update_or_create for robustness
>       user, created = User.objects.update_or_create(
            username='testuser',
            defaults={'is_staff': False, 'is_superuser': False}
        )

tests/conftest.py:74: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/manager.py:87: in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:949: in update_or_create
    obj, created = self.select_for_update().get_or_create(defaults, **kwargs)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:916: in get_or_create
    return self.get(**kwargs), False
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:633: in get
    num = len(clone)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:380: in __len__
    self._fetch_all()
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:1881: in _fetch_all
    self._result_cache = list(self._iterable_class(self))
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:91: in __iter__
    results = compiler.execute_sql(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/sql/compiler.py:1562: in execute_sql
    cursor.execute(sql, params)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:67: in execute
    return self._execute_with_wrappers(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:80: in _execute_with_wrappers
    return executor(sql, params, many, context)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:84: in _execute
    with self.db.wrap_database_errors:
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/utils.py:91: in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:89: in _execute
    return self.cursor.execute(sql, params)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <django.db.backends.sqlite3.base.SQLiteCursorWrapper object at 0xfeb7b93d7880>
query = 'SELECT "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."u..._staff", "auth_user"."is_active", "auth_user"."date_joined" FROM "auth_user" WHERE "auth_user"."username" = ? LIMIT 21'
params = ('testuser',)

    def execute(self, query, params=None):
        if params is None:
            return super().execute(query)
        # Extract names if params is a mapping, i.e. "pyformat" style is used.
        param_names = list(params) if isinstance(params, Mapping) else None
        query = self.convert_query(query, param_names=param_names)
>       return super().execute(query, params)
E       django.db.utils.OperationalError: no such table: auth_user

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/sqlite3/base.py:328: OperationalError
_________________________________________________________________ ERROR at setup of TestChatCompletionsValidationAsync.test_invalid_field_type_or_content_returns_400[invalid_data2-This field is required.] _________________________________________________________________

self = <django.db.backends.utils.CursorWrapper object at 0xfeb7b9a1a470>
sql = 'SELECT "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."u...staff", "auth_user"."is_active", "auth_user"."date_joined" FROM "auth_user" WHERE "auth_user"."username" = %s LIMIT 21', params = ('testuser',)
ignored_wrapper_args = (False, {'connection': <DatabaseWrapper vendor='sqlite' alias='default'>, 'cursor': <django.db.backends.utils.CursorWrapper object at 0xfeb7b9a1a470>})

    def _execute(self, sql, params, *ignored_wrapper_args):
        self.db.validate_no_broken_transaction()
        with self.db.wrap_database_errors:
            if params is None:
                # params default might be backend specific.
                return self.cursor.execute(sql)
            else:
>               return self.cursor.execute(sql, params)

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:89: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <django.db.backends.sqlite3.base.SQLiteCursorWrapper object at 0xfeb7b93d5510>
query = 'SELECT "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."u..._staff", "auth_user"."is_active", "auth_user"."date_joined" FROM "auth_user" WHERE "auth_user"."username" = ? LIMIT 21'
params = ('testuser',)

    def execute(self, query, params=None):
        if params is None:
            return super().execute(query)
        # Extract names if params is a mapping, i.e. "pyformat" style is used.
        param_names = list(params) if isinstance(params, Mapping) else None
        query = self.convert_query(query, param_names=param_names)
>       return super().execute(query, params)
E       sqlite3.OperationalError: no such table: auth_user

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/sqlite3/base.py:328: OperationalError

The above exception was the direct cause of the following exception:

db = None

    @pytest.fixture
    def test_user(db): # db fixture ensures DB is available *within* this fixture's scope
        """Creates a standard test user."""
        from django.contrib.auth import get_user_model
        User = get_user_model()
        # Use update_or_create for robustness
>       user, created = User.objects.update_or_create(
            username='testuser',
            defaults={'is_staff': False, 'is_superuser': False}
        )

tests/conftest.py:74: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/manager.py:87: in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:949: in update_or_create
    obj, created = self.select_for_update().get_or_create(defaults, **kwargs)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:916: in get_or_create
    return self.get(**kwargs), False
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:633: in get
    num = len(clone)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:380: in __len__
    self._fetch_all()
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:1881: in _fetch_all
    self._result_cache = list(self._iterable_class(self))
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:91: in __iter__
    results = compiler.execute_sql(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/sql/compiler.py:1562: in execute_sql
    cursor.execute(sql, params)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:67: in execute
    return self._execute_with_wrappers(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:80: in _execute_with_wrappers
    return executor(sql, params, many, context)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:84: in _execute
    with self.db.wrap_database_errors:
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/utils.py:91: in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:89: in _execute
    return self.cursor.execute(sql, params)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <django.db.backends.sqlite3.base.SQLiteCursorWrapper object at 0xfeb7b93d5510>
query = 'SELECT "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."u..._staff", "auth_user"."is_active", "auth_user"."date_joined" FROM "auth_user" WHERE "auth_user"."username" = ? LIMIT 21'
params = ('testuser',)

    def execute(self, query, params=None):
        if params is None:
            return super().execute(query)
        # Extract names if params is a mapping, i.e. "pyformat" style is used.
        param_names = list(params) if isinstance(params, Mapping) else None
        query = self.convert_query(query, param_names=param_names)
>       return super().execute(query, params)
E       django.db.utils.OperationalError: no such table: auth_user

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/sqlite3/base.py:328: OperationalError
_________________________________________________________________ ERROR at setup of TestChatCompletionsValidationAsync.test_invalid_field_type_or_content_returns_400[invalid_data3-This field is required.] _________________________________________________________________

self = <django.db.backends.utils.CursorWrapper object at 0xfeb7b9940f70>
sql = 'SELECT "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."u...staff", "auth_user"."is_active", "auth_user"."date_joined" FROM "auth_user" WHERE "auth_user"."username" = %s LIMIT 21', params = ('testuser',)
ignored_wrapper_args = (False, {'connection': <DatabaseWrapper vendor='sqlite' alias='default'>, 'cursor': <django.db.backends.utils.CursorWrapper object at 0xfeb7b9940f70>})

    def _execute(self, sql, params, *ignored_wrapper_args):
        self.db.validate_no_broken_transaction()
        with self.db.wrap_database_errors:
            if params is None:
                # params default might be backend specific.
                return self.cursor.execute(sql)
            else:
>               return self.cursor.execute(sql, params)

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:89: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <django.db.backends.sqlite3.base.SQLiteCursorWrapper object at 0xfeb7b93d6680>
query = 'SELECT "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."u..._staff", "auth_user"."is_active", "auth_user"."date_joined" FROM "auth_user" WHERE "auth_user"."username" = ? LIMIT 21'
params = ('testuser',)

    def execute(self, query, params=None):
        if params is None:
            return super().execute(query)
        # Extract names if params is a mapping, i.e. "pyformat" style is used.
        param_names = list(params) if isinstance(params, Mapping) else None
        query = self.convert_query(query, param_names=param_names)
>       return super().execute(query, params)
E       sqlite3.OperationalError: no such table: auth_user

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/sqlite3/base.py:328: OperationalError

The above exception was the direct cause of the following exception:

db = None

    @pytest.fixture
    def test_user(db): # db fixture ensures DB is available *within* this fixture's scope
        """Creates a standard test user."""
        from django.contrib.auth import get_user_model
        User = get_user_model()
        # Use update_or_create for robustness
>       user, created = User.objects.update_or_create(
            username='testuser',
            defaults={'is_staff': False, 'is_superuser': False}
        )

tests/conftest.py:74: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/manager.py:87: in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:949: in update_or_create
    obj, created = self.select_for_update().get_or_create(defaults, **kwargs)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:916: in get_or_create
    return self.get(**kwargs), False
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:633: in get
    num = len(clone)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:380: in __len__
    self._fetch_all()
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:1881: in _fetch_all
    self._result_cache = list(self._iterable_class(self))
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:91: in __iter__
    results = compiler.execute_sql(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/sql/compiler.py:1562: in execute_sql
    cursor.execute(sql, params)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:67: in execute
    return self._execute_with_wrappers(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:80: in _execute_with_wrappers
    return executor(sql, params, many, context)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:84: in _execute
    with self.db.wrap_database_errors:
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/utils.py:91: in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:89: in _execute
    return self.cursor.execute(sql, params)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <django.db.backends.sqlite3.base.SQLiteCursorWrapper object at 0xfeb7b93d6680>
query = 'SELECT "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."u..._staff", "auth_user"."is_active", "auth_user"."date_joined" FROM "auth_user" WHERE "auth_user"."username" = ? LIMIT 21'
params = ('testuser',)

    def execute(self, query, params=None):
        if params is None:
            return super().execute(query)
        # Extract names if params is a mapping, i.e. "pyformat" style is used.
        param_names = list(params) if isinstance(params, Mapping) else None
        query = self.convert_query(query, param_names=param_names)
>       return super().execute(query, params)
E       django.db.utils.OperationalError: no such table: auth_user

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/sqlite3/base.py:328: OperationalError
_____________________________________________________________ ERROR at setup of TestChatCompletionsValidationAsync.test_invalid_field_type_or_content_returns_400[invalid_data4-invalid" is not a valid choice] ______________________________________________________________

self = <django.db.backends.utils.CursorWrapper object at 0xfeb7b98ad090>
sql = 'SELECT "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."u...staff", "auth_user"."is_active", "auth_user"."date_joined" FROM "auth_user" WHERE "auth_user"."username" = %s LIMIT 21', params = ('testuser',)
ignored_wrapper_args = (False, {'connection': <DatabaseWrapper vendor='sqlite' alias='default'>, 'cursor': <django.db.backends.utils.CursorWrapper object at 0xfeb7b98ad090>})

    def _execute(self, sql, params, *ignored_wrapper_args):
        self.db.validate_no_broken_transaction()
        with self.db.wrap_database_errors:
            if params is None:
                # params default might be backend specific.
                return self.cursor.execute(sql)
            else:
>               return self.cursor.execute(sql, params)

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:89: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <django.db.backends.sqlite3.base.SQLiteCursorWrapper object at 0xfeb7b93d7010>
query = 'SELECT "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."u..._staff", "auth_user"."is_active", "auth_user"."date_joined" FROM "auth_user" WHERE "auth_user"."username" = ? LIMIT 21'
params = ('testuser',)

    def execute(self, query, params=None):
        if params is None:
            return super().execute(query)
        # Extract names if params is a mapping, i.e. "pyformat" style is used.
        param_names = list(params) if isinstance(params, Mapping) else None
        query = self.convert_query(query, param_names=param_names)
>       return super().execute(query, params)
E       sqlite3.OperationalError: no such table: auth_user

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/sqlite3/base.py:328: OperationalError

The above exception was the direct cause of the following exception:

db = None

    @pytest.fixture
    def test_user(db): # db fixture ensures DB is available *within* this fixture's scope
        """Creates a standard test user."""
        from django.contrib.auth import get_user_model
        User = get_user_model()
        # Use update_or_create for robustness
>       user, created = User.objects.update_or_create(
            username='testuser',
            defaults={'is_staff': False, 'is_superuser': False}
        )

tests/conftest.py:74: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/manager.py:87: in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:949: in update_or_create
    obj, created = self.select_for_update().get_or_create(defaults, **kwargs)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:916: in get_or_create
    return self.get(**kwargs), False
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:633: in get
    num = len(clone)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:380: in __len__
    self._fetch_all()
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:1881: in _fetch_all
    self._result_cache = list(self._iterable_class(self))
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:91: in __iter__
    results = compiler.execute_sql(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/sql/compiler.py:1562: in execute_sql
    cursor.execute(sql, params)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:67: in execute
    return self._execute_with_wrappers(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:80: in _execute_with_wrappers
    return executor(sql, params, many, context)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:84: in _execute
    with self.db.wrap_database_errors:
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/utils.py:91: in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:89: in _execute
    return self.cursor.execute(sql, params)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <django.db.backends.sqlite3.base.SQLiteCursorWrapper object at 0xfeb7b93d7010>
query = 'SELECT "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."u..._staff", "auth_user"."is_active", "auth_user"."date_joined" FROM "auth_user" WHERE "auth_user"."username" = ? LIMIT 21'
params = ('testuser',)

    def execute(self, query, params=None):
        if params is None:
            return super().execute(query)
        # Extract names if params is a mapping, i.e. "pyformat" style is used.
        param_names = list(params) if isinstance(params, Mapping) else None
        query = self.convert_query(query, param_names=param_names)
>       return super().execute(query, params)
E       django.db.utils.OperationalError: no such table: auth_user

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/sqlite3/base.py:328: OperationalError
____________________________________________________________ ERROR at setup of TestChatCompletionsValidationAsync.test_invalid_field_type_or_content_returns_400[invalid_data5-Content must be a string or null.] ____________________________________________________________

self = <django.db.backends.utils.CursorWrapper object at 0xfeb7b9648ca0>
sql = 'SELECT "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."u...staff", "auth_user"."is_active", "auth_user"."date_joined" FROM "auth_user" WHERE "auth_user"."username" = %s LIMIT 21', params = ('testuser',)
ignored_wrapper_args = (False, {'connection': <DatabaseWrapper vendor='sqlite' alias='default'>, 'cursor': <django.db.backends.utils.CursorWrapper object at 0xfeb7b9648ca0>})

    def _execute(self, sql, params, *ignored_wrapper_args):
        self.db.validate_no_broken_transaction()
        with self.db.wrap_database_errors:
            if params is None:
                # params default might be backend specific.
                return self.cursor.execute(sql)
            else:
>               return self.cursor.execute(sql, params)

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:89: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <django.db.backends.sqlite3.base.SQLiteCursorWrapper object at 0xfeb7b93d7490>
query = 'SELECT "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."u..._staff", "auth_user"."is_active", "auth_user"."date_joined" FROM "auth_user" WHERE "auth_user"."username" = ? LIMIT 21'
params = ('testuser',)

    def execute(self, query, params=None):
        if params is None:
            return super().execute(query)
        # Extract names if params is a mapping, i.e. "pyformat" style is used.
        param_names = list(params) if isinstance(params, Mapping) else None
        query = self.convert_query(query, param_names=param_names)
>       return super().execute(query, params)
E       sqlite3.OperationalError: no such table: auth_user

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/sqlite3/base.py:328: OperationalError

The above exception was the direct cause of the following exception:

db = None

    @pytest.fixture
    def test_user(db): # db fixture ensures DB is available *within* this fixture's scope
        """Creates a standard test user."""
        from django.contrib.auth import get_user_model
        User = get_user_model()
        # Use update_or_create for robustness
>       user, created = User.objects.update_or_create(
            username='testuser',
            defaults={'is_staff': False, 'is_superuser': False}
        )

tests/conftest.py:74: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/manager.py:87: in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:949: in update_or_create
    obj, created = self.select_for_update().get_or_create(defaults, **kwargs)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:916: in get_or_create
    return self.get(**kwargs), False
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:633: in get
    num = len(clone)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:380: in __len__
    self._fetch_all()
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:1881: in _fetch_all
    self._result_cache = list(self._iterable_class(self))
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:91: in __iter__
    results = compiler.execute_sql(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/sql/compiler.py:1562: in execute_sql
    cursor.execute(sql, params)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:67: in execute
    return self._execute_with_wrappers(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:80: in _execute_with_wrappers
    return executor(sql, params, many, context)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:84: in _execute
    with self.db.wrap_database_errors:
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/utils.py:91: in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:89: in _execute
    return self.cursor.execute(sql, params)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <django.db.backends.sqlite3.base.SQLiteCursorWrapper object at 0xfeb7b93d7490>
query = 'SELECT "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."u..._staff", "auth_user"."is_active", "auth_user"."date_joined" FROM "auth_user" WHERE "auth_user"."username" = ? LIMIT 21'
params = ('testuser',)

    def execute(self, query, params=None):
        if params is None:
            return super().execute(query)
        # Extract names if params is a mapping, i.e. "pyformat" style is used.
        param_names = list(params) if isinstance(params, Mapping) else None
        query = self.convert_query(query, param_names=param_names)
>       return super().execute(query, params)
E       django.db.utils.OperationalError: no such table: auth_user

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/sqlite3/base.py:328: OperationalError
____________________________________________________________________________________________ ERROR at setup of TestChatCompletionsValidationAsync.test_malformed_json_returns_400 ____________________________________________________________________________________________

self = <django.db.backends.utils.CursorWrapper object at 0xfeb7bae16200>
sql = 'SELECT "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."u...staff", "auth_user"."is_active", "auth_user"."date_joined" FROM "auth_user" WHERE "auth_user"."username" = %s LIMIT 21', params = ('testuser',)
ignored_wrapper_args = (False, {'connection': <DatabaseWrapper vendor='sqlite' alias='default'>, 'cursor': <django.db.backends.utils.CursorWrapper object at 0xfeb7bae16200>})

    def _execute(self, sql, params, *ignored_wrapper_args):
        self.db.validate_no_broken_transaction()
        with self.db.wrap_database_errors:
            if params is None:
                # params default might be backend specific.
                return self.cursor.execute(sql)
            else:
>               return self.cursor.execute(sql, params)

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:89: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <django.db.backends.sqlite3.base.SQLiteCursorWrapper object at 0xfeb7b953b7f0>
query = 'SELECT "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."u..._staff", "auth_user"."is_active", "auth_user"."date_joined" FROM "auth_user" WHERE "auth_user"."username" = ? LIMIT 21'
params = ('testuser',)

    def execute(self, query, params=None):
        if params is None:
            return super().execute(query)
        # Extract names if params is a mapping, i.e. "pyformat" style is used.
        param_names = list(params) if isinstance(params, Mapping) else None
        query = self.convert_query(query, param_names=param_names)
>       return super().execute(query, params)
E       sqlite3.OperationalError: no such table: auth_user

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/sqlite3/base.py:328: OperationalError

The above exception was the direct cause of the following exception:

db = None

    @pytest.fixture
    def test_user(db): # db fixture ensures DB is available *within* this fixture's scope
        """Creates a standard test user."""
        from django.contrib.auth import get_user_model
        User = get_user_model()
        # Use update_or_create for robustness
>       user, created = User.objects.update_or_create(
            username='testuser',
            defaults={'is_staff': False, 'is_superuser': False}
        )

tests/conftest.py:74: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/manager.py:87: in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:949: in update_or_create
    obj, created = self.select_for_update().get_or_create(defaults, **kwargs)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:916: in get_or_create
    return self.get(**kwargs), False
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:633: in get
    num = len(clone)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:380: in __len__
    self._fetch_all()
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:1881: in _fetch_all
    self._result_cache = list(self._iterable_class(self))
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:91: in __iter__
    results = compiler.execute_sql(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/sql/compiler.py:1562: in execute_sql
    cursor.execute(sql, params)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:67: in execute
    return self._execute_with_wrappers(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:80: in _execute_with_wrappers
    return executor(sql, params, many, context)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:84: in _execute
    with self.db.wrap_database_errors:
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/utils.py:91: in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:89: in _execute
    return self.cursor.execute(sql, params)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <django.db.backends.sqlite3.base.SQLiteCursorWrapper object at 0xfeb7b953b7f0>
query = 'SELECT "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."u..._staff", "auth_user"."is_active", "auth_user"."date_joined" FROM "auth_user" WHERE "auth_user"."username" = ? LIMIT 21'
params = ('testuser',)

    def execute(self, query, params=None):
        if params is None:
            return super().execute(query)
        # Extract names if params is a mapping, i.e. "pyformat" style is used.
        param_names = list(params) if isinstance(params, Mapping) else None
        query = self.convert_query(query, param_names=param_names)
>       return super().execute(query, params)
E       django.db.utils.OperationalError: no such table: auth_user

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/sqlite3/base.py:328: OperationalError
_______________________________________________________________________________________ ERROR at setup of TestChatCompletionsValidationAsync.test_nonexistent_model_permission_denied ________________________________________________________________________________________

self = <django.db.backends.utils.CursorWrapper object at 0xfeb7b901dff0>
sql = 'SELECT "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."u...staff", "auth_user"."is_active", "auth_user"."date_joined" FROM "auth_user" WHERE "auth_user"."username" = %s LIMIT 21', params = ('testuser',)
ignored_wrapper_args = (False, {'connection': <DatabaseWrapper vendor='sqlite' alias='default'>, 'cursor': <django.db.backends.utils.CursorWrapper object at 0xfeb7b901dff0>})

    def _execute(self, sql, params, *ignored_wrapper_args):
        self.db.validate_no_broken_transaction()
        with self.db.wrap_database_errors:
            if params is None:
                # params default might be backend specific.
                return self.cursor.execute(sql)
            else:
>               return self.cursor.execute(sql, params)

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:89: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <django.db.backends.sqlite3.base.SQLiteCursorWrapper object at 0xfeb7b953beb0>
query = 'SELECT "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."u..._staff", "auth_user"."is_active", "auth_user"."date_joined" FROM "auth_user" WHERE "auth_user"."username" = ? LIMIT 21'
params = ('testuser',)

    def execute(self, query, params=None):
        if params is None:
            return super().execute(query)
        # Extract names if params is a mapping, i.e. "pyformat" style is used.
        param_names = list(params) if isinstance(params, Mapping) else None
        query = self.convert_query(query, param_names=param_names)
>       return super().execute(query, params)
E       sqlite3.OperationalError: no such table: auth_user

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/sqlite3/base.py:328: OperationalError

The above exception was the direct cause of the following exception:

db = None

    @pytest.fixture
    def test_user(db): # db fixture ensures DB is available *within* this fixture's scope
        """Creates a standard test user."""
        from django.contrib.auth import get_user_model
        User = get_user_model()
        # Use update_or_create for robustness
>       user, created = User.objects.update_or_create(
            username='testuser',
            defaults={'is_staff': False, 'is_superuser': False}
        )

tests/conftest.py:74: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/manager.py:87: in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:949: in update_or_create
    obj, created = self.select_for_update().get_or_create(defaults, **kwargs)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:916: in get_or_create
    return self.get(**kwargs), False
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:633: in get
    num = len(clone)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:380: in __len__
    self._fetch_all()
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:1881: in _fetch_all
    self._result_cache = list(self._iterable_class(self))
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:91: in __iter__
    results = compiler.execute_sql(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/sql/compiler.py:1562: in execute_sql
    cursor.execute(sql, params)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:67: in execute
    return self._execute_with_wrappers(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:80: in _execute_with_wrappers
    return executor(sql, params, many, context)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:84: in _execute
    with self.db.wrap_database_errors:
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/utils.py:91: in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:89: in _execute
    return self.cursor.execute(sql, params)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <django.db.backends.sqlite3.base.SQLiteCursorWrapper object at 0xfeb7b953beb0>
query = 'SELECT "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."u..._staff", "auth_user"."is_active", "auth_user"."date_joined" FROM "auth_user" WHERE "auth_user"."username" = ? LIMIT 21'
params = ('testuser',)

    def execute(self, query, params=None):
        if params is None:
            return super().execute(query)
        # Extract names if params is a mapping, i.e. "pyformat" style is used.
        param_names = list(params) if isinstance(params, Mapping) else None
        query = self.convert_query(query, param_names=param_names)
>       return super().execute(query, params)
E       django.db.utils.OperationalError: no such table: auth_user

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/sqlite3/base.py:328: OperationalError
___________________________________________________________________________________________ ERROR at setup of TestChatCompletionsValidationAsync.test_nonexistent_model_not_found ____________________________________________________________________________________________

self = <django.db.backends.utils.CursorWrapper object at 0xfeb7b91a92a0>
sql = 'SELECT "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."u...staff", "auth_user"."is_active", "auth_user"."date_joined" FROM "auth_user" WHERE "auth_user"."username" = %s LIMIT 21', params = ('testuser',)
ignored_wrapper_args = (False, {'connection': <DatabaseWrapper vendor='sqlite' alias='default'>, 'cursor': <django.db.backends.utils.CursorWrapper object at 0xfeb7b91a92a0>})

    def _execute(self, sql, params, *ignored_wrapper_args):
        self.db.validate_no_broken_transaction()
        with self.db.wrap_database_errors:
            if params is None:
                # params default might be backend specific.
                return self.cursor.execute(sql)
            else:
>               return self.cursor.execute(sql, params)

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:89: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <django.db.backends.sqlite3.base.SQLiteCursorWrapper object at 0xfeb7b95383a0>
query = 'SELECT "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."u..._staff", "auth_user"."is_active", "auth_user"."date_joined" FROM "auth_user" WHERE "auth_user"."username" = ? LIMIT 21'
params = ('testuser',)

    def execute(self, query, params=None):
        if params is None:
            return super().execute(query)
        # Extract names if params is a mapping, i.e. "pyformat" style is used.
        param_names = list(params) if isinstance(params, Mapping) else None
        query = self.convert_query(query, param_names=param_names)
>       return super().execute(query, params)
E       sqlite3.OperationalError: no such table: auth_user

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/sqlite3/base.py:328: OperationalError

The above exception was the direct cause of the following exception:

db = None

    @pytest.fixture
    def test_user(db): # db fixture ensures DB is available *within* this fixture's scope
        """Creates a standard test user."""
        from django.contrib.auth import get_user_model
        User = get_user_model()
        # Use update_or_create for robustness
>       user, created = User.objects.update_or_create(
            username='testuser',
            defaults={'is_staff': False, 'is_superuser': False}
        )

tests/conftest.py:74: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/manager.py:87: in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:949: in update_or_create
    obj, created = self.select_for_update().get_or_create(defaults, **kwargs)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:916: in get_or_create
    return self.get(**kwargs), False
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:633: in get
    num = len(clone)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:380: in __len__
    self._fetch_all()
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:1881: in _fetch_all
    self._result_cache = list(self._iterable_class(self))
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:91: in __iter__
    results = compiler.execute_sql(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/sql/compiler.py:1562: in execute_sql
    cursor.execute(sql, params)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:67: in execute
    return self._execute_with_wrappers(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:80: in _execute_with_wrappers
    return executor(sql, params, many, context)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:84: in _execute
    with self.db.wrap_database_errors:
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/utils.py:91: in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:89: in _execute
    return self.cursor.execute(sql, params)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <django.db.backends.sqlite3.base.SQLiteCursorWrapper object at 0xfeb7b95383a0>
query = 'SELECT "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."u..._staff", "auth_user"."is_active", "auth_user"."date_joined" FROM "auth_user" WHERE "auth_user"."username" = ? LIMIT 21'
params = ('testuser',)

    def execute(self, query, params=None):
        if params is None:
            return super().execute(query)
        # Extract names if params is a mapping, i.e. "pyformat" style is used.
        param_names = list(params) if isinstance(params, Mapping) else None
        query = self.convert_query(query, param_names=param_names)
>       return super().execute(query, params)
E       django.db.utils.OperationalError: no such table: auth_user

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/sqlite3/base.py:328: OperationalError
_________________________________________________________________________________________ ERROR at setup of TestChatCompletionsValidationAsync.test_blueprint_init_error_returns_500 _________________________________________________________________________________________

self = <django.db.backends.utils.CursorWrapper object at 0xfeb7b91fe260>
sql = 'SELECT "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."u...staff", "auth_user"."is_active", "auth_user"."date_joined" FROM "auth_user" WHERE "auth_user"."username" = %s LIMIT 21', params = ('testuser',)
ignored_wrapper_args = (False, {'connection': <DatabaseWrapper vendor='sqlite' alias='default'>, 'cursor': <django.db.backends.utils.CursorWrapper object at 0xfeb7b91fe260>})

    def _execute(self, sql, params, *ignored_wrapper_args):
        self.db.validate_no_broken_transaction()
        with self.db.wrap_database_errors:
            if params is None:
                # params default might be backend specific.
                return self.cursor.execute(sql)
            else:
>               return self.cursor.execute(sql, params)

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:89: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <django.db.backends.sqlite3.base.SQLiteCursorWrapper object at 0xfeb7b953b1c0>
query = 'SELECT "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."u..._staff", "auth_user"."is_active", "auth_user"."date_joined" FROM "auth_user" WHERE "auth_user"."username" = ? LIMIT 21'
params = ('testuser',)

    def execute(self, query, params=None):
        if params is None:
            return super().execute(query)
        # Extract names if params is a mapping, i.e. "pyformat" style is used.
        param_names = list(params) if isinstance(params, Mapping) else None
        query = self.convert_query(query, param_names=param_names)
>       return super().execute(query, params)
E       sqlite3.OperationalError: no such table: auth_user

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/sqlite3/base.py:328: OperationalError

The above exception was the direct cause of the following exception:

db = None

    @pytest.fixture
    def test_user(db): # db fixture ensures DB is available *within* this fixture's scope
        """Creates a standard test user."""
        from django.contrib.auth import get_user_model
        User = get_user_model()
        # Use update_or_create for robustness
>       user, created = User.objects.update_or_create(
            username='testuser',
            defaults={'is_staff': False, 'is_superuser': False}
        )

tests/conftest.py:74: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/manager.py:87: in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:949: in update_or_create
    obj, created = self.select_for_update().get_or_create(defaults, **kwargs)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:916: in get_or_create
    return self.get(**kwargs), False
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:633: in get
    num = len(clone)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:380: in __len__
    self._fetch_all()
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:1881: in _fetch_all
    self._result_cache = list(self._iterable_class(self))
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:91: in __iter__
    results = compiler.execute_sql(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/sql/compiler.py:1562: in execute_sql
    cursor.execute(sql, params)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:67: in execute
    return self._execute_with_wrappers(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:80: in _execute_with_wrappers
    return executor(sql, params, many, context)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:84: in _execute
    with self.db.wrap_database_errors:
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/utils.py:91: in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:89: in _execute
    return self.cursor.execute(sql, params)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <django.db.backends.sqlite3.base.SQLiteCursorWrapper object at 0xfeb7b953b1c0>
query = 'SELECT "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."u..._staff", "auth_user"."is_active", "auth_user"."date_joined" FROM "auth_user" WHERE "auth_user"."username" = ? LIMIT 21'
params = ('testuser',)

    def execute(self, query, params=None):
        if params is None:
            return super().execute(query)
        # Extract names if params is a mapping, i.e. "pyformat" style is used.
        param_names = list(params) if isinstance(params, Mapping) else None
        query = self.convert_query(query, param_names=param_names)
>       return super().execute(query, params)
E       django.db.utils.OperationalError: no such table: auth_user

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/sqlite3/base.py:328: OperationalError
________________________________________________________________________________ ERROR at setup of TestChatCompletionsValidationAsync.test_blueprint_run_exception_non_streaming_returns_500 _________________________________________________________________________________

self = <django.db.backends.utils.CursorWrapper object at 0xfeb7b99d7d30>
sql = 'SELECT "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."u...staff", "auth_user"."is_active", "auth_user"."date_joined" FROM "auth_user" WHERE "auth_user"."username" = %s LIMIT 21', params = ('testuser',)
ignored_wrapper_args = (False, {'connection': <DatabaseWrapper vendor='sqlite' alias='default'>, 'cursor': <django.db.backends.utils.CursorWrapper object at 0xfeb7b99d7d30>})

    def _execute(self, sql, params, *ignored_wrapper_args):
        self.db.validate_no_broken_transaction()
        with self.db.wrap_database_errors:
            if params is None:
                # params default might be backend specific.
                return self.cursor.execute(sql)
            else:
>               return self.cursor.execute(sql, params)

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:89: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <django.db.backends.sqlite3.base.SQLiteCursorWrapper object at 0xfeb7b93d5510>
query = 'SELECT "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."u..._staff", "auth_user"."is_active", "auth_user"."date_joined" FROM "auth_user" WHERE "auth_user"."username" = ? LIMIT 21'
params = ('testuser',)

    def execute(self, query, params=None):
        if params is None:
            return super().execute(query)
        # Extract names if params is a mapping, i.e. "pyformat" style is used.
        param_names = list(params) if isinstance(params, Mapping) else None
        query = self.convert_query(query, param_names=param_names)
>       return super().execute(query, params)
E       sqlite3.OperationalError: no such table: auth_user

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/sqlite3/base.py:328: OperationalError

The above exception was the direct cause of the following exception:

db = None

    @pytest.fixture
    def test_user(db): # db fixture ensures DB is available *within* this fixture's scope
        """Creates a standard test user."""
        from django.contrib.auth import get_user_model
        User = get_user_model()
        # Use update_or_create for robustness
>       user, created = User.objects.update_or_create(
            username='testuser',
            defaults={'is_staff': False, 'is_superuser': False}
        )

tests/conftest.py:74: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/manager.py:87: in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:949: in update_or_create
    obj, created = self.select_for_update().get_or_create(defaults, **kwargs)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:916: in get_or_create
    return self.get(**kwargs), False
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:633: in get
    num = len(clone)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:380: in __len__
    self._fetch_all()
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:1881: in _fetch_all
    self._result_cache = list(self._iterable_class(self))
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:91: in __iter__
    results = compiler.execute_sql(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/sql/compiler.py:1562: in execute_sql
    cursor.execute(sql, params)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:67: in execute
    return self._execute_with_wrappers(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:80: in _execute_with_wrappers
    return executor(sql, params, many, context)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:84: in _execute
    with self.db.wrap_database_errors:
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/utils.py:91: in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:89: in _execute
    return self.cursor.execute(sql, params)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <django.db.backends.sqlite3.base.SQLiteCursorWrapper object at 0xfeb7b93d5510>
query = 'SELECT "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."u..._staff", "auth_user"."is_active", "auth_user"."date_joined" FROM "auth_user" WHERE "auth_user"."username" = ? LIMIT 21'
params = ('testuser',)

    def execute(self, query, params=None):
        if params is None:
            return super().execute(query)
        # Extract names if params is a mapping, i.e. "pyformat" style is used.
        param_names = list(params) if isinstance(params, Mapping) else None
        query = self.convert_query(query, param_names=param_names)
>       return super().execute(query, params)
E       django.db.utils.OperationalError: no such table: auth_user

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/sqlite3/base.py:328: OperationalError
================================================================================================================================== FAILURES ==================================================================================================================================
________________________________________________________________________________________________________ TestAgentCreatorProViews.test_agent_creator_pro_page_context ________________________________________________________________________________________________________

self = <django.db.backends.utils.CursorWrapper object at 0xfeb7ba46b400>
sql = 'INSERT INTO "auth_user" ("password", "last_login", "is_superuser", "username", "first_name", "last_name", "email", "is_staff", "is_active", "date_joined") VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s) RETURNING "auth_user"."id"'
params = ('pbkdf2_sha256$600000$T0aoGF1Xc12FP9UAgYXHXb$FKzJ3A4NQl83IPe8WidAr00afWRqHtMZtUcq7HeUOv0=', None, False, 'testuser', '', '', ...)
ignored_wrapper_args = (False, {'connection': <DatabaseWrapper vendor='sqlite' alias='default'>, 'cursor': <django.db.backends.utils.CursorWrapper object at 0xfeb7ba46b400>})

    def _execute(self, sql, params, *ignored_wrapper_args):
        self.db.validate_no_broken_transaction()
        with self.db.wrap_database_errors:
            if params is None:
                # params default might be backend specific.
                return self.cursor.execute(sql)
            else:
>               return self.cursor.execute(sql, params)

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:89: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <django.db.backends.sqlite3.base.SQLiteCursorWrapper object at 0xfeb7ba6f31c0>
query = 'INSERT INTO "auth_user" ("password", "last_login", "is_superuser", "username", "first_name", "last_name", "email", "is_staff", "is_active", "date_joined") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "auth_user"."id"'
params = ('pbkdf2_sha256$600000$T0aoGF1Xc12FP9UAgYXHXb$FKzJ3A4NQl83IPe8WidAr00afWRqHtMZtUcq7HeUOv0=', None, False, 'testuser', '', '', ...)

    def execute(self, query, params=None):
        if params is None:
            return super().execute(query)
        # Extract names if params is a mapping, i.e. "pyformat" style is used.
        param_names = list(params) if isinstance(params, Mapping) else None
        query = self.convert_query(query, param_names=param_names)
>       return super().execute(query, params)
E       sqlite3.OperationalError: no such table: auth_user

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/sqlite3/base.py:328: OperationalError

The above exception was the direct cause of the following exception:

self = <test_agent_creator_pro.TestAgentCreatorProViews testMethod=test_agent_creator_pro_page_context>

    def setUp(self):
        self.client = Client()
>       self.user = get_user_model().objects.create_user(
            username='testuser',
            password='testpass123'
        )

tests/views/test_agent_creator_pro.py:271: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/home/chatgpt/.local/lib/python3.10/site-packages/django/contrib/auth/models.py:161: in create_user
    return self._create_user(username, email, password, **extra_fields)
/home/chatgpt/.local/lib/python3.10/site-packages/django/contrib/auth/models.py:155: in _create_user
    user.save(using=self._db)
/home/chatgpt/.local/lib/python3.10/site-packages/django/contrib/auth/base_user.py:76: in save
    super().save(*args, **kwargs)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/base.py:814: in save
    self.save_base(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/base.py:877: in save_base
    updated = self._save_table(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/base.py:1020: in _save_table
    results = self._do_insert(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/base.py:1061: in _do_insert
    return manager._insert(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/manager.py:87: in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:1805: in _insert
    return query.get_compiler(using=using).execute_sql(returning_fields)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/sql/compiler.py:1822: in execute_sql
    cursor.execute(sql, params)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:67: in execute
    return self._execute_with_wrappers(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:80: in _execute_with_wrappers
    return executor(sql, params, many, context)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:84: in _execute
    with self.db.wrap_database_errors:
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/utils.py:91: in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:89: in _execute
    return self.cursor.execute(sql, params)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <django.db.backends.sqlite3.base.SQLiteCursorWrapper object at 0xfeb7ba6f31c0>
query = 'INSERT INTO "auth_user" ("password", "last_login", "is_superuser", "username", "first_name", "last_name", "email", "is_staff", "is_active", "date_joined") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "auth_user"."id"'
params = ('pbkdf2_sha256$600000$T0aoGF1Xc12FP9UAgYXHXb$FKzJ3A4NQl83IPe8WidAr00afWRqHtMZtUcq7HeUOv0=', None, False, 'testuser', '', '', ...)

    def execute(self, query, params=None):
        if params is None:
            return super().execute(query)
        # Extract names if params is a mapping, i.e. "pyformat" style is used.
        param_names = list(params) if isinstance(params, Mapping) else None
        query = self.convert_query(query, param_names=param_names)
>       return super().execute(query, params)
E       django.db.utils.OperationalError: no such table: auth_user

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/sqlite3/base.py:328: OperationalError
__________________________________________________________________________________________________________ TestAgentCreatorProViews.test_agent_creator_pro_page_get __________________________________________________________________________________________________________

self = <django.db.backends.utils.CursorWrapper object at 0xfeb7ba5a2ad0>
sql = 'INSERT INTO "auth_user" ("password", "last_login", "is_superuser", "username", "first_name", "last_name", "email", "is_staff", "is_active", "date_joined") VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s) RETURNING "auth_user"."id"'
params = ('pbkdf2_sha256$600000$ISZO2qBiWyEHp5iKwLYv8Q$M4ISkROToqaOfYTrWgGcc1oDz00/nbZZjbl5Zbyuud4=', None, False, 'testuser', '', '', ...)
ignored_wrapper_args = (False, {'connection': <DatabaseWrapper vendor='sqlite' alias='default'>, 'cursor': <django.db.backends.utils.CursorWrapper object at 0xfeb7ba5a2ad0>})

    def _execute(self, sql, params, *ignored_wrapper_args):
        self.db.validate_no_broken_transaction()
        with self.db.wrap_database_errors:
            if params is None:
                # params default might be backend specific.
                return self.cursor.execute(sql)
            else:
>               return self.cursor.execute(sql, params)

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:89: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <django.db.backends.sqlite3.base.SQLiteCursorWrapper object at 0xfeb7b959bd00>
query = 'INSERT INTO "auth_user" ("password", "last_login", "is_superuser", "username", "first_name", "last_name", "email", "is_staff", "is_active", "date_joined") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "auth_user"."id"'
params = ('pbkdf2_sha256$600000$ISZO2qBiWyEHp5iKwLYv8Q$M4ISkROToqaOfYTrWgGcc1oDz00/nbZZjbl5Zbyuud4=', None, False, 'testuser', '', '', ...)

    def execute(self, query, params=None):
        if params is None:
            return super().execute(query)
        # Extract names if params is a mapping, i.e. "pyformat" style is used.
        param_names = list(params) if isinstance(params, Mapping) else None
        query = self.convert_query(query, param_names=param_names)
>       return super().execute(query, params)
E       sqlite3.OperationalError: no such table: auth_user

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/sqlite3/base.py:328: OperationalError

The above exception was the direct cause of the following exception:

self = <test_agent_creator_pro.TestAgentCreatorProViews testMethod=test_agent_creator_pro_page_get>

    def setUp(self):
        self.client = Client()
>       self.user = get_user_model().objects.create_user(
            username='testuser',
            password='testpass123'
        )

tests/views/test_agent_creator_pro.py:271: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/home/chatgpt/.local/lib/python3.10/site-packages/django/contrib/auth/models.py:161: in create_user
    return self._create_user(username, email, password, **extra_fields)
/home/chatgpt/.local/lib/python3.10/site-packages/django/contrib/auth/models.py:155: in _create_user
    user.save(using=self._db)
/home/chatgpt/.local/lib/python3.10/site-packages/django/contrib/auth/base_user.py:76: in save
    super().save(*args, **kwargs)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/base.py:814: in save
    self.save_base(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/base.py:877: in save_base
    updated = self._save_table(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/base.py:1020: in _save_table
    results = self._do_insert(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/base.py:1061: in _do_insert
    return manager._insert(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/manager.py:87: in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:1805: in _insert
    return query.get_compiler(using=using).execute_sql(returning_fields)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/sql/compiler.py:1822: in execute_sql
    cursor.execute(sql, params)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:67: in execute
    return self._execute_with_wrappers(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:80: in _execute_with_wrappers
    return executor(sql, params, many, context)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:84: in _execute
    with self.db.wrap_database_errors:
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/utils.py:91: in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:89: in _execute
    return self.cursor.execute(sql, params)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <django.db.backends.sqlite3.base.SQLiteCursorWrapper object at 0xfeb7b959bd00>
query = 'INSERT INTO "auth_user" ("password", "last_login", "is_superuser", "username", "first_name", "last_name", "email", "is_staff", "is_active", "date_joined") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "auth_user"."id"'
params = ('pbkdf2_sha256$600000$ISZO2qBiWyEHp5iKwLYv8Q$M4ISkROToqaOfYTrWgGcc1oDz00/nbZZjbl5Zbyuud4=', None, False, 'testuser', '', '', ...)

    def execute(self, query, params=None):
        if params is None:
            return super().execute(query)
        # Extract names if params is a mapping, i.e. "pyformat" style is used.
        param_names = list(params) if isinstance(params, Mapping) else None
        query = self.convert_query(query, param_names=param_names)
>       return super().execute(query, params)
E       django.db.utils.OperationalError: no such table: auth_user

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/sqlite3/base.py:328: OperationalError
______________________________________________________________________________________________________ TestSettingsDashboardViews.test_environment_variables_filtering _______________________________________________________________________________________________________

self = <django.db.backends.utils.CursorWrapper object at 0xfeb7b94016c0>
sql = 'INSERT INTO "auth_user" ("password", "last_login", "is_superuser", "username", "first_name", "last_name", "email", "is_staff", "is_active", "date_joined") VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s) RETURNING "auth_user"."id"'
params = ('pbkdf2_sha256$600000$P9nv1Mb24xdLu6QjM6BSTB$MKYu9YCR+vw3tTEI2xqu0Vps2GnCocTY7e6Up6+quPo=', None, False, 'testuser', '', '', ...)
ignored_wrapper_args = (False, {'connection': <DatabaseWrapper vendor='sqlite' alias='default'>, 'cursor': <django.db.backends.utils.CursorWrapper object at 0xfeb7b94016c0>})

    def _execute(self, sql, params, *ignored_wrapper_args):
        self.db.validate_no_broken_transaction()
        with self.db.wrap_database_errors:
            if params is None:
                # params default might be backend specific.
                return self.cursor.execute(sql)
            else:
>               return self.cursor.execute(sql, params)

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:89: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <django.db.backends.sqlite3.base.SQLiteCursorWrapper object at 0xfeb7ba45c8b0>
query = 'INSERT INTO "auth_user" ("password", "last_login", "is_superuser", "username", "first_name", "last_name", "email", "is_staff", "is_active", "date_joined") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "auth_user"."id"'
params = ('pbkdf2_sha256$600000$P9nv1Mb24xdLu6QjM6BSTB$MKYu9YCR+vw3tTEI2xqu0Vps2GnCocTY7e6Up6+quPo=', None, False, 'testuser', '', '', ...)

    def execute(self, query, params=None):
        if params is None:
            return super().execute(query)
        # Extract names if params is a mapping, i.e. "pyformat" style is used.
        param_names = list(params) if isinstance(params, Mapping) else None
        query = self.convert_query(query, param_names=param_names)
>       return super().execute(query, params)
E       sqlite3.OperationalError: no such table: auth_user

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/sqlite3/base.py:328: OperationalError

The above exception was the direct cause of the following exception:

self = <test_settings_dashboard.TestSettingsDashboardViews testMethod=test_environment_variables_filtering>

    def setUp(self):
        self.client = Client()
>       self.user = get_user_model().objects.create_user(
            username='testuser',
            password='testpass123'
        )

tests/views/test_settings_dashboard.py:185: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/home/chatgpt/.local/lib/python3.10/site-packages/django/contrib/auth/models.py:161: in create_user
    return self._create_user(username, email, password, **extra_fields)
/home/chatgpt/.local/lib/python3.10/site-packages/django/contrib/auth/models.py:155: in _create_user
    user.save(using=self._db)
/home/chatgpt/.local/lib/python3.10/site-packages/django/contrib/auth/base_user.py:76: in save
    super().save(*args, **kwargs)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/base.py:814: in save
    self.save_base(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/base.py:877: in save_base
    updated = self._save_table(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/base.py:1020: in _save_table
    results = self._do_insert(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/base.py:1061: in _do_insert
    return manager._insert(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/manager.py:87: in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:1805: in _insert
    return query.get_compiler(using=using).execute_sql(returning_fields)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/sql/compiler.py:1822: in execute_sql
    cursor.execute(sql, params)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:67: in execute
    return self._execute_with_wrappers(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:80: in _execute_with_wrappers
    return executor(sql, params, many, context)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:84: in _execute
    with self.db.wrap_database_errors:
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/utils.py:91: in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:89: in _execute
    return self.cursor.execute(sql, params)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <django.db.backends.sqlite3.base.SQLiteCursorWrapper object at 0xfeb7ba45c8b0>
query = 'INSERT INTO "auth_user" ("password", "last_login", "is_superuser", "username", "first_name", "last_name", "email", "is_staff", "is_active", "date_joined") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "auth_user"."id"'
params = ('pbkdf2_sha256$600000$P9nv1Mb24xdLu6QjM6BSTB$MKYu9YCR+vw3tTEI2xqu0Vps2GnCocTY7e6Up6+quPo=', None, False, 'testuser', '', '', ...)

    def execute(self, query, params=None):
        if params is None:
            return super().execute(query)
        # Extract names if params is a mapping, i.e. "pyformat" style is used.
        param_names = list(params) if isinstance(params, Mapping) else None
        query = self.convert_query(query, param_names=param_names)
>       return super().execute(query, params)
E       django.db.utils.OperationalError: no such table: auth_user

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/sqlite3/base.py:328: OperationalError
_________________________________________________________________________________________________________ TestSettingsDashboardViews.test_environment_variables_get __________________________________________________________________________________________________________

self = <django.db.backends.utils.CursorWrapper object at 0xfeb7b9721390>
sql = 'INSERT INTO "auth_user" ("password", "last_login", "is_superuser", "username", "first_name", "last_name", "email", "is_staff", "is_active", "date_joined") VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s) RETURNING "auth_user"."id"'
params = ('pbkdf2_sha256$600000$A3UQNibRiLQjeYxQjU0EK3$MImAV0zidr+jo1TR1n36BHTAU7rR3ENmrWVJ/IDgA14=', None, False, 'testuser', '', '', ...)
ignored_wrapper_args = (False, {'connection': <DatabaseWrapper vendor='sqlite' alias='default'>, 'cursor': <django.db.backends.utils.CursorWrapper object at 0xfeb7b9721390>})

    def _execute(self, sql, params, *ignored_wrapper_args):
        self.db.validate_no_broken_transaction()
        with self.db.wrap_database_errors:
            if params is None:
                # params default might be backend specific.
                return self.cursor.execute(sql)
            else:
>               return self.cursor.execute(sql, params)

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:89: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <django.db.backends.sqlite3.base.SQLiteCursorWrapper object at 0xfeb7ba45c700>
query = 'INSERT INTO "auth_user" ("password", "last_login", "is_superuser", "username", "first_name", "last_name", "email", "is_staff", "is_active", "date_joined") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "auth_user"."id"'
params = ('pbkdf2_sha256$600000$A3UQNibRiLQjeYxQjU0EK3$MImAV0zidr+jo1TR1n36BHTAU7rR3ENmrWVJ/IDgA14=', None, False, 'testuser', '', '', ...)

    def execute(self, query, params=None):
        if params is None:
            return super().execute(query)
        # Extract names if params is a mapping, i.e. "pyformat" style is used.
        param_names = list(params) if isinstance(params, Mapping) else None
        query = self.convert_query(query, param_names=param_names)
>       return super().execute(query, params)
E       sqlite3.OperationalError: no such table: auth_user

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/sqlite3/base.py:328: OperationalError

The above exception was the direct cause of the following exception:

self = <test_settings_dashboard.TestSettingsDashboardViews testMethod=test_environment_variables_get>

    def setUp(self):
        self.client = Client()
>       self.user = get_user_model().objects.create_user(
            username='testuser',
            password='testpass123'
        )

tests/views/test_settings_dashboard.py:185: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/home/chatgpt/.local/lib/python3.10/site-packages/django/contrib/auth/models.py:161: in create_user
    return self._create_user(username, email, password, **extra_fields)
/home/chatgpt/.local/lib/python3.10/site-packages/django/contrib/auth/models.py:155: in _create_user
    user.save(using=self._db)
/home/chatgpt/.local/lib/python3.10/site-packages/django/contrib/auth/base_user.py:76: in save
    super().save(*args, **kwargs)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/base.py:814: in save
    self.save_base(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/base.py:877: in save_base
    updated = self._save_table(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/base.py:1020: in _save_table
    results = self._do_insert(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/base.py:1061: in _do_insert
    return manager._insert(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/manager.py:87: in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:1805: in _insert
    return query.get_compiler(using=using).execute_sql(returning_fields)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/sql/compiler.py:1822: in execute_sql
    cursor.execute(sql, params)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:67: in execute
    return self._execute_with_wrappers(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:80: in _execute_with_wrappers
    return executor(sql, params, many, context)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:84: in _execute
    with self.db.wrap_database_errors:
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/utils.py:91: in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:89: in _execute
    return self.cursor.execute(sql, params)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <django.db.backends.sqlite3.base.SQLiteCursorWrapper object at 0xfeb7ba45c700>
query = 'INSERT INTO "auth_user" ("password", "last_login", "is_superuser", "username", "first_name", "last_name", "email", "is_staff", "is_active", "date_joined") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "auth_user"."id"'
params = ('pbkdf2_sha256$600000$A3UQNibRiLQjeYxQjU0EK3$MImAV0zidr+jo1TR1n36BHTAU7rR3ENmrWVJ/IDgA14=', None, False, 'testuser', '', '', ...)

    def execute(self, query, params=None):
        if params is None:
            return super().execute(query)
        # Extract names if params is a mapping, i.e. "pyformat" style is used.
        param_names = list(params) if isinstance(params, Mapping) else None
        query = self.convert_query(query, param_names=param_names)
>       return super().execute(query, params)
E       django.db.utils.OperationalError: no such table: auth_user

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/sqlite3/base.py:328: OperationalError
______________________________________________________________________________________________________________ TestSettingsDashboardViews.test_settings_api_get ______________________________________________________________________________________________________________

self = <django.db.backends.utils.CursorWrapper object at 0xfeb7b90d6c80>
sql = 'INSERT INTO "auth_user" ("password", "last_login", "is_superuser", "username", "first_name", "last_name", "email", "is_staff", "is_active", "date_joined") VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s) RETURNING "auth_user"."id"'
params = ('pbkdf2_sha256$600000$qWD7Vv4dITcfoCB092Fq4c$gyS7bNkM+pis4I/X62C8PT1ppMgD/dwHlmjC+teJZVk=', None, False, 'testuser', '', '', ...)
ignored_wrapper_args = (False, {'connection': <DatabaseWrapper vendor='sqlite' alias='default'>, 'cursor': <django.db.backends.utils.CursorWrapper object at 0xfeb7b90d6c80>})

    def _execute(self, sql, params, *ignored_wrapper_args):
        self.db.validate_no_broken_transaction()
        with self.db.wrap_database_errors:
            if params is None:
                # params default might be backend specific.
                return self.cursor.execute(sql)
            else:
>               return self.cursor.execute(sql, params)

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:89: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <django.db.backends.sqlite3.base.SQLiteCursorWrapper object at 0xfeb7ba6f31c0>
query = 'INSERT INTO "auth_user" ("password", "last_login", "is_superuser", "username", "first_name", "last_name", "email", "is_staff", "is_active", "date_joined") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "auth_user"."id"'
params = ('pbkdf2_sha256$600000$qWD7Vv4dITcfoCB092Fq4c$gyS7bNkM+pis4I/X62C8PT1ppMgD/dwHlmjC+teJZVk=', None, False, 'testuser', '', '', ...)

    def execute(self, query, params=None):
        if params is None:
            return super().execute(query)
        # Extract names if params is a mapping, i.e. "pyformat" style is used.
        param_names = list(params) if isinstance(params, Mapping) else None
        query = self.convert_query(query, param_names=param_names)
>       return super().execute(query, params)
E       sqlite3.OperationalError: no such table: auth_user

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/sqlite3/base.py:328: OperationalError

The above exception was the direct cause of the following exception:

self = <test_settings_dashboard.TestSettingsDashboardViews testMethod=test_settings_api_get>

    def setUp(self):
        self.client = Client()
>       self.user = get_user_model().objects.create_user(
            username='testuser',
            password='testpass123'
        )

tests/views/test_settings_dashboard.py:185: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/home/chatgpt/.local/lib/python3.10/site-packages/django/contrib/auth/models.py:161: in create_user
    return self._create_user(username, email, password, **extra_fields)
/home/chatgpt/.local/lib/python3.10/site-packages/django/contrib/auth/models.py:155: in _create_user
    user.save(using=self._db)
/home/chatgpt/.local/lib/python3.10/site-packages/django/contrib/auth/base_user.py:76: in save
    super().save(*args, **kwargs)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/base.py:814: in save
    self.save_base(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/base.py:877: in save_base
    updated = self._save_table(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/base.py:1020: in _save_table
    results = self._do_insert(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/base.py:1061: in _do_insert
    return manager._insert(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/manager.py:87: in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:1805: in _insert
    return query.get_compiler(using=using).execute_sql(returning_fields)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/sql/compiler.py:1822: in execute_sql
    cursor.execute(sql, params)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:67: in execute
    return self._execute_with_wrappers(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:80: in _execute_with_wrappers
    return executor(sql, params, many, context)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:84: in _execute
    with self.db.wrap_database_errors:
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/utils.py:91: in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:89: in _execute
    return self.cursor.execute(sql, params)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <django.db.backends.sqlite3.base.SQLiteCursorWrapper object at 0xfeb7ba6f31c0>
query = 'INSERT INTO "auth_user" ("password", "last_login", "is_superuser", "username", "first_name", "last_name", "email", "is_staff", "is_active", "date_joined") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "auth_user"."id"'
params = ('pbkdf2_sha256$600000$qWD7Vv4dITcfoCB092Fq4c$gyS7bNkM+pis4I/X62C8PT1ppMgD/dwHlmjC+teJZVk=', None, False, 'testuser', '', '', ...)

    def execute(self, query, params=None):
        if params is None:
            return super().execute(query)
        # Extract names if params is a mapping, i.e. "pyformat" style is used.
        param_names = list(params) if isinstance(params, Mapping) else None
        query = self.convert_query(query, param_names=param_names)
>       return super().execute(query, params)
E       django.db.utils.OperationalError: no such table: auth_user

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/sqlite3/base.py:328: OperationalError
___________________________________________________________________________________________________ TestSettingsDashboardViews.test_settings_api_sensitive_data_filtering ____________________________________________________________________________________________________

self = <django.db.backends.utils.CursorWrapper object at 0xfeb7b8f3ad40>
sql = 'INSERT INTO "auth_user" ("password", "last_login", "is_superuser", "username", "first_name", "last_name", "email", "is_staff", "is_active", "date_joined") VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s) RETURNING "auth_user"."id"'
params = ('pbkdf2_sha256$600000$yGFNEPSYDUKs3ZCkDEnxPt$N+LyDFeQB6SZBXCa/Ip2OrO65z+4xa4oXQstswYTX2U=', None, False, 'testuser', '', '', ...)
ignored_wrapper_args = (False, {'connection': <DatabaseWrapper vendor='sqlite' alias='default'>, 'cursor': <django.db.backends.utils.CursorWrapper object at 0xfeb7b8f3ad40>})

    def _execute(self, sql, params, *ignored_wrapper_args):
        self.db.validate_no_broken_transaction()
        with self.db.wrap_database_errors:
            if params is None:
                # params default might be backend specific.
                return self.cursor.execute(sql)
            else:
>               return self.cursor.execute(sql, params)

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:89: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <django.db.backends.sqlite3.base.SQLiteCursorWrapper object at 0xfeb7b9772170>
query = 'INSERT INTO "auth_user" ("password", "last_login", "is_superuser", "username", "first_name", "last_name", "email", "is_staff", "is_active", "date_joined") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "auth_user"."id"'
params = ('pbkdf2_sha256$600000$yGFNEPSYDUKs3ZCkDEnxPt$N+LyDFeQB6SZBXCa/Ip2OrO65z+4xa4oXQstswYTX2U=', None, False, 'testuser', '', '', ...)

    def execute(self, query, params=None):
        if params is None:
            return super().execute(query)
        # Extract names if params is a mapping, i.e. "pyformat" style is used.
        param_names = list(params) if isinstance(params, Mapping) else None
        query = self.convert_query(query, param_names=param_names)
>       return super().execute(query, params)
E       sqlite3.OperationalError: no such table: auth_user

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/sqlite3/base.py:328: OperationalError

The above exception was the direct cause of the following exception:

self = <test_settings_dashboard.TestSettingsDashboardViews testMethod=test_settings_api_sensitive_data_filtering>

    def setUp(self):
        self.client = Client()
>       self.user = get_user_model().objects.create_user(
            username='testuser',
            password='testpass123'
        )

tests/views/test_settings_dashboard.py:185: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/home/chatgpt/.local/lib/python3.10/site-packages/django/contrib/auth/models.py:161: in create_user
    return self._create_user(username, email, password, **extra_fields)
/home/chatgpt/.local/lib/python3.10/site-packages/django/contrib/auth/models.py:155: in _create_user
    user.save(using=self._db)
/home/chatgpt/.local/lib/python3.10/site-packages/django/contrib/auth/base_user.py:76: in save
    super().save(*args, **kwargs)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/base.py:814: in save
    self.save_base(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/base.py:877: in save_base
    updated = self._save_table(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/base.py:1020: in _save_table
    results = self._do_insert(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/base.py:1061: in _do_insert
    return manager._insert(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/manager.py:87: in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:1805: in _insert
    return query.get_compiler(using=using).execute_sql(returning_fields)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/sql/compiler.py:1822: in execute_sql
    cursor.execute(sql, params)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:67: in execute
    return self._execute_with_wrappers(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:80: in _execute_with_wrappers
    return executor(sql, params, many, context)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:84: in _execute
    with self.db.wrap_database_errors:
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/utils.py:91: in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:89: in _execute
    return self.cursor.execute(sql, params)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <django.db.backends.sqlite3.base.SQLiteCursorWrapper object at 0xfeb7b9772170>
query = 'INSERT INTO "auth_user" ("password", "last_login", "is_superuser", "username", "first_name", "last_name", "email", "is_staff", "is_active", "date_joined") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "auth_user"."id"'
params = ('pbkdf2_sha256$600000$yGFNEPSYDUKs3ZCkDEnxPt$N+LyDFeQB6SZBXCa/Ip2OrO65z+4xa4oXQstswYTX2U=', None, False, 'testuser', '', '', ...)

    def execute(self, query, params=None):
        if params is None:
            return super().execute(query)
        # Extract names if params is a mapping, i.e. "pyformat" style is used.
        param_names = list(params) if isinstance(params, Mapping) else None
        query = self.convert_query(query, param_names=param_names)
>       return super().execute(query, params)
E       django.db.utils.OperationalError: no such table: auth_user

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/sqlite3/base.py:328: OperationalError
_________________________________________________________________________________________________________ TestSettingsDashboardViews.test_settings_dashboard_context _________________________________________________________________________________________________________

self = <django.db.backends.utils.CursorWrapper object at 0xfeb7b928e0e0>
sql = 'INSERT INTO "auth_user" ("password", "last_login", "is_superuser", "username", "first_name", "last_name", "email", "is_staff", "is_active", "date_joined") VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s) RETURNING "auth_user"."id"'
params = ('pbkdf2_sha256$600000$BEA20KkWdUEV6UTOkPBwd9$lHDbWHWa/WpCFyrFRyMKBPDdlztLPXSFDpfR3HdEfww=', None, False, 'testuser', '', '', ...)
ignored_wrapper_args = (False, {'connection': <DatabaseWrapper vendor='sqlite' alias='default'>, 'cursor': <django.db.backends.utils.CursorWrapper object at 0xfeb7b928e0e0>})

    def _execute(self, sql, params, *ignored_wrapper_args):
        self.db.validate_no_broken_transaction()
        with self.db.wrap_database_errors:
            if params is None:
                # params default might be backend specific.
                return self.cursor.execute(sql)
            else:
>               return self.cursor.execute(sql, params)

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:89: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <django.db.backends.sqlite3.base.SQLiteCursorWrapper object at 0xfeb7b9771510>
query = 'INSERT INTO "auth_user" ("password", "last_login", "is_superuser", "username", "first_name", "last_name", "email", "is_staff", "is_active", "date_joined") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "auth_user"."id"'
params = ('pbkdf2_sha256$600000$BEA20KkWdUEV6UTOkPBwd9$lHDbWHWa/WpCFyrFRyMKBPDdlztLPXSFDpfR3HdEfww=', None, False, 'testuser', '', '', ...)

    def execute(self, query, params=None):
        if params is None:
            return super().execute(query)
        # Extract names if params is a mapping, i.e. "pyformat" style is used.
        param_names = list(params) if isinstance(params, Mapping) else None
        query = self.convert_query(query, param_names=param_names)
>       return super().execute(query, params)
E       sqlite3.OperationalError: no such table: auth_user

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/sqlite3/base.py:328: OperationalError

The above exception was the direct cause of the following exception:

self = <test_settings_dashboard.TestSettingsDashboardViews testMethod=test_settings_dashboard_context>

    def setUp(self):
        self.client = Client()
>       self.user = get_user_model().objects.create_user(
            username='testuser',
            password='testpass123'
        )

tests/views/test_settings_dashboard.py:185: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/home/chatgpt/.local/lib/python3.10/site-packages/django/contrib/auth/models.py:161: in create_user
    return self._create_user(username, email, password, **extra_fields)
/home/chatgpt/.local/lib/python3.10/site-packages/django/contrib/auth/models.py:155: in _create_user
    user.save(using=self._db)
/home/chatgpt/.local/lib/python3.10/site-packages/django/contrib/auth/base_user.py:76: in save
    super().save(*args, **kwargs)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/base.py:814: in save
    self.save_base(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/base.py:877: in save_base
    updated = self._save_table(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/base.py:1020: in _save_table
    results = self._do_insert(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/base.py:1061: in _do_insert
    return manager._insert(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/manager.py:87: in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:1805: in _insert
    return query.get_compiler(using=using).execute_sql(returning_fields)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/sql/compiler.py:1822: in execute_sql
    cursor.execute(sql, params)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:67: in execute
    return self._execute_with_wrappers(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:80: in _execute_with_wrappers
    return executor(sql, params, many, context)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:84: in _execute
    with self.db.wrap_database_errors:
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/utils.py:91: in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:89: in _execute
    return self.cursor.execute(sql, params)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <django.db.backends.sqlite3.base.SQLiteCursorWrapper object at 0xfeb7b9771510>
query = 'INSERT INTO "auth_user" ("password", "last_login", "is_superuser", "username", "first_name", "last_name", "email", "is_staff", "is_active", "date_joined") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "auth_user"."id"'
params = ('pbkdf2_sha256$600000$BEA20KkWdUEV6UTOkPBwd9$lHDbWHWa/WpCFyrFRyMKBPDdlztLPXSFDpfR3HdEfww=', None, False, 'testuser', '', '', ...)

    def execute(self, query, params=None):
        if params is None:
            return super().execute(query)
        # Extract names if params is a mapping, i.e. "pyformat" style is used.
        param_names = list(params) if isinstance(params, Mapping) else None
        query = self.convert_query(query, param_names=param_names)
>       return super().execute(query, params)
E       django.db.utils.OperationalError: no such table: auth_user

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/sqlite3/base.py:328: OperationalError
_____________________________________________________________________________________________________ TestSettingsDashboardViews.test_settings_dashboard_error_handling ______________________________________________________________________________________________________

self = <django.db.backends.utils.CursorWrapper object at 0xfeb7b92d2b90>
sql = 'INSERT INTO "auth_user" ("password", "last_login", "is_superuser", "username", "first_name", "last_name", "email", "is_staff", "is_active", "date_joined") VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s) RETURNING "auth_user"."id"'
params = ('pbkdf2_sha256$600000$uc3l1sSGtmQkDVgmUkxsUD$lqH3P5AMvlQxazQ9xGlsqPQ45r6wHsE5s6UY3p5FIk0=', None, False, 'testuser', '', '', ...)
ignored_wrapper_args = (False, {'connection': <DatabaseWrapper vendor='sqlite' alias='default'>, 'cursor': <django.db.backends.utils.CursorWrapper object at 0xfeb7b92d2b90>})

    def _execute(self, sql, params, *ignored_wrapper_args):
        self.db.validate_no_broken_transaction()
        with self.db.wrap_database_errors:
            if params is None:
                # params default might be backend specific.
                return self.cursor.execute(sql)
            else:
>               return self.cursor.execute(sql, params)

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:89: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <django.db.backends.sqlite3.base.SQLiteCursorWrapper object at 0xfeb7b9772170>
query = 'INSERT INTO "auth_user" ("password", "last_login", "is_superuser", "username", "first_name", "last_name", "email", "is_staff", "is_active", "date_joined") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "auth_user"."id"'
params = ('pbkdf2_sha256$600000$uc3l1sSGtmQkDVgmUkxsUD$lqH3P5AMvlQxazQ9xGlsqPQ45r6wHsE5s6UY3p5FIk0=', None, False, 'testuser', '', '', ...)

    def execute(self, query, params=None):
        if params is None:
            return super().execute(query)
        # Extract names if params is a mapping, i.e. "pyformat" style is used.
        param_names = list(params) if isinstance(params, Mapping) else None
        query = self.convert_query(query, param_names=param_names)
>       return super().execute(query, params)
E       sqlite3.OperationalError: no such table: auth_user

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/sqlite3/base.py:328: OperationalError

The above exception was the direct cause of the following exception:

self = <test_settings_dashboard.TestSettingsDashboardViews testMethod=test_settings_dashboard_error_handling>

    def setUp(self):
        self.client = Client()
>       self.user = get_user_model().objects.create_user(
            username='testuser',
            password='testpass123'
        )

tests/views/test_settings_dashboard.py:185: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/home/chatgpt/.local/lib/python3.10/site-packages/django/contrib/auth/models.py:161: in create_user
    return self._create_user(username, email, password, **extra_fields)
/home/chatgpt/.local/lib/python3.10/site-packages/django/contrib/auth/models.py:155: in _create_user
    user.save(using=self._db)
/home/chatgpt/.local/lib/python3.10/site-packages/django/contrib/auth/base_user.py:76: in save
    super().save(*args, **kwargs)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/base.py:814: in save
    self.save_base(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/base.py:877: in save_base
    updated = self._save_table(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/base.py:1020: in _save_table
    results = self._do_insert(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/base.py:1061: in _do_insert
    return manager._insert(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/manager.py:87: in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:1805: in _insert
    return query.get_compiler(using=using).execute_sql(returning_fields)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/sql/compiler.py:1822: in execute_sql
    cursor.execute(sql, params)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:67: in execute
    return self._execute_with_wrappers(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:80: in _execute_with_wrappers
    return executor(sql, params, many, context)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:84: in _execute
    with self.db.wrap_database_errors:
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/utils.py:91: in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:89: in _execute
    return self.cursor.execute(sql, params)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <django.db.backends.sqlite3.base.SQLiteCursorWrapper object at 0xfeb7b9772170>
query = 'INSERT INTO "auth_user" ("password", "last_login", "is_superuser", "username", "first_name", "last_name", "email", "is_staff", "is_active", "date_joined") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "auth_user"."id"'
params = ('pbkdf2_sha256$600000$uc3l1sSGtmQkDVgmUkxsUD$lqH3P5AMvlQxazQ9xGlsqPQ45r6wHsE5s6UY3p5FIk0=', None, False, 'testuser', '', '', ...)

    def execute(self, query, params=None):
        if params is None:
            return super().execute(query)
        # Extract names if params is a mapping, i.e. "pyformat" style is used.
        param_names = list(params) if isinstance(params, Mapping) else None
        query = self.convert_query(query, param_names=param_names)
>       return super().execute(query, params)
E       django.db.utils.OperationalError: no such table: auth_user

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/sqlite3/base.py:328: OperationalError
___________________________________________________________________________________________________________ TestSettingsDashboardViews.test_settings_dashboard_get ___________________________________________________________________________________________________________

self = <django.db.backends.utils.CursorWrapper object at 0xfeb7b92e2d70>
sql = 'INSERT INTO "auth_user" ("password", "last_login", "is_superuser", "username", "first_name", "last_name", "email", "is_staff", "is_active", "date_joined") VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s) RETURNING "auth_user"."id"'
params = ('pbkdf2_sha256$600000$fpAM4LW5Ek9vYEGTq6Zn6X$65GB31//WBBYne0V2jU9PxIZmH7u3CryihkMIAycCT0=', None, False, 'testuser', '', '', ...)
ignored_wrapper_args = (False, {'connection': <DatabaseWrapper vendor='sqlite' alias='default'>, 'cursor': <django.db.backends.utils.CursorWrapper object at 0xfeb7b92e2d70>})

    def _execute(self, sql, params, *ignored_wrapper_args):
        self.db.validate_no_broken_transaction()
        with self.db.wrap_database_errors:
            if params is None:
                # params default might be backend specific.
                return self.cursor.execute(sql)
            else:
>               return self.cursor.execute(sql, params)

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:89: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <django.db.backends.sqlite3.base.SQLiteCursorWrapper object at 0xfeb7ba6f31c0>
query = 'INSERT INTO "auth_user" ("password", "last_login", "is_superuser", "username", "first_name", "last_name", "email", "is_staff", "is_active", "date_joined") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "auth_user"."id"'
params = ('pbkdf2_sha256$600000$fpAM4LW5Ek9vYEGTq6Zn6X$65GB31//WBBYne0V2jU9PxIZmH7u3CryihkMIAycCT0=', None, False, 'testuser', '', '', ...)

    def execute(self, query, params=None):
        if params is None:
            return super().execute(query)
        # Extract names if params is a mapping, i.e. "pyformat" style is used.
        param_names = list(params) if isinstance(params, Mapping) else None
        query = self.convert_query(query, param_names=param_names)
>       return super().execute(query, params)
E       sqlite3.OperationalError: no such table: auth_user

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/sqlite3/base.py:328: OperationalError

The above exception was the direct cause of the following exception:

self = <test_settings_dashboard.TestSettingsDashboardViews testMethod=test_settings_dashboard_get>

    def setUp(self):
        self.client = Client()
>       self.user = get_user_model().objects.create_user(
            username='testuser',
            password='testpass123'
        )

tests/views/test_settings_dashboard.py:185: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/home/chatgpt/.local/lib/python3.10/site-packages/django/contrib/auth/models.py:161: in create_user
    return self._create_user(username, email, password, **extra_fields)
/home/chatgpt/.local/lib/python3.10/site-packages/django/contrib/auth/models.py:155: in _create_user
    user.save(using=self._db)
/home/chatgpt/.local/lib/python3.10/site-packages/django/contrib/auth/base_user.py:76: in save
    super().save(*args, **kwargs)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/base.py:814: in save
    self.save_base(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/base.py:877: in save_base
    updated = self._save_table(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/base.py:1020: in _save_table
    results = self._do_insert(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/base.py:1061: in _do_insert
    return manager._insert(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/manager.py:87: in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/query.py:1805: in _insert
    return query.get_compiler(using=using).execute_sql(returning_fields)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/models/sql/compiler.py:1822: in execute_sql
    cursor.execute(sql, params)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:67: in execute
    return self._execute_with_wrappers(
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:80: in _execute_with_wrappers
    return executor(sql, params, many, context)
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:84: in _execute
    with self.db.wrap_database_errors:
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/utils.py:91: in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/utils.py:89: in _execute
    return self.cursor.execute(sql, params)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <django.db.backends.sqlite3.base.SQLiteCursorWrapper object at 0xfeb7ba6f31c0>
query = 'INSERT INTO "auth_user" ("password", "last_login", "is_superuser", "username", "first_name", "last_name", "email", "is_staff", "is_active", "date_joined") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "auth_user"."id"'
params = ('pbkdf2_sha256$600000$fpAM4LW5Ek9vYEGTq6Zn6X$65GB31//WBBYne0V2jU9PxIZmH7u3CryihkMIAycCT0=', None, False, 'testuser', '', '', ...)

    def execute(self, query, params=None):
        if params is None:
            return super().execute(query)
        # Extract names if params is a mapping, i.e. "pyformat" style is used.
        param_names = list(params) if isinstance(params, Mapping) else None
        query = self.convert_query(query, param_names=param_names)
>       return super().execute(query, params)
E       django.db.utils.OperationalError: no such table: auth_user

/home/chatgpt/.local/lib/python3.10/site-packages/django/db/backends/sqlite3/base.py:328: OperationalError
============================================================================================================================== warnings summary ==============================================================================================================================
../../../home/chatgpt/.local/lib/python3.10/site-packages/_pytest/config/__init__.py:1441
  /home/chatgpt/.local/lib/python3.10/site-packages/_pytest/config/__init__.py:1441: PytestConfigWarning: Unknown config option: env
  
    self._warn_or_fail_if_strict(f"Unknown config option: {key}\n")

../../../home/chatgpt/.local/lib/python3.10/site-packages/starlette/formparsers.py:12
  /home/chatgpt/.local/lib/python3.10/site-packages/starlette/formparsers.py:12: PendingDeprecationWarning: Please use `import python_multipart` instead.
    import multipart

../../../home/chatgpt/.local/lib/python3.10/site-packages/pydantic/_internal/_config.py:323
  /home/chatgpt/.local/lib/python3.10/site-packages/pydantic/_internal/_config.py:323: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
    warnings.warn(DEPRECATION_MESSAGE, DeprecationWarning)

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=================================================================================================================================== PASSES ===================================================================================================================================
___________________________________________________________________________________________________________________ test_models_empty_registry_returns_200 ___________________________________________________________________________________________________________________
--------------------------------------------------------------------------------------------------------------------------- Captured stdout setup ----------------------------------------------------------------------------------------------------------------------------
Allowing Django DB access for session...
Django DB access allowed.
--------------------------------------------------------------------------------------------------------------------------- Captured stderr setup ----------------------------------------------------------------------------------------------------------------------------
Creating test database for alias 'default'...
Destroying old test database for alias 'default'...
---------------------------------------------------------------------------------------------------------------------------- Captured stdout call ----------------------------------------------------------------------------------------------------------------------------
[INFO] 2025-08-24 20:28:52,338 - swarm.core.blueprint_discovery:61 - Starting blueprint discovery in directory: /mnt/models/open-swarm-mcp/src/swarm/blueprints
[DEBUG] 2025-08-24 20:28:52,338 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'chucks_angels' in directory: chucks_angels
[DEBUG] 2025-08-24 20:28:52,338 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_chucks_angels.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/chucks_angels
[DEBUG] 2025-08-24 20:28:52,338 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.chucks_angels.blueprint_chucks_angels
[DEBUG] 2025-08-24 20:28:52,338 - swarm.core.blueprint_discovery:138 - Found Blueprint class 'ChucksAngelsBlueprint' in module 'swarm.blueprints.chucks_angels.blueprint_chucks_angels'
[DEBUG] 2025-08-24 20:28:52,338 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'whiskeytango_foxtrot' in directory: whiskeytango_foxtrot
[DEBUG] 2025-08-24 20:28:52,338 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_whiskeytango_foxtrot.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/whiskeytango_foxtrot
[DEBUG] 2025-08-24 20:28:52,342 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.whiskeytango_foxtrot.blueprint_whiskeytango_foxtrot
[WARNING] 2025-08-24 20:28:52,343 - swarm.core.blueprint_discovery:172 - No BlueprintBase subclass found directly defined in module: swarm.blueprints.whiskeytango_foxtrot.blueprint_whiskeytango_foxtrot
[DEBUG] 2025-08-24 20:28:52,343 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'nebula_shellz' in directory: nebula_shellz
[DEBUG] 2025-08-24 20:28:52,343 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_nebula_shellz.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/nebula_shellz
[DEBUG] 2025-08-24 20:28:52,347 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.nebula_shellz.blueprint_nebula_shellz
[DEBUG] 2025-08-24 20:28:52,347 - swarm.core.blueprint_discovery:138 - Found Blueprint class 'NebuchaShellzzarBlueprint' in module 'swarm.blueprints.nebula_shellz.blueprint_nebula_shellz'
[DEBUG] 2025-08-24 20:28:52,347 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'family_ties' in directory: family_ties
[DEBUG] 2025-08-24 20:28:52,347 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_family_ties.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/family_ties
[DEBUG] 2025-08-24 20:28:52,348 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.family_ties.blueprint_family_ties
[WARNING] 2025-08-24 20:28:52,348 - swarm.core.blueprint_discovery:172 - No BlueprintBase subclass found directly defined in module: swarm.blueprints.family_ties.blueprint_family_ties
[DEBUG] 2025-08-24 20:28:52,348 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'common' in directory: common
[WARNING] 2025-08-24 20:28:52,348 - swarm.core.blueprint_discovery:90 - Skipping directory 'common': No suitable main Python file ('common.py' or 'blueprint_common.py') found.
[DEBUG] 2025-08-24 20:28:52,348 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'whinge_surf' in directory: whinge_surf
[DEBUG] 2025-08-24 20:28:52,348 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_whinge_surf.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/whinge_surf
[DEBUG] 2025-08-24 20:28:52,349 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.whinge_surf.blueprint_whinge_surf
[DEBUG] 2025-08-24 20:28:52,349 - swarm.core.blueprint_discovery:138 - Found Blueprint class 'WhingeSurfBlueprint' in module 'swarm.blueprints.whinge_surf.blueprint_whinge_surf'
[DEBUG] 2025-08-24 20:28:52,349 - swarm.core.blueprint_discovery:153 - Using class docstring for description of 'WhingeSurfBlueprint'.
[DEBUG] 2025-08-24 20:28:52,349 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'dynamic_team' in directory: dynamic_team
[DEBUG] 2025-08-24 20:28:52,349 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_dynamic_team.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/dynamic_team
[DEBUG] 2025-08-24 20:28:52,349 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.dynamic_team.blueprint_dynamic_team
[DEBUG] 2025-08-24 20:28:52,349 - swarm.core.blueprint_discovery:138 - Found Blueprint class 'DynamicTeamBlueprint' in module 'swarm.blueprints.dynamic_team.blueprint_dynamic_team'
[DEBUG] 2025-08-24 20:28:52,349 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'rue_code' in directory: rue_code
[DEBUG] 2025-08-24 20:28:52,349 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_rue_code.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/rue_code
[DEBUG] 2025-08-24 20:28:52,350 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.rue_code.blueprint_rue_code
[DEBUG] 2025-08-24 20:28:52,350 - swarm.core.blueprint_discovery:138 - Found Blueprint class 'RueCodeBlueprint' in module 'swarm.blueprints.rue_code.blueprint_rue_code'
[DEBUG] 2025-08-24 20:28:52,350 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'messenger' in directory: messenger
[WARNING] 2025-08-24 20:28:52,350 - swarm.core.blueprint_discovery:90 - Skipping directory 'messenger': No suitable main Python file ('messenger.py' or 'blueprint_messenger.py') found.
[DEBUG] 2025-08-24 20:28:52,350 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'unapologetic_poets' in directory: unapologetic_poets
[WARNING] 2025-08-24 20:28:52,350 - swarm.core.blueprint_discovery:90 - Skipping directory 'unapologetic_poets': No suitable main Python file ('unapologetic_poets.py' or 'blueprint_unapologetic_poets.py') found.
[DEBUG] 2025-08-24 20:28:52,350 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'omniplex' in directory: omniplex
[DEBUG] 2025-08-24 20:28:52,350 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_omniplex.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/omniplex
[DEBUG] 2025-08-24 20:28:52,351 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.omniplex.blueprint_omniplex
[DEBUG] 2025-08-24 20:28:52,351 - swarm.core.blueprint_discovery:138 - Found Blueprint class 'OmniplexBlueprint' in module 'swarm.blueprints.omniplex.blueprint_omniplex'
[DEBUG] 2025-08-24 20:28:52,351 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'gawd' in directory: gawd
[DEBUG] 2025-08-24 20:28:52,351 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_gawd.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/gawd
[DEBUG] 2025-08-24 20:28:52,352 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.gawd.blueprint_gawd
[DEBUG] 2025-08-24 20:28:52,352 - swarm.core.blueprint_discovery:138 - Found Blueprint class 'GAWDBlueprint' in module 'swarm.blueprints.gawd.blueprint_gawd'
[DEBUG] 2025-08-24 20:28:52,352 - swarm.core.blueprint_discovery:153 - Using class docstring for description of 'GAWDBlueprint'.
[DEBUG] 2025-08-24 20:28:52,352 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'codey' in directory: codey
[DEBUG] 2025-08-24 20:28:52,352 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_codey.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/codey
[DEBUG] 2025-08-24 20:28:52,353 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.codey.blueprint_codey
[DEBUG] 2025-08-24 20:28:52,353 - swarm.core.blueprint_discovery:138 - Found Blueprint class 'CodeyBlueprint' in module 'swarm.blueprints.codey.blueprint_codey'
[DEBUG] 2025-08-24 20:28:52,353 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'chatbot' in directory: chatbot
[DEBUG] 2025-08-24 20:28:52,353 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_chatbot.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/chatbot
[DEBUG] 2025-08-24 20:28:52,361 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.chatbot.blueprint_chatbot
[DEBUG] 2025-08-24 20:28:52,361 - swarm.core.blueprint_discovery:138 - Found Blueprint class 'ChatbotBlueprint' in module 'swarm.blueprints.chatbot.blueprint_chatbot'
[DEBUG] 2025-08-24 20:28:52,361 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'zeus' in directory: zeus
[DEBUG] 2025-08-24 20:28:52,361 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_zeus.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/zeus
[DEBUG] 2025-08-24 20:28:52,362 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.zeus.blueprint_zeus
[DEBUG] 2025-08-24 20:28:52,362 - swarm.core.blueprint_discovery:138 - Found Blueprint class 'ZeusBlueprint' in module 'swarm.blueprints.zeus.blueprint_zeus'
[DEBUG] 2025-08-24 20:28:52,362 - swarm.core.blueprint_discovery:153 - Using class docstring for description of 'ZeusBlueprint'.
[WARNING] 2025-08-24 20:28:52,362 - swarm.core.blueprint_discovery:133 - Multiple BlueprintBase subclasses found in blueprint_zeus.py. Using the first one found: 'zeus'. Previously found: 'ZeusCoordinatorBlueprint'.
[DEBUG] 2025-08-24 20:28:52,362 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'poets' in directory: poets
[DEBUG] 2025-08-24 20:28:52,362 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_poets.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/poets
[DEBUG] 2025-08-24 20:28:52,362 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.poets.blueprint_poets
[DEBUG] 2025-08-24 20:28:52,362 - swarm.core.blueprint_discovery:138 - Found Blueprint class 'PoetsBlueprint' in module 'swarm.blueprints.poets.blueprint_poets'
[DEBUG] 2025-08-24 20:28:52,363 - swarm.core.blueprint_discovery:153 - Using class docstring for description of 'PoetsBlueprint'.
[DEBUG] 2025-08-24 20:28:52,363 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'suggestion' in directory: suggestion
[DEBUG] 2025-08-24 20:28:52,363 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_suggestion.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/suggestion
# Last swarm update: 2025-08-24T20:28:52Z (UTC)
[DEBUG] 2025-08-24 20:28:52,367 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.suggestion.blueprint_suggestion
[DEBUG] 2025-08-24 20:28:52,367 - swarm.core.blueprint_discovery:138 - Found Blueprint class 'SuggestionBlueprint' in module 'swarm.blueprints.suggestion.blueprint_suggestion'
[DEBUG] 2025-08-24 20:28:52,367 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'dilbot' in directory: dilbot
[WARNING] 2025-08-24 20:28:52,368 - swarm.core.blueprint_discovery:90 - Skipping directory 'dilbot': No suitable main Python file ('dilbot.py' or 'blueprint_dilbot.py') found.
[DEBUG] 2025-08-24 20:28:52,368 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'mission_improbable' in directory: mission_improbable
[DEBUG] 2025-08-24 20:28:52,368 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_mission_improbable.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/mission_improbable
[DEBUG] 2025-08-24 20:28:52,368 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.mission_improbable.blueprint_mission_improbable
[DEBUG] 2025-08-24 20:28:52,368 - swarm.core.blueprint_discovery:138 - Found Blueprint class 'MissionImprobableBlueprint' in module 'swarm.blueprints.mission_improbable.blueprint_mission_improbable'
[DEBUG] 2025-08-24 20:28:52,368 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'flock' in directory: flock
[DEBUG] 2025-08-24 20:28:52,368 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_flock.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/flock
[DEBUG] 2025-08-24 20:28:52,369 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.flock.blueprint_flock
[WARNING] 2025-08-24 20:28:52,370 - swarm.core.blueprint_discovery:172 - No BlueprintBase subclass found directly defined in module: swarm.blueprints.flock.blueprint_flock
[DEBUG] 2025-08-24 20:28:52,370 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'stewie' in directory: stewie
[WARNING] 2025-08-24 20:28:52,370 - swarm.core.blueprint_discovery:90 - Skipping directory 'stewie': No suitable main Python file ('stewie.py' or 'blueprint_stewie.py') found.
[DEBUG] 2025-08-24 20:28:52,370 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'geese' in directory: geese
[DEBUG] 2025-08-24 20:28:52,370 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_geese.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/geese
[DEBUG] 2025-08-24 20:28:52,371 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.geese.blueprint_geese
[DEBUG] 2025-08-24 20:28:52,371 - swarm.core.blueprint_discovery:138 - Found Blueprint class 'GeeseBlueprint' in module 'swarm.blueprints.geese.blueprint_geese'
[DEBUG] 2025-08-24 20:28:52,371 - swarm.core.blueprint_discovery:153 - Using class docstring for description of 'GeeseBlueprint'.
[DEBUG] 2025-08-24 20:28:52,371 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'django_chat' in directory: django_chat
[DEBUG] 2025-08-24 20:28:52,371 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_django_chat.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/django_chat
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[DEBUG] 2025-08-24 20:28:52,336 - swarm.auth:40 - [Auth][StaticToken] Attempting static token authentication.
[ERROR] 2025-08-24 20:28:52,336 - swarm.auth:46 - [Auth][StaticToken] SWARM_API_KEY is not set in Django settings. Cannot use static token auth.
[DEBUG] 2025-08-24 20:28:52,337 - asyncio:54 - Using selector: EpollSelector
[INFO] 2025-08-24 20:28:52,338 - swarm.views.utils:99 - Discovering blueprint classes (sync)...
[DEBUG] 2025-08-24 20:28:52,374 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.django_chat.blueprint_django_chat
[DEBUG] 2025-08-24 20:28:52,375 - swarm.core.blueprint_discovery:138 - Found Blueprint class 'DjangoChatBlueprint' in module 'swarm.blueprints.django_chat.blueprint_django_chat'
[WARNING] 2025-08-24 20:28:52,375 - swarm.core.blueprint_discovery:143 - Blueprint class 'DjangoChatBlueprint' has a 'metadata' attribute that is not a dict. Type: <class 'property'>. Skipping metadata extraction for this field.
[DEBUG] 2025-08-24 20:28:52,375 - swarm.core.blueprint_discovery:153 - Using class docstring for description of 'DjangoChatBlueprint'.
[DEBUG] 2025-08-24 20:28:52,375 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'digitalbutlers' in directory: digitalbutlers
[DEBUG] 2025-08-24 20:28:52,375 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_digitalbutlers.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/digitalbutlers
[DEBUG] 2025-08-24 20:28:52,375 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.digitalbutlers.blueprint_digitalbutlers
[WARNING] 2025-08-24 20:28:52,375 - swarm.core.blueprint_discovery:172 - No BlueprintBase subclass found directly defined in module: swarm.blueprints.digitalbutlers.blueprint_digitalbutlers
[DEBUG] 2025-08-24 20:28:52,375 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'echocraft' in directory: echocraft
[DEBUG] 2025-08-24 20:28:52,375 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_echocraft.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/echocraft
[DEBUG] 2025-08-24 20:28:52,376 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.echocraft.blueprint_echocraft
[DEBUG] 2025-08-24 20:28:52,376 - swarm.core.blueprint_discovery:138 - Found Blueprint class 'EchoCraftBlueprint' in module 'swarm.blueprints.echocraft.blueprint_echocraft'
[DEBUG] 2025-08-24 20:28:52,376 - swarm.core.blueprint_discovery:153 - Using class docstring for description of 'EchoCraftBlueprint'.
[DEBUG] 2025-08-24 20:28:52,376 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'hello_world' in directory: hello_world
[WARNING] 2025-08-24 20:28:52,376 - swarm.core.blueprint_discovery:90 - Skipping directory 'hello_world': No suitable main Python file ('hello_world.py' or 'blueprint_hello_world.py') found.
[DEBUG] 2025-08-24 20:28:52,376 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'llm_test_judge' in directory: llm_test_judge
[WARNING] 2025-08-24 20:28:52,376 - swarm.core.blueprint_discovery:90 - Skipping directory 'llm_test_judge': No suitable main Python file ('llm_test_judge.py' or 'blueprint_llm_test_judge.py') found.
[DEBUG] 2025-08-24 20:28:52,376 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'jeeves' in directory: jeeves
[DEBUG] 2025-08-24 20:28:52,376 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_jeeves.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/jeeves
[DEBUG] 2025-08-24 20:28:52,377 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.jeeves.blueprint_jeeves
[DEBUG] 2025-08-24 20:28:52,377 - swarm.core.blueprint_discovery:138 - Found Blueprint class 'JeevesBlueprint' in module 'swarm.blueprints.jeeves.blueprint_jeeves'
[DEBUG] 2025-08-24 20:28:52,377 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'gaggle' in directory: gaggle
[WARNING] 2025-08-24 20:28:52,377 - swarm.core.blueprint_discovery:90 - Skipping directory 'gaggle': No suitable main Python file ('gaggle.py' or 'blueprint_gaggle.py') found.
[DEBUG] 2025-08-24 20:28:52,377 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'monkai_magic' in directory: monkai_magic
[DEBUG] 2025-08-24 20:28:52,377 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_monkai_magic.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/monkai_magic
[DEBUG] 2025-08-24 20:28:52,381 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.monkai_magic.blueprint_monkai_magic
[DEBUG] 2025-08-24 20:28:52,381 - swarm.core.blueprint_discovery:138 - Found Blueprint class 'MonkaiMagicBlueprint' in module 'swarm.blueprints.monkai_magic.blueprint_monkai_magic'
[DEBUG] 2025-08-24 20:28:52,381 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'mcp_demo' in directory: mcp_demo
[DEBUG] 2025-08-24 20:28:52,381 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_mcp_demo.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/mcp_demo
[INFO] 2025-08-24 20:28:52,381 - swarm.blueprints.mcp_demo.blueprint_mcp_demo:47 - Last swarm update: 2025-08-24T20:28:52Z (UTC)
[DEBUG] 2025-08-24 20:28:52,381 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.mcp_demo.blueprint_mcp_demo
[DEBUG] 2025-08-24 20:28:52,382 - swarm.core.blueprint_discovery:138 - Found Blueprint class 'MCPDemoBlueprint' in module 'swarm.blueprints.mcp_demo.blueprint_mcp_demo'
[INFO] 2025-08-24 20:28:52,382 - swarm.core.blueprint_discovery:182 - Blueprint discovery complete. Found 19 blueprints: ['chucks_angels', 'nebula_shellz', 'whinge_surf', 'dynamic_team', 'rue_code', 'omniplex', 'gawd', 'codey', 'chatbot', 'zeus', 'poets', 'suggestion', 'mission_improbable', 'geese', 'django_chat', 'echocraft', 'jeeves', 'monkai_magic', 'mcp_demo']
[INFO] 2025-08-24 20:28:52,382 - swarm.views.utils:114 - Found blueprint classes: ['chucks_angels', 'nebula_shellz', 'whinge_surf', 'dynamic_team', 'rue_code', 'omniplex', 'gawd', 'codey', 'chatbot', 'zeus', 'poets', 'suggestion', 'mission_improbable', 'geese', 'django_chat', 'echocraft', 'jeeves', 'monkai_magic', 'mcp_demo']
----------------------------------------------------------------------------------------------------------------------------- Captured log call ------------------------------------------------------------------------------------------------------------------------------
DEBUG    asyncio:selector_events.py:54 Using selector: EpollSelector
__________________________________________________________________________________________________________ test_models_non_mapping_iterable_gracefully_handles_type __________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[DEBUG] 2025-08-24 20:28:52,387 - swarm.auth:40 - [Auth][StaticToken] Attempting static token authentication.
[ERROR] 2025-08-24 20:28:52,387 - swarm.auth:46 - [Auth][StaticToken] SWARM_API_KEY is not set in Django settings. Cannot use static token auth.
____________________________________________________________________________________________________________________________ test_zeus_run_method ____________________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[INFO] 2025-08-24 20:28:52,603 - swarm.blueprints.zeus.blueprint_zeus:79 - ZeusCoordinatorBlueprint run method called.
________________________________________________________________________________________________________________________ test_echocraft_blueprint_run ________________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[INFO] 2025-08-24 20:28:52,620 - swarm.blueprints.echocraft.blueprint_echocraft:247 - EchoCraftBlueprint run called with 1 messages.
[DEBUG] 2025-08-24 20:28:52,620 - swarm.blueprints.echocraft.blueprint_echocraft:257 - Found last user message: Hello
[INFO] 2025-08-24 20:28:52,620 - swarm.blueprints.echocraft.blueprint_echocraft:261 - EchoCraftBlueprint yielding: Echo: Hello
[DEBUG] 2025-08-24 20:28:52,620 - swarm.core.blueprint_base:439 - [DEBUG _resolve_llm_profile] blueprint_id/name: test_echo_run
[DEBUG] 2025-08-24 20:28:52,620 - swarm.core.blueprint_base:440 - [DEBUG _resolve_llm_profile] self._config: {}
[DEBUG] 2025-08-24 20:28:52,620 - swarm.core.blueprint_base:443 - [DEBUG _resolve_llm_profile] Using programmatic override: default
[DEBUG] 2025-08-24 20:28:52,620 - swarm.core.blueprint_base:489 - [DEBUG _resolve_llm_profile] Final resolved profile: default
[INFO] 2025-08-24 20:28:52,620 - swarm.blueprints.echocraft.blueprint_echocraft:286 - EchoCraftBlueprint run finished.
__________________________________________________________________________________________________________________ test_echocraft_blueprint_no_user_message __________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[INFO] 2025-08-24 20:28:52,630 - swarm.blueprints.echocraft.blueprint_echocraft:247 - EchoCraftBlueprint run called with 1 messages.
[INFO] 2025-08-24 20:28:52,630 - swarm.blueprints.echocraft.blueprint_echocraft:261 - EchoCraftBlueprint yielding: Echo: No user message found.
[DEBUG] 2025-08-24 20:28:52,630 - swarm.core.blueprint_base:439 - [DEBUG _resolve_llm_profile] blueprint_id/name: test_echo_nouser
[DEBUG] 2025-08-24 20:28:52,631 - swarm.core.blueprint_base:440 - [DEBUG _resolve_llm_profile] self._config: {}
[DEBUG] 2025-08-24 20:28:52,631 - swarm.core.blueprint_base:443 - [DEBUG _resolve_llm_profile] Using programmatic override: default
[DEBUG] 2025-08-24 20:28:52,631 - swarm.core.blueprint_base:489 - [DEBUG _resolve_llm_profile] Final resolved profile: default
[INFO] 2025-08-24 20:28:52,631 - swarm.blueprints.echocraft.blueprint_echocraft:286 - EchoCraftBlueprint run finished.
_________________________________________________________________________________________________________________ test_echocraft_blueprint_multiple_messages _________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[INFO] 2025-08-24 20:28:52,637 - swarm.blueprints.echocraft.blueprint_echocraft:247 - EchoCraftBlueprint run called with 3 messages.
[DEBUG] 2025-08-24 20:28:52,637 - swarm.blueprints.echocraft.blueprint_echocraft:257 - Found last user message: Second
[INFO] 2025-08-24 20:28:52,637 - swarm.blueprints.echocraft.blueprint_echocraft:261 - EchoCraftBlueprint yielding: Echo: Second
[DEBUG] 2025-08-24 20:28:52,637 - swarm.core.blueprint_base:439 - [DEBUG _resolve_llm_profile] blueprint_id/name: test_echo_multi
[DEBUG] 2025-08-24 20:28:52,637 - swarm.core.blueprint_base:440 - [DEBUG _resolve_llm_profile] self._config: {}
[DEBUG] 2025-08-24 20:28:52,637 - swarm.core.blueprint_base:443 - [DEBUG _resolve_llm_profile] Using programmatic override: default
[DEBUG] 2025-08-24 20:28:52,637 - swarm.core.blueprint_base:489 - [DEBUG _resolve_llm_profile] Final resolved profile: default
[INFO] 2025-08-24 20:28:52,637 - swarm.blueprints.echocraft.blueprint_echocraft:286 - EchoCraftBlueprint run finished.
_________________________________________________________________________________________________________________________ test_stewie_agent_creation _________________________________________________________________________________________________________________________
--------------------------------------------------------------------------------------------------------------------------- Captured stdout setup ----------------------------------------------------------------------------------------------------------------------------
[STEWIE DEBUG] Loaded config from: /mnt/models/open-swarm-mcp/swarm_config.json
{'blueprints': {'defaults': {'default_markdown_cli': True,
                             'max_llm_calls': 10}},
 'llm': {},
 'mcpServers': {},
 'profiles': {'default': {'llm': 'gpt-4', 'temperature': 0.7}}}
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[DEBUG] 2025-08-24 20:28:52,900 - swarm.blueprints.stewie.blueprint_family_ties:156 - Creating Stewie agent team...
[DEBUG] 2025-08-24 20:28:52,900 - swarm.blueprints.stewie.blueprint_family_ties:161 - Using LLM profile 'default' for Stewie agent.
[DEBUG] 2025-08-24 20:28:52,900 - swarm.blueprints.stewie.blueprint_family_ties:121 - Creating new Model instance for profile 'default'.
[DEBUG] 2025-08-24 20:28:52,900 - swarm.blueprints.stewie.blueprint_family_ties:125 - [STEWIE DEBUG] llm config keys: ['default']
[DEBUG] 2025-08-24 20:28:52,946 - swarm.blueprints.stewie.blueprint_family_ties:147 - Instantiating OpenAIChatCompletionsModel(model='gpt-mock') for 'default'.
[WARNING] 2025-08-24 20:28:52,946 - swarm.blueprints.stewie.blueprint_family_ties:173 - Required MCP server 'server-wp-mcp' not found or failed to start.
[DEBUG] 2025-08-24 20:28:52,949 - swarm.blueprints.stewie.blueprint_family_ties:211 - Agents created: Stewie (main), PeterGrifton, BrianGrifton (helpers as tools).
_________________________________________________________________________________________________________________________ test_story_generation_flow _________________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[INFO] 2025-08-24 20:28:52,984 - swarm:54 - GeeseBlueprint run called with prompt: Tell a story
-------------------------------------------------------------------------------------------------------------------------- Captured stderr teardown --------------------------------------------------------------------------------------------------------------------------
[ERROR] 2025-08-24 20:28:52,985 - asyncio:1758 - Task was destroyed but it is pending!
task: <Task pending name='Task-22' coro=<<async_generator_athrow without __name__>()>>
--------------------------------------------------------------------------------------------------------------------------- Captured log teardown ----------------------------------------------------------------------------------------------------------------------------
ERROR    asyncio:base_events.py:1758 Task was destroyed but it is pending!
task: <Task pending name='Task-22' coro=<<async_generator_athrow without __name__>()>>
_________________________________________________________________________________________________________________________ test_jeeves_agent_creation _________________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[DEBUG] 2025-08-24 20:28:53,007 - swarm.blueprints.jeeves.blueprint_jeeves:274 - Creating Jeeves agent team...
[DEBUG] 2025-08-24 20:28:53,007 - swarm.blueprints.jeeves.blueprint_jeeves:278 - Using LLM profile 'default' for Jeeves agents.
[DEBUG] 2025-08-24 20:28:53,007 - swarm.blueprints.jeeves.blueprint_jeeves:188 - Creating new Model instance for profile 'default'.
[DEBUG] 2025-08-24 20:28:53,007 - swarm.blueprints.jeeves.blueprint_jeeves:206 - Creating new AsyncOpenAI client for profile 'default' with config: {}
[DEBUG] 2025-08-24 20:28:53,053 - swarm.blueprints.jeeves.blueprint_jeeves:213 - Instantiating OpenAIChatCompletionsModel(model='gpt-mock') for profile 'default'.
[DEBUG] 2025-08-24 20:28:53,056 - swarm.blueprints.jeeves.blueprint_jeeves:320 - Jeeves team created: Jeeves (Coordinator), Mycroft (Search), Gutenberg (Home).
_________________________________________________________________________________________________________________________ test_jeeves_cli_execution __________________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stdout call ----------------------------------------------------------------------------------------------------------------------------
CLI Output for Jeeves test:
[Jeeves CLI] SWARM_TEST_MODE active.
[SPINNER] Polishing the silver
  Jeeves Spinner | Jeeves Spinner 
 Searching for: 'Turn on the lights'          
 Jeeves Search                                
 Searching for: 'Turn on the lights'          
 Generating.                                  
 Generating..                                 
 Generating...                                
 Running...                                   
 Results: 2                                   
 Processed                                    
                                            
  [Generating... Taking longer than expected] 

  Jeeves Spinner | Jeeves Spinner 
 Spinner progress for: 'Turn on the lights' 
 Jeeves Spinner State: Generating.          
 Progress: Spinner 1/5 [Generating.]        

  Jeeves Spinner | Jeeves Spinner 
 Spinner progress for: 'Turn on the lights' 
 Jeeves Spinner State: Generating..         
 Progress: Spinner 2/5 [Generating..]       

  Jeeves Spinner | Jeeves Spinner 
 Spinner progress for: 'Turn on the lights' 
 Jeeves Spinner State: Generating...        
 Progress: Spinner 3/5 [Generating...]      

  Jeeves Spinner | Jeeves Spinner 
 Spinner progress for: 'Turn on the lights' 
 Jeeves Spinner State: Running...           
 Progress: Spinner 4/5 [Running...]         

  Jeeves Spinner | Jeeves Spinner 
 Spinner progress for: 'Turn on the lights'                        
 Jeeves Spinner State: Generating... Taking longer than expected   
 Progress: Spinner 5/5 [Generating... Taking longer than expected] 

  Jeeves Results | Jeeves Results 
 Jeeves agent response for: 'Turn on the lights' 
 Jeeves agent response for: 'Turn on the lights' 
 Found 2 results.                                
 Processed                                       
 Progress: Processed [Done]                      

Jeeves: Test mode response for: Turn on the lights


________________________________________________________________________________________________________________________ test_mcpdemo_agent_creation _________________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[WARNING] 2025-08-24 20:28:54,623 - src.swarm.blueprints.mcp_demo.blueprint_mcp_demo:343 - Sage agent created, but missing required MCP server(s): memory, filesystem. Functionality will be limited.
[WARNING] 2025-08-24 20:28:54,670 - src.swarm.blueprints.mcp_demo.blueprint_mcp_demo:343 - Sage agent created, but missing required MCP server(s): memory, filesystem. Functionality will be limited.
[WARNING] 2025-08-24 20:28:54,717 - src.swarm.blueprints.mcp_demo.blueprint_mcp_demo:343 - Sage agent created, but missing required MCP server(s): memory, filesystem. Functionality will be limited.
[WARNING] 2025-08-24 20:28:54,765 - src.swarm.blueprints.mcp_demo.blueprint_mcp_demo:343 - Sage agent created, but missing required MCP server(s): memory, filesystem. Functionality will be limited.
----------------------------------------------------------------------------------------------------------------------------- Captured log call ------------------------------------------------------------------------------------------------------------------------------
WARNING  src.swarm.blueprints.mcp_demo.blueprint_mcp_demo:blueprint_mcp_demo.py:343 Sage agent created, but missing required MCP server(s): memory, filesystem. Functionality will be limited.
WARNING  src.swarm.blueprints.mcp_demo.blueprint_mcp_demo:blueprint_mcp_demo.py:343 Sage agent created, but missing required MCP server(s): memory, filesystem. Functionality will be limited.
WARNING  src.swarm.blueprints.mcp_demo.blueprint_mcp_demo:blueprint_mcp_demo.py:343 Sage agent created, but missing required MCP server(s): memory, filesystem. Functionality will be limited.
WARNING  src.swarm.blueprints.mcp_demo.blueprint_mcp_demo:blueprint_mcp_demo.py:343 Sage agent created, but missing required MCP server(s): memory, filesystem. Functionality will be limited.
__________________________________________________________________________________________________________________________ test_mcpdemo_bad_config ___________________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[WARNING] 2025-08-24 20:28:54,821 - src.swarm.blueprints.mcp_demo.blueprint_mcp_demo:343 - Sage agent created, but missing required MCP server(s): memory, filesystem. Functionality will be limited.
----------------------------------------------------------------------------------------------------------------------------- Captured log call ------------------------------------------------------------------------------------------------------------------------------
WARNING  src.swarm.blueprints.mcp_demo.blueprint_mcp_demo:blueprint_mcp_demo.py:343 Sage agent created, but missing required MCP server(s): memory, filesystem. Functionality will be limited.
____________________________________________________________________________________________________________________ test_mcpdemo_filesystem_interaction _____________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[WARNING] 2025-08-24 20:28:54,875 - src.swarm.blueprints.mcp_demo.blueprint_mcp_demo:343 - Sage agent created, but missing required MCP server(s): memory, filesystem. Functionality will be limited.
----------------------------------------------------------------------------------------------------------------------------- Captured log call ------------------------------------------------------------------------------------------------------------------------------
WARNING  src.swarm.blueprints.mcp_demo.blueprint_mcp_demo:blueprint_mcp_demo.py:343 Sage agent created, but missing required MCP server(s): memory, filesystem. Functionality will be limited.
______________________________________________________________________________________________________________________ test_mcpdemo_memory_interaction _______________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[WARNING] 2025-08-24 20:28:54,929 - src.swarm.blueprints.mcp_demo.blueprint_mcp_demo:343 - Sage agent created, but missing required MCP server(s): memory, filesystem. Functionality will be limited.
----------------------------------------------------------------------------------------------------------------------------- Captured log call ------------------------------------------------------------------------------------------------------------------------------
WARNING  src.swarm.blueprints.mcp_demo.blueprint_mcp_demo:blueprint_mcp_demo.py:343 Sage agent created, but missing required MCP server(s): memory, filesystem. Functionality will be limited.
________________________________________________________________________________________________________________________ test_mission_agent_creation _________________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[DEBUG] 2025-08-24 20:28:54,948 - swarm.blueprints.mission_improbable.blueprint_mission_improbable:253 - Creating Mission Improbable agent team...
[DEBUG] 2025-08-24 20:28:54,948 - swarm.blueprints.mission_improbable.blueprint_mission_improbable:170 - Loaded config for agent 'JimFlimsy' from SQLite.
[DEBUG] 2025-08-24 20:28:54,948 - swarm.blueprints.mission_improbable.blueprint_mission_improbable:198 - Creating new Model instance for profile 'default'.
[DEBUG] 2025-08-24 20:28:54,948 - swarm.blueprints.mission_improbable.blueprint_mission_improbable:231 - Creating new AsyncOpenAI client for 'default': {}
[DEBUG] 2025-08-24 20:28:54,994 - swarm.blueprints.mission_improbable.blueprint_mission_improbable:238 - Instantiating OpenAIChatCompletionsModel(model='gpt-mock') for 'default'.
[WARNING] 2025-08-24 20:28:54,995 - swarm.blueprints.mission_improbable.blueprint_mission_improbable:173 - No config found for agent 'CinnamonToast' in SQLite. Using defaults.
[WARNING] 2025-08-24 20:28:54,995 - swarm.blueprints.mission_improbable.blueprint_mission_improbable:180 - Using hardcoded default config for agent 'CinnamonToast'.
[DEBUG] 2025-08-24 20:28:54,995 - swarm.blueprints.mission_improbable.blueprint_mission_improbable:196 - Using cached Model instance for profile 'default'.
[WARNING] 2025-08-24 20:28:54,995 - swarm.blueprints.mission_improbable.blueprint_mission_improbable:173 - No config found for agent 'RollinFumble' in SQLite. Using defaults.
[WARNING] 2025-08-24 20:28:54,995 - swarm.blueprints.mission_improbable.blueprint_mission_improbable:180 - Using hardcoded default config for agent 'RollinFumble'.
[DEBUG] 2025-08-24 20:28:54,995 - swarm.blueprints.mission_improbable.blueprint_mission_improbable:196 - Using cached Model instance for profile 'default'.
[DEBUG] 2025-08-24 20:28:54,998 - swarm.blueprints.mission_improbable.blueprint_mission_improbable:285 - Mission Improbable agents created. Starting with JimFlimsy.
___________________________________________________________________________________________________________________ test_omniplex_agent_creation_all_types ___________________________________________________________________________________________________________________
--------------------------------------------------------------------------------------------------------------------------- Captured stderr setup ----------------------------------------------------------------------------------------------------------------------------
[WARNING] 2025-08-24 20:28:55,013 - swarm.blueprints.omniplex.blueprint_omniplex:55 - OmniplexBlueprint 'omniplex_test': self._config is None after super().__init__(). mcp_server_configs will be empty. This is expected if _load_configuration is mocked in tests.
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[DEBUG] 2025-08-24 20:28:55,014 - swarm.blueprints.omniplex.blueprint_omniplex:62 - Dynamically creating agents for OmniplexBlueprint...
[DEBUG] 2025-08-24 20:28:55,014 - swarm.core.blueprint_base:439 - [DEBUG _resolve_llm_profile] blueprint_id/name: omniplex_test
[DEBUG] 2025-08-24 20:28:55,014 - swarm.core.blueprint_base:440 - [DEBUG _resolve_llm_profile] self._config: {'llm': {'default': {'provider': 'openai', 'model': 'gpt-mock-omniplex'}}, 'mcpServers': {'npx_server': {'command': 'npx some-tool', 'type': 'npx'}, 'uvx_server': {'command': 'uvx another-tool', 'type': 'uvx'}, 'other_server': {'command': 'python script.py', 'type': 'other'}}, 'settings': {'default_llm_profile': 'default'}, 'blueprints': {'omniplex_test': {}}}
[DEBUG] 2025-08-24 20:28:55,014 - swarm.core.blueprint_base:451 - [DEBUG _resolve_llm_profile] Checking per-blueprint config for: omniplex_test
[DEBUG] 2025-08-24 20:28:55,014 - swarm.core.blueprint_base:453 - [DEBUG _resolve_llm_profile] bp_cfg: {}
[DEBUG] 2025-08-24 20:28:55,014 - swarm.core.blueprint_base:489 - [DEBUG _resolve_llm_profile] Final resolved profile: default
[DEBUG] 2025-08-24 20:28:55,014 - swarm.blueprints.omniplex.blueprint_omniplex:68 - Using LLM profile 'default' for Omniplex agents.
[DEBUG] 2025-08-24 20:28:55,016 - swarm.blueprints.omniplex.blueprint_omniplex:110 - Categorized MCPs - NPX: ['npx_server'], UVX: ['uvx_server'], Other: ['other_server']
[INFO] 2025-08-24 20:28:55,016 - swarm.blueprints.omniplex.blueprint_omniplex:114 - Creating Amazo for npx servers: ['npx_server']
[INFO] 2025-08-24 20:28:55,017 - swarm.blueprints.omniplex.blueprint_omniplex:120 - Creating Rogue for uvx servers: ['uvx_server']
[INFO] 2025-08-24 20:28:55,018 - swarm.blueprints.omniplex.blueprint_omniplex:126 - Creating Sylar for other servers: ['other_server']
[INFO] 2025-08-24 20:28:55,019 - swarm.blueprints.omniplex.blueprint_omniplex:132 - Omniplex Coordinator created with tools for: ['Amazo', 'Rogue', 'Sylar']
___________________________________________________________________________________________________________________ test_omniplex_agent_creation_only_npx ____________________________________________________________________________________________________________________
--------------------------------------------------------------------------------------------------------------------------- Captured stderr setup ----------------------------------------------------------------------------------------------------------------------------
[WARNING] 2025-08-24 20:28:55,142 - swarm.blueprints.omniplex.blueprint_omniplex:55 - OmniplexBlueprint 'omniplex_test': self._config is None after super().__init__(). mcp_server_configs will be empty. This is expected if _load_configuration is mocked in tests.
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[DEBUG] 2025-08-24 20:28:55,144 - swarm.blueprints.omniplex.blueprint_omniplex:62 - Dynamically creating agents for OmniplexBlueprint...
[DEBUG] 2025-08-24 20:28:55,144 - swarm.core.blueprint_base:439 - [DEBUG _resolve_llm_profile] blueprint_id/name: omniplex_test
[DEBUG] 2025-08-24 20:28:55,144 - swarm.core.blueprint_base:440 - [DEBUG _resolve_llm_profile] self._config: {'llm': {'default': {'provider': 'openai', 'model': 'gpt-mock-omniplex'}}, 'mcpServers': {'npx_server': {'command': 'npx some-tool', 'type': 'npx'}, 'uvx_server': {'command': 'uvx another-tool', 'type': 'uvx'}, 'other_server': {'command': 'python script.py', 'type': 'other'}}, 'settings': {'default_llm_profile': 'default'}, 'blueprints': {'omniplex_test': {}}}
[DEBUG] 2025-08-24 20:28:55,144 - swarm.core.blueprint_base:451 - [DEBUG _resolve_llm_profile] Checking per-blueprint config for: omniplex_test
[DEBUG] 2025-08-24 20:28:55,144 - swarm.core.blueprint_base:453 - [DEBUG _resolve_llm_profile] bp_cfg: {}
[DEBUG] 2025-08-24 20:28:55,144 - swarm.core.blueprint_base:489 - [DEBUG _resolve_llm_profile] Final resolved profile: default
[DEBUG] 2025-08-24 20:28:55,144 - swarm.blueprints.omniplex.blueprint_omniplex:68 - Using LLM profile 'default' for Omniplex agents.
[DEBUG] 2025-08-24 20:28:55,144 - swarm.blueprints.omniplex.blueprint_omniplex:110 - Categorized MCPs - NPX: ['npx_server'], UVX: [], Other: []
[INFO] 2025-08-24 20:28:55,144 - swarm.blueprints.omniplex.blueprint_omniplex:114 - Creating Amazo for npx servers: ['npx_server']
[INFO] 2025-08-24 20:28:55,146 - swarm.blueprints.omniplex.blueprint_omniplex:123 - No started uvx servers for Rogue.
[INFO] 2025-08-24 20:28:55,146 - swarm.blueprints.omniplex.blueprint_omniplex:129 - No other started servers for Sylar.
[INFO] 2025-08-24 20:28:55,146 - swarm.blueprints.omniplex.blueprint_omniplex:132 - Omniplex Coordinator created with tools for: ['Amazo']
_____________________________________________________________________________________________________________________ test_omniplex_delegation_to_amazo ______________________________________________________________________________________________________________________
--------------------------------------------------------------------------------------------------------------------------- Captured stderr setup ----------------------------------------------------------------------------------------------------------------------------
[WARNING] 2025-08-24 20:28:55,151 - swarm.blueprints.omniplex.blueprint_omniplex:55 - OmniplexBlueprint 'omniplex_test': self._config is None after super().__init__(). mcp_server_configs will be empty. This is expected if _load_configuration is mocked in tests.
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[DEBUG] 2025-08-24 20:28:55,152 - swarm.blueprints.omniplex.blueprint_omniplex:62 - Dynamically creating agents for OmniplexBlueprint...
[DEBUG] 2025-08-24 20:28:55,152 - swarm.core.blueprint_base:439 - [DEBUG _resolve_llm_profile] blueprint_id/name: omniplex_test
[DEBUG] 2025-08-24 20:28:55,152 - swarm.core.blueprint_base:440 - [DEBUG _resolve_llm_profile] self._config: {'llm': {'default': {'provider': 'openai', 'model': 'gpt-mock-omniplex'}}, 'mcpServers': {'npx_server': {'command': 'npx some-tool', 'type': 'npx'}, 'uvx_server': {'command': 'uvx another-tool', 'type': 'uvx'}, 'other_server': {'command': 'python script.py', 'type': 'other'}}, 'settings': {'default_llm_profile': 'default'}, 'blueprints': {'omniplex_test': {}}}
[DEBUG] 2025-08-24 20:28:55,152 - swarm.core.blueprint_base:451 - [DEBUG _resolve_llm_profile] Checking per-blueprint config for: omniplex_test
[DEBUG] 2025-08-24 20:28:55,152 - swarm.core.blueprint_base:453 - [DEBUG _resolve_llm_profile] bp_cfg: {}
[DEBUG] 2025-08-24 20:28:55,152 - swarm.core.blueprint_base:489 - [DEBUG _resolve_llm_profile] Final resolved profile: default
[DEBUG] 2025-08-24 20:28:55,152 - swarm.blueprints.omniplex.blueprint_omniplex:68 - Using LLM profile 'default' for Omniplex agents.
[DEBUG] 2025-08-24 20:28:55,153 - swarm.blueprints.omniplex.blueprint_omniplex:110 - Categorized MCPs - NPX: ['npx_server'], UVX: ['uvx_server'], Other: ['other_server']
[INFO] 2025-08-24 20:28:55,153 - swarm.blueprints.omniplex.blueprint_omniplex:114 - Creating Amazo for npx servers: ['npx_server']
[INFO] 2025-08-24 20:28:55,154 - swarm.blueprints.omniplex.blueprint_omniplex:120 - Creating Rogue for uvx servers: ['uvx_server']
[INFO] 2025-08-24 20:28:55,155 - swarm.blueprints.omniplex.blueprint_omniplex:126 - Creating Sylar for other servers: ['other_server']
[INFO] 2025-08-24 20:28:55,156 - swarm.blueprints.omniplex.blueprint_omniplex:132 - Omniplex Coordinator created with tools for: ['Amazo', 'Rogue', 'Sylar']
________________________________________________________________________________________________________________________ test_omniplex_cli_execution _________________________________________________________________________________________________________________________
--------------------------------------------------------------------------------------------------------------------------- Captured stderr setup ----------------------------------------------------------------------------------------------------------------------------
[WARNING] 2025-08-24 20:28:55,161 - swarm.blueprints.omniplex.blueprint_omniplex:55 - OmniplexBlueprint 'omniplex_test': self._config is None after super().__init__(). mcp_server_configs will be empty. This is expected if _load_configuration is mocked in tests.
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[INFO] 2025-08-24 20:28:55,162 - swarm.blueprints.omniplex.blueprint_omniplex:136 - OmniplexBlueprint run method called.
[DEBUG] 2025-08-24 20:28:55,162 - swarm.blueprints.omniplex.blueprint_omniplex:62 - Dynamically creating agents for OmniplexBlueprint...
[DEBUG] 2025-08-24 20:28:55,162 - swarm.core.blueprint_base:439 - [DEBUG _resolve_llm_profile] blueprint_id/name: omniplex_test
[DEBUG] 2025-08-24 20:28:55,162 - swarm.core.blueprint_base:440 - [DEBUG _resolve_llm_profile] self._config: {'llm': {'default': {'provider': 'openai', 'model': 'gpt-mock-omniplex'}}, 'mcpServers': {'npx_server': {'command': 'npx some-tool', 'type': 'npx'}, 'uvx_server': {'command': 'uvx another-tool', 'type': 'uvx'}, 'other_server': {'command': 'python script.py', 'type': 'other'}}, 'settings': {'default_llm_profile': 'default'}, 'blueprints': {'omniplex_test': {}}}
[DEBUG] 2025-08-24 20:28:55,162 - swarm.core.blueprint_base:451 - [DEBUG _resolve_llm_profile] Checking per-blueprint config for: omniplex_test
[DEBUG] 2025-08-24 20:28:55,162 - swarm.core.blueprint_base:453 - [DEBUG _resolve_llm_profile] bp_cfg: {}
[DEBUG] 2025-08-24 20:28:55,162 - swarm.core.blueprint_base:489 - [DEBUG _resolve_llm_profile] Final resolved profile: default
[DEBUG] 2025-08-24 20:28:55,163 - swarm.blueprints.omniplex.blueprint_omniplex:68 - Using LLM profile 'default' for Omniplex agents.
[DEBUG] 2025-08-24 20:28:55,163 - swarm.blueprints.omniplex.blueprint_omniplex:110 - Categorized MCPs - NPX: ['npx_server'], UVX: ['uvx_server'], Other: ['other_server']
[INFO] 2025-08-24 20:28:55,163 - swarm.blueprints.omniplex.blueprint_omniplex:114 - Creating Amazo for npx servers: ['npx_server']
[INFO] 2025-08-24 20:28:55,164 - swarm.blueprints.omniplex.blueprint_omniplex:120 - Creating Rogue for uvx servers: ['uvx_server']
[INFO] 2025-08-24 20:28:55,165 - swarm.blueprints.omniplex.blueprint_omniplex:126 - Creating Sylar for other servers: ['other_server']
[INFO] 2025-08-24 20:28:55,166 - swarm.blueprints.omniplex.blueprint_omniplex:132 - Omniplex Coordinator created with tools for: ['Amazo', 'Rogue', 'Sylar']
________________________________________________________________________________________________________________________ test_poets_db_initialization ________________________________________________________________________________________________________________________
--------------------------------------------------------------------------------------------------------------------------- Captured stderr setup ----------------------------------------------------------------------------------------------------------------------------
[INFO] 2025-08-24 20:28:55,170 - swarm:82 - Initializing SQLite database at: /tmp/pytest-of-chatgpt/pytest-11/test_poets_db_initialization0/test_swarm_instructions.db for PoetsBlueprint 'poets-society'
[DEBUG] 2025-08-24 20:28:55,177 - swarm:117 - Table 'agent_instructions' ensured in /tmp/pytest-of-chatgpt/pytest-11/test_poets_db_initialization0/test_swarm_instructions.db
[INFO] 2025-08-24 20:28:55,180 - swarm:158 - Default poet instructions inserted/verified in /tmp/pytest-of-chatgpt/pytest-11/test_poets_db_initialization0/test_swarm_instructions.db.
[INFO] 2025-08-24 20:28:55,180 - swarm:94 - PoetsBlueprint 'poets-society' configured. Starting poet: Gritty Buk
_________________________________________________________________________________________________________________________ test_poets_agent_creation __________________________________________________________________________________________________________________________
--------------------------------------------------------------------------------------------------------------------------- Captured stderr setup ----------------------------------------------------------------------------------------------------------------------------
[INFO] 2025-08-24 20:28:55,184 - swarm:82 - Initializing SQLite database at: /tmp/pytest-of-chatgpt/pytest-11/test_poets_agent_creation0/test_swarm_instructions.db for PoetsBlueprint 'poets-society'
[DEBUG] 2025-08-24 20:28:55,189 - swarm:117 - Table 'agent_instructions' ensured in /tmp/pytest-of-chatgpt/pytest-11/test_poets_agent_creation0/test_swarm_instructions.db
[INFO] 2025-08-24 20:28:55,193 - swarm:158 - Default poet instructions inserted/verified in /tmp/pytest-of-chatgpt/pytest-11/test_poets_agent_creation0/test_swarm_instructions.db.
[INFO] 2025-08-24 20:28:55,193 - swarm:94 - PoetsBlueprint 'poets-society' configured. Starting poet: Gritty Buk
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[DEBUG] 2025-08-24 20:28:55,194 - swarm:242 - Creating Poets agent team. Received mcp_servers: [<MagicMock id='280065047754160'>, <MagicMock id='280065058849600'>, <MagicMock id='280065059024528'>]
[DEBUG] 2025-08-24 20:28:55,194 - swarm:173 - Loaded config for agent 'Echo Plath' from SQLite.
[DEBUG] 2025-08-24 20:28:55,194 - swarm:197 - Creating new Model instance for profile 'default'.
[DEBUG] 2025-08-24 20:28:55,195 - swarm:218 - Creating new AsyncOpenAI client for 'default': {base_url: http://localhost:1234}
[DEBUG] 2025-08-24 20:28:55,241 - swarm:224 - Instantiating OpenAIChatCompletionsModel(model='gpt-mock') for 'default'.
[DEBUG] 2025-08-24 20:28:55,241 - swarm:173 - Loaded config for agent 'Mystic Blake' from SQLite.
[DEBUG] 2025-08-24 20:28:55,241 - swarm:194 - Using cached Model instance for profile 'default'.
[DEBUG] 2025-08-24 20:28:55,241 - swarm:173 - Loaded config for agent 'Raven Poe' from SQLite.
[DEBUG] 2025-08-24 20:28:55,242 - swarm:194 - Using cached Model instance for profile 'default'.
[DEBUG] 2025-08-24 20:28:55,242 - swarm:173 - Loaded config for agent 'Verse Neru' from SQLite.
[DEBUG] 2025-08-24 20:28:55,242 - swarm:194 - Using cached Model instance for profile 'default'.
[DEBUG] 2025-08-24 20:28:55,242 - swarm:173 - Loaded config for agent 'Haiku Bash' from SQLite.
[DEBUG] 2025-08-24 20:28:55,242 - swarm:194 - Using cached Model instance for profile 'default'.
[DEBUG] 2025-08-24 20:28:55,242 - swarm:173 - Loaded config for agent 'Gritty Buk' from SQLite.
[DEBUG] 2025-08-24 20:28:55,243 - swarm:194 - Using cached Model instance for profile 'default'.
[DEBUG] 2025-08-24 20:28:55,243 - swarm:173 - Loaded config for agent 'Frosted Woods' from SQLite.
[DEBUG] 2025-08-24 20:28:55,243 - swarm:194 - Using cached Model instance for profile 'default'.
[DEBUG] 2025-08-24 20:28:55,243 - swarm:173 - Loaded config for agent 'Harlem Lang' from SQLite.
[DEBUG] 2025-08-24 20:28:55,243 - swarm:194 - Using cached Model instance for profile 'default'.
[DEBUG] 2025-08-24 20:28:55,243 - swarm:173 - Loaded config for agent 'Bard Whit' from SQLite.
[DEBUG] 2025-08-24 20:28:55,243 - swarm:194 - Using cached Model instance for profile 'default'.
______________________________________________________________________________________________________________________________ test_rue_run_box ______________________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[DEBUG] 2025-08-24 20:28:55,271 - swarm.config:80 - Using XDG default configuration path: /home/chatgpt/.config/swarm/config.yaml
[WARNING] 2025-08-24 20:28:55,271 - swarm.config:98 - Default configuration file not found at /home/chatgpt/.config/swarm/config.yaml. Proceeding without base configuration.
[DEBUG] 2025-08-24 20:28:55,271 - swarm.config:102 - Applied base defaults. Keys: []
[DEBUG] 2025-08-24 20:28:55,271 - swarm.config:123 - Using profile: 'default'
[DEBUG] 2025-08-24 20:28:55,271 - swarm.config:142 - Applied final env var substitution.
[INFO] 2025-08-24 20:28:55,271 - swarm.blueprints.rue_code.blueprint_rue_code:217 - RueCodeBlueprint run method called.
[INFO] 2025-08-24 20:28:55,686 - swarm.blueprints.rue_code.blueprint_rue_code:271 - RueCodeBlueprint run finished.
_____________________________________________________________________________________________________________________________ test_rue_run_empty _____________________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[DEBUG] 2025-08-24 20:28:55,690 - swarm.config:80 - Using XDG default configuration path: /home/chatgpt/.config/swarm/config.yaml
[WARNING] 2025-08-24 20:28:55,691 - swarm.config:98 - Default configuration file not found at /home/chatgpt/.config/swarm/config.yaml. Proceeding without base configuration.
[DEBUG] 2025-08-24 20:28:55,691 - swarm.config:102 - Applied base defaults. Keys: []
[DEBUG] 2025-08-24 20:28:55,691 - swarm.config:123 - Using profile: 'default'
[DEBUG] 2025-08-24 20:28:55,691 - swarm.config:142 - Applied final env var substitution.
[INFO] 2025-08-24 20:28:55,691 - swarm.blueprints.rue_code.blueprint_rue_code:217 - RueCodeBlueprint run method called.
_________________________________________________________________________________________________________________________ test_run_and_check_status __________________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[INFO] 2025-08-24 20:28:55,702 - swarm.services.job:97 - DefaultJobService initialized. Loaded 0 jobs from disk.
____________________________________________________________________________________________________________________________ test_kill_subprocess ____________________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[INFO] 2025-08-24 20:28:55,707 - swarm.services.job:97 - DefaultJobService initialized. Loaded 0 jobs from disk.
_________________________________________________________________________________________________________________________ test_tail_and_show_output __________________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[INFO] 2025-08-24 20:28:55,711 - swarm.services.job:97 - DefaultJobService initialized. Loaded 0 jobs from disk.
__________________________________________________________________________________________________________________________ test_list_and_prune_jobs __________________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[INFO] 2025-08-24 20:28:55,718 - swarm.services.job:97 - DefaultJobService initialized. Loaded 0 jobs from disk.
____________________________________________________________________________________________________________________ test_resource_usage_and_analyze_self ____________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[INFO] 2025-08-24 20:28:55,723 - swarm.services.job:97 - DefaultJobService initialized. Loaded 0 jobs from disk.
______________________________________________________________________________________________________________________________ test_self_update ______________________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[INFO] 2025-08-24 20:28:55,729 - swarm.services.job:97 - DefaultJobService initialized. Loaded 0 jobs from disk.
___________________________________________________________________________________________________________________________ test_analyze_self_runs ___________________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[INFO] 2025-08-24 20:28:55,733 - swarm.services.job:97 - DefaultJobService initialized. Loaded 0 jobs from disk.
__________________________________________________________________________________________________________________________ test_wtf_agent_creation ___________________________________________________________________________________________________________________________
--------------------------------------------------------------------------------------------------------------------------- Captured stderr setup ----------------------------------------------------------------------------------------------------------------------------
[ERROR] 2025-08-24 20:28:55,736 - swarm.blueprints.whiskeytango_foxtrot.blueprint_whiskeytango_foxtrot:77 - WTFBlueprint __init__: Instance lacks _load_configuration method even after super call. MRO or BlueprintUXImproved.__init__ is likely problematic. Initializing _config manually.
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[INFO] 2025-08-24 20:28:55,739 - swarm.blueprints.whiskeytango_foxtrot.blueprint_whiskeytango_foxtrot:92 - Ensuring database schema exists at: /tmp/pytest-of-chatgpt/pytest-11/test_wtf_agent_creation0/test_wtf_services.db
[INFO] 2025-08-24 20:28:55,740 - swarm.blueprints.whiskeytango_foxtrot.blueprint_whiskeytango_foxtrot:99 - Initializing 'services' table in SQLite database.
[INFO] 2025-08-24 20:28:55,751 - swarm.blueprints.whiskeytango_foxtrot.blueprint_whiskeytango_foxtrot:114 - 'services' table created.
[DEBUG] 2025-08-24 20:28:55,751 - swarm.blueprints.whiskeytango_foxtrot.blueprint_whiskeytango_foxtrot:229 - Creating WhiskeyTangoFoxtrot agent team...
[DEBUG] 2025-08-24 20:28:55,751 - swarm.blueprints.whiskeytango_foxtrot.blueprint_whiskeytango_foxtrot:239 - Using LLM profile 'default' for WTF agents. (From BP config: None, from settings: None)
[WARNING] 2025-08-24 20:28:55,754 - swarm.blueprints.whiskeytango_foxtrot.blueprint_whiskeytango_foxtrot:270 - Agent needing ['filesystem'] is missing started MCP(s): filesystem
[WARNING] 2025-08-24 20:28:55,754 - swarm.blueprints.whiskeytango_foxtrot.blueprint_whiskeytango_foxtrot:270 - Agent needing ['sqlite'] is missing started MCP(s): sqlite
[WARNING] 2025-08-24 20:28:55,755 - swarm.blueprints.whiskeytango_foxtrot.blueprint_whiskeytango_foxtrot:270 - Agent needing ['brave-search', 'mcp-npx-fetch'] is missing started MCP(s): mcp-npx-fetch, brave-search
[WARNING] 2025-08-24 20:28:55,755 - swarm.blueprints.whiskeytango_foxtrot.blueprint_whiskeytango_foxtrot:270 - Agent needing ['mcp-doc-forge'] is missing started MCP(s): mcp-doc-forge
[WARNING] 2025-08-24 20:28:55,757 - swarm.blueprints.whiskeytango_foxtrot.blueprint_whiskeytango_foxtrot:270 - Agent needing ['sqlite'] is missing started MCP(s): sqlite
[DEBUG] 2025-08-24 20:28:55,761 - swarm.blueprints.whiskeytango_foxtrot.blueprint_whiskeytango_foxtrot:294 - WhiskeyTangoFoxtrot agents created. Starting with Valory.
_________________________________________________________________________________________________________________________ test_wtf_db_initialization _________________________________________________________________________________________________________________________
--------------------------------------------------------------------------------------------------------------------------- Captured stderr setup ----------------------------------------------------------------------------------------------------------------------------
[ERROR] 2025-08-24 20:28:55,766 - swarm.blueprints.whiskeytango_foxtrot.blueprint_whiskeytango_foxtrot:77 - WTFBlueprint __init__: Instance lacks _load_configuration method even after super call. MRO or BlueprintUXImproved.__init__ is likely problematic. Initializing _config manually.
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[INFO] 2025-08-24 20:28:55,766 - swarm.blueprints.whiskeytango_foxtrot.blueprint_whiskeytango_foxtrot:92 - Ensuring database schema exists at: /tmp/pytest-of-chatgpt/pytest-11/test_wtf_db_initialization0/test_wtf_services.db
[INFO] 2025-08-24 20:28:55,766 - swarm.blueprints.whiskeytango_foxtrot.blueprint_whiskeytango_foxtrot:99 - Initializing 'services' table in SQLite database.
[INFO] 2025-08-24 20:28:55,776 - swarm.blueprints.whiskeytango_foxtrot.blueprint_whiskeytango_foxtrot:114 - 'services' table created.
____________________________________________________________________________________________________________________________ test_zeus_run_empty _____________________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[INFO] 2025-08-24 20:28:58,701 - swarm.blueprints.zeus.blueprint_zeus:79 - ZeusCoordinatorBlueprint run method called.
____________________________________________________________________________________________________________ test_swarm_cli_install_executable_creates_executable ____________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stdout call ----------------------------------------------------------------------------------------------------------------------------
CLI Output (Test Mode):
Installing blueprint 'test_blueprint' as executable...
  Source: /tmp/pytest-of-chatgpt/pytest-11/test_swarm_cli_install_executa0/user_data_for_swarm/blueprints/test_blueprint
  Entry Point: main.py
  Output Executable: /tmp/pytest-of-chatgpt/pytest-11/test_swarm_cli_install_executa0/user_bin_test/test_blueprint
Test-mode shim installed at: /tmp/pytest-of-chatgpt/pytest-11/test_swarm_cli_install_executa0/user_bin_test/test_blueprint

CLI Output (Prod Mode):
Installing blueprint 'test_blueprint' as executable...
  Source: /tmp/pytest-of-chatgpt/pytest-11/test_swarm_cli_install_executa0/user_data_for_swarm/blueprints/test_blueprint
  Entry Point: main.py
  Output Executable: /tmp/pytest-of-chatgpt/pytest-11/test_swarm_cli_install_executa0/user_bin_test/test_blueprint
Running PyInstaller: pyinstaller --onefile --name test_blueprint --distpath /tmp/pytest-of-chatgpt/pytest-11/test_swarm_cli_install_executa0/user_bin_test --workpath /tmp/pytest-of-chatgpt/pytest-11/test_swarm_cli_install_executa0/user_cache_for_swarm/build/test_blueprint --specpath /tmp/pytest-of-chatgpt/pytest-11/test_swarm_cli_install_executa0/user_cache_for_swarm/specs /tmp/pytest-of-chatgpt/pytest-11/test_swarm_cli_install_executa0/user_data_for_swarm/blueprints/test_blueprint/main.py
PyInstaller output:
PyInstaller finished successfully. Executable at /tmp/pytest-of-chatgpt/pytest-11/test_swarm_cli_install_executa0/user_bin_test/test_blueprint
Successfully installed 'test_blueprint' to /tmp/pytest-of-chatgpt/pytest-11/test_swarm_cli_install_executa0/user_bin_test/test_blueprint

______________________________________________________________________________________________________________________ test_execute_list_user_installed ______________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[INFO] 2025-08-24 20:28:59,008 - swarm.extensions.cli.commands.list_blueprints:83 - Discovering user-installed blueprints from: PosixPath('/tmp/pytest-of-chatgpt/pytest-11/test_execute_list_user_install0/mock_user_blueprints')
________________________________________________________________________________________________________________________ test_execute_list_available _________________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stdout call ----------------------------------------------------------------------------------------------------------------------------
DEBUG_TEST: Output for test_execute_list_available:
Listing available blueprints (from package/development source)...
DEBUG_MOCK: mock_is_dir called for /mnt/models/open-swarm-mcp/src/swarm/blueprints
DEBUG_MOCK: mock_is_dir returning False for dev path candidate: /mnt/models/open-swarm-mcp/src/swarm/blueprints
INFO: No available (package/development) blueprint source directory could be determined.
No available blueprints found in package or development source.

---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[DEBUG] 2025-08-24 20:28:59,015 - swarm.extensions.cli.commands.list_blueprints:44 - 'swarm' package spec not found. Cannot determine installed package location.
[DEBUG] 2025-08-24 20:28:59,015 - swarm.extensions.cli.commands.list_blueprints:50 - Falling back to development source tree for blueprints.
[DEBUG] 2025-08-24 20:28:59,016 - swarm.extensions.cli.commands.list_blueprints:61 - Checking development blueprints path: PosixPath('/mnt/models/open-swarm-mcp/src/swarm/blueprints')
[DEBUG] 2025-08-24 20:28:59,016 - swarm.extensions.cli.commands.list_blueprints:66 - Development blueprints path /mnt/models/open-swarm-mcp/src/swarm/blueprints not found or not a directory.
[INFO] 2025-08-24 20:28:59,016 - swarm.extensions.cli.commands.list_blueprints:72 - No available (package/development) blueprint source directory could be determined.
_________________________________________________________________________________________________________________ test_execute_no_user_installed_blueprints __________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stdout call ----------------------------------------------------------------------------------------------------------------------------
DEBUG_TEST: Output for test_execute_no_user_installed_blueprints:
Listing user-installed blueprints (source in /tmp/pytest-of-chatgpt/pytest-11/test_execute_no_user_installed0/mock_user_blueprints)...
No user-installed blueprints found in /tmp/pytest-of-chatgpt/pytest-11/test_execute_no_user_installed0/mock_user_blueprints.
Use 'swarm-cli list --available' to see blueprints you can install, then 'swarm-cli install <name_or_path>'.

---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[INFO] 2025-08-24 20:28:59,021 - swarm.extensions.cli.commands.list_blueprints:83 - Discovering user-installed blueprints from: PosixPath('/tmp/pytest-of-chatgpt/pytest-11/test_execute_no_user_installed0/mock_user_blueprints')
____________________________________________________________________________________________________________________ test_execute_no_available_blueprints ____________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stdout call ----------------------------------------------------------------------------------------------------------------------------
DEBUG_TEST: Output for test_execute_no_available_blueprints:
Listing available blueprints (from package/development source)...
No available blueprints found in package or development source.

---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[DEBUG] 2025-08-24 20:28:59,027 - swarm.extensions.cli.commands.list_blueprints:44 - 'swarm' package spec not found. Cannot determine installed package location.
[DEBUG] 2025-08-24 20:28:59,028 - swarm.extensions.cli.commands.list_blueprints:50 - Falling back to development source tree for blueprints.
[DEBUG] 2025-08-24 20:28:59,028 - swarm.extensions.cli.commands.list_blueprints:61 - Checking development blueprints path: PosixPath('/mnt/models/open-swarm-mcp/src/swarm/blueprints')
[INFO] 2025-08-24 20:28:59,028 - swarm.extensions.cli.commands.list_blueprints:75 - Discovering available blueprints from: PosixPath('/mnt/models/open-swarm-mcp/src/swarm/blueprints') (from development source tree (/mnt/models/open-swarm-mcp/src/swarm/blueprints))
______________________________________________________________________________________________________________ test_execute_discovery_exception_user_installed _______________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[INFO] 2025-08-24 20:28:59,033 - swarm.extensions.cli.commands.list_blueprints:83 - Discovering user-installed blueprints from: PosixPath('/tmp/pytest-of-chatgpt/pytest-11/test_execute_discovery_excepti0/mock_user_blueprints')
[ERROR] 2025-08-24 20:28:59,033 - swarm.extensions.cli.commands.list_blueprints:153 - Error listing user-installed blueprints.
Traceback (most recent call last):
  File "/mnt/models/open-swarm-mcp/src/swarm/extensions/cli/commands/list_blueprints.py", line 135, in execute
    user_blueprints = list_user_installed_blueprints()
  File "/mnt/models/open-swarm-mcp/src/swarm/extensions/cli/commands/list_blueprints.py", line 88, in list_user_installed_blueprints
    return discover_blueprints(str(user_bp_dir))
  File "/usr/lib/python3.10/unittest/mock.py", line 1114, in __call__
    return self._mock_call(*args, **kwargs)
  File "/usr/lib/python3.10/unittest/mock.py", line 1118, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
  File "/usr/lib/python3.10/unittest/mock.py", line 1173, in _execute_mock_call
    raise effect
Exception: User Discovery Failed!
_________________________________________________________________________________________________________________ test_execute_discovery_exception_available _________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[DEBUG] 2025-08-24 20:28:59,042 - swarm.extensions.cli.commands.list_blueprints:44 - 'swarm' package spec not found. Cannot determine installed package location.
[DEBUG] 2025-08-24 20:28:59,042 - swarm.extensions.cli.commands.list_blueprints:50 - Falling back to development source tree for blueprints.
[DEBUG] 2025-08-24 20:28:59,042 - swarm.extensions.cli.commands.list_blueprints:61 - Checking development blueprints path: PosixPath('/mnt/models/open-swarm-mcp/src/swarm/blueprints')
[INFO] 2025-08-24 20:28:59,042 - swarm.extensions.cli.commands.list_blueprints:75 - Discovering available blueprints from: PosixPath('/mnt/models/open-swarm-mcp/src/swarm/blueprints') (from development source tree (/mnt/models/open-swarm-mcp/src/swarm/blueprints))
[ERROR] 2025-08-24 20:28:59,042 - swarm.extensions.cli.commands.list_blueprints:131 - Error listing available blueprints.
Traceback (most recent call last):
  File "/mnt/models/open-swarm-mcp/src/swarm/extensions/cli/commands/list_blueprints.py", line 121, in execute
    available_blueprints = list_available_blueprints()
  File "/mnt/models/open-swarm-mcp/src/swarm/extensions/cli/commands/list_blueprints.py", line 76, in list_available_blueprints
    return discover_blueprints(str(blueprints_source_dir))
  File "/usr/lib/python3.10/unittest/mock.py", line 1114, in __call__
    return self._mock_call(*args, **kwargs)
  File "/usr/lib/python3.10/unittest/mock.py", line 1118, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
  File "/usr/lib/python3.10/unittest/mock.py", line 1173, in _execute_mock_call
    raise effect
Exception: Available Discovery Failed!
___________________________________________________________________________________________________________________ test_blueprint_default_model_override ____________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[DEBUG] 2025-08-24 20:28:59,936 - swarm.extensions.config.config_loader:83 - Loading config from /tmp/tmpsxj5yo9w.json
[INFO] 2025-08-24 20:28:59,936 - swarm.extensions.config.config_loader:87 - Loaded config from /tmp/tmpsxj5yo9w.json
[DEBUG] 2025-08-24 20:28:59,936 - swarm.extensions.config.config_loader:120 - Validating config structure...
[DEBUG] 2025-08-24 20:28:59,936 - swarm.extensions.config.config_loader:130 - Config basic structure OK.
_________________________________________________________________________________________________________________________ test_fallback_logs_warning _________________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[DEBUG] 2025-08-24 20:28:59,940 - swarm.extensions.config.config_loader:83 - Loading config from /tmp/tmp9e6jxyi6.json
[INFO] 2025-08-24 20:28:59,940 - swarm.extensions.config.config_loader:87 - Loaded config from /tmp/tmp9e6jxyi6.json
[DEBUG] 2025-08-24 20:28:59,940 - swarm.extensions.config.config_loader:120 - Validating config structure...
[DEBUG] 2025-08-24 20:28:59,940 - swarm.extensions.config.config_loader:130 - Config basic structure OK.
_______________________________________________________________________________________________________________________ test_default_config_generation _______________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[DEBUG] 2025-08-24 20:28:59,945 - swarm.extensions.config.config_loader:79 - Config 'swarm_config.json' not found.
[INFO] 2025-08-24 20:28:59,945 - swarm.extensions.config.config_loader:181 - Creating default configuration file at /tmp/tmp1ga85xb8/swarm/swarm_config.json
[INFO] 2025-08-24 20:28:59,945 - swarm.extensions.config.config_loader:109 - Saving config to /tmp/tmp1ga85xb8/swarm/swarm_config.json
[DEBUG] 2025-08-24 20:28:59,945 - swarm.extensions.config.config_loader:114 - Save OK.
[DEBUG] 2025-08-24 20:28:59,945 - swarm.extensions.config.config_loader:184 - Default configuration file created successfully.
[WARNING] 2025-08-24 20:28:59,945 - swarm.extensions.config.config_loader:186 - [hint] Set your API key: export OPENAI_API_KEY=sk-... or save to secrets file: echo 'OPENAI_API_KEY=sk-...' >> ~/.config/swarm/.env
_________________________________________________________________________________________________________________________ test_xdg_config_discovery __________________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[DEBUG] 2025-08-24 20:28:59,948 - swarm.extensions.config.config_loader:35 - Found config XDG: /tmp/tmpdxcg4qoo/swarm/swarm_config.json
________________________________________________________________________________________________________________________ test_config_fallback_to_cwd _________________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[DEBUG] 2025-08-24 20:28:59,951 - swarm.extensions.config.config_loader:76 - Found config cwd: /tmp/tmps3gpkeum/swarm_config.json
___________________________________________________________________________________________________________________ test_load_full_configuration_defaults ____________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[DEBUG] 2025-08-24 20:28:59,954 - swarm.config:77 - Using test/specific default configuration path: /tmp/tmpz3hbd_pp.json
[DEBUG] 2025-08-24 20:28:59,954 - swarm.config:87 - Successfully loaded base configuration from: /tmp/tmpz3hbd_pp.json
[DEBUG] 2025-08-24 20:28:59,955 - swarm.config:102 - Applied base defaults. Keys: ['foo']
[DEBUG] 2025-08-24 20:28:59,955 - swarm.config:107 - Merged base 'llm'.
[DEBUG] 2025-08-24 20:28:59,955 - swarm.config:110 - Merged base 'mcpServers'.
[DEBUG] 2025-08-24 20:28:59,955 - swarm.config:123 - Using profile: 'default'
[DEBUG] 2025-08-24 20:28:59,955 - swarm.config:142 - Applied final env var substitution.
________________________________________________________________________________________________________________ test_load_full_configuration_profile_merging ________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[DEBUG] 2025-08-24 20:28:59,957 - swarm.config:77 - Using test/specific default configuration path: /tmp/tmpal6g87u6.json
[DEBUG] 2025-08-24 20:28:59,957 - swarm.config:87 - Successfully loaded base configuration from: /tmp/tmpal6g87u6.json
[DEBUG] 2025-08-24 20:28:59,957 - swarm.config:102 - Applied base defaults. Keys: ['foo', 'default_profile']
[DEBUG] 2025-08-24 20:28:59,957 - swarm.config:107 - Merged base 'llm'.
[DEBUG] 2025-08-24 20:28:59,957 - swarm.config:110 - Merged base 'mcpServers'.
[DEBUG] 2025-08-24 20:28:59,957 - swarm.config:116 - Merged BP 'FakeBlueprint' settings. Keys: ['baz']
[DEBUG] 2025-08-24 20:28:59,957 - swarm.config:123 - Using profile: 'special'
[DEBUG] 2025-08-24 20:28:59,958 - swarm.config:127 - Merged profile 'special'. Keys: ['profile_key']
[DEBUG] 2025-08-24 20:28:59,958 - swarm.config:142 - Applied final env var substitution.
_______________________________________________________________________________________________________________ test_load_full_configuration_env_substitution ________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[DEBUG] 2025-08-24 20:28:59,960 - swarm.config:77 - Using test/specific default configuration path: /tmp/tmp97zu99m8.json
[DEBUG] 2025-08-24 20:28:59,960 - swarm.config:87 - Successfully loaded base configuration from: /tmp/tmp97zu99m8.json
[DEBUG] 2025-08-24 20:28:59,960 - swarm.config:102 - Applied base defaults. Keys: ['foo']
[DEBUG] 2025-08-24 20:28:59,960 - swarm.config:107 - Merged base 'llm'.
[DEBUG] 2025-08-24 20:28:59,960 - swarm.config:110 - Merged base 'mcpServers'.
[DEBUG] 2025-08-24 20:28:59,960 - swarm.config:123 - Using profile: 'default'
[DEBUG] 2025-08-24 20:28:59,960 - swarm.config:142 - Applied final env var substitution.
_________________________________________________________________________________________________________________ test_load_full_configuration_missing_file __________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[DEBUG] 2025-08-24 20:28:59,963 - swarm.config:74 - Using CLI overridden configuration path: /tmp/does_not_exist.json
___________________________________________________________________________________________________________________ test_load_full_configuration_bad_json ____________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[DEBUG] 2025-08-24 20:28:59,965 - swarm.config:77 - Using test/specific default configuration path: /tmp/tmp7hbrimdy.json
_________________________________________________________________________________________________________________ test_load_full_configuration_empty_config __________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[DEBUG] 2025-08-24 20:28:59,968 - swarm.config:77 - Using test/specific default configuration path: /tmp/tmpve9jp_h2.json
[DEBUG] 2025-08-24 20:28:59,968 - swarm.config:87 - Successfully loaded base configuration from: /tmp/tmpve9jp_h2.json
[DEBUG] 2025-08-24 20:28:59,968 - swarm.config:102 - Applied base defaults. Keys: []
[DEBUG] 2025-08-24 20:28:59,968 - swarm.config:123 - Using profile: 'default'
[DEBUG] 2025-08-24 20:28:59,968 - swarm.config:142 - Applied final env var substitution.
___________________________________________________________________________________________________________________________ test_load_environment ____________________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[DEBUG] 2025-08-24 20:28:59,971 - swarm.config:30 - Checking for .env file at: /tmp/pytest-of-chatgpt/pytest-11/test_load_environment0/.env
[DEBUG] 2025-08-24 20:28:59,972 - swarm.config:35 - .env file Loaded/Overridden at: /tmp/pytest-of-chatgpt/pytest-11/test_load_environment0/.env
_______________________________________________________________________________________________________________________ test_fallback_to_default_model _______________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[DEBUG] 2025-08-24 20:28:59,974 - swarm.extensions.config.config_loader:83 - Loading config from /tmp/tmpk3eo867v.json
[INFO] 2025-08-24 20:28:59,975 - swarm.extensions.config.config_loader:87 - Loaded config from /tmp/tmpk3eo867v.json
[DEBUG] 2025-08-24 20:28:59,975 - swarm.extensions.config.config_loader:120 - Validating config structure...
[DEBUG] 2025-08-24 20:28:59,975 - swarm.extensions.config.config_loader:130 - Config basic structure OK.
_______________________________________________________________________________________________________________________ test_mcp_server_config_parsing _______________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[DEBUG] 2025-08-24 20:28:59,978 - swarm.extensions.config.config_loader:83 - Loading config from /tmp/tmpncu2qksu.json
[INFO] 2025-08-24 20:28:59,978 - swarm.extensions.config.config_loader:87 - Loaded config from /tmp/tmpncu2qksu.json
[DEBUG] 2025-08-24 20:28:59,978 - swarm.extensions.config.config_loader:120 - Validating config structure...
[DEBUG] 2025-08-24 20:28:59,978 - swarm.extensions.config.config_loader:130 - Config basic structure OK.
_________________________________________________________________________________________________________________ test_mcp_server_add_remove_and_edge_cases __________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[DEBUG] 2025-08-24 20:28:59,982 - swarm.extensions.config.config_loader:83 - Loading config from /tmp/tmpbisctlhu.json
[INFO] 2025-08-24 20:28:59,982 - swarm.extensions.config.config_loader:87 - Loaded config from /tmp/tmpbisctlhu.json
[DEBUG] 2025-08-24 20:28:59,982 - swarm.extensions.config.config_loader:120 - Validating config structure...
[DEBUG] 2025-08-24 20:28:59,982 - swarm.extensions.config.config_loader:130 - Config basic structure OK.
__________________________________________________________________________________________________________________________ test_swarm_api_basic_run __________________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stdout call ----------------------------------------------------------------------------------------------------------------------------
Using managed blueprint: /fake/home/.swarm/blueprints/echocraft/blueprint_echocraft.py
Blueprints to be configured:
 - /fake/home/.swarm/blueprints/echocraft/blueprint_echocraft.py
Launching Django server on port 0.0.0.0:8000
_______________________________________________________________________________________________________________ test_swarm_api_custom_port_and_config_creation _______________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stdout call ----------------------------------------------------------------------------------------------------------------------------
Using blueprint file: /path/to/my_bp.py
Blueprints to be configured:
 - /path/to/my_bp.py
Default config file created at: /tmp/my_swarm.json
Launching Django server on port 0.0.0.0:9999
_________________________________________________________________________________________________________________________ test_swarm_api_daemon_mode _________________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stdout call ----------------------------------------------------------------------------------------------------------------------------
Using blueprint file: /bp/direct.py
Blueprints to be configured:
 - /bp/direct.py
Launching Django server on port 0.0.0.0:8000
Running in daemon mode. Process ID: 12345
_____________________________________________________________________________________________________________________ test_swarm_api_blueprint_not_found _____________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stdout call ----------------------------------------------------------------------------------------------------------------------------
Warning: Blueprint not found: nonexistent_bp - skipping.
Error: No valid blueprints found.
_________________________________________________________________________________________________________________________________ test_init __________________________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stdout call ----------------------------------------------------------------------------------------------------------------------------
BlueprintBase init test passed
______________________________________________________________________________________________________________________________ test_valid_input ______________________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[INFO] 2025-08-24 20:29:16,604 - swarm.extensions.cli.selection:37 - User selected blueprint: 'blueprint1'
______________________________________________________________________________________________________________________ test_filter_mixed_valid_invalid _______________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[WARNING] 2025-08-24 20:29:16,630 - src.swarm.utils.message_utils:29 - Skipping non-dictionary item in messages list: <class 'str'>
[WARNING] 2025-08-24 20:29:16,630 - src.swarm.utils.message_utils:29 - Skipping non-dictionary item in messages list: <class 'NoneType'>
[WARNING] 2025-08-24 20:29:16,630 - src.swarm.utils.message_utils:26 - Message dictionary missing 'role' key: {'not_a_role': 'value'}
[WARNING] 2025-08-24 20:29:16,630 - src.swarm.utils.message_utils:29 - Skipping non-dictionary item in messages list: <class 'int'>
----------------------------------------------------------------------------------------------------------------------------- Captured log call ------------------------------------------------------------------------------------------------------------------------------
WARNING  src.swarm.utils.message_utils:message_utils.py:29 Skipping non-dictionary item in messages list: <class 'str'>
WARNING  src.swarm.utils.message_utils:message_utils.py:29 Skipping non-dictionary item in messages list: <class 'NoneType'>
WARNING  src.swarm.utils.message_utils:message_utils.py:26 Message dictionary missing 'role' key: {'not_a_role': 'value'}
WARNING  src.swarm.utils.message_utils:message_utils.py:29 Skipping non-dictionary item in messages list: <class 'int'>
__________________________________________________________________________________________________________________ test_filter_messages_with_non_dict_items __________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[WARNING] 2025-08-24 20:29:16,637 - src.swarm.utils.message_utils:43 - Skipping non-dictionary item in messages list: <class 'str'>
[WARNING] 2025-08-24 20:29:16,637 - src.swarm.utils.message_utils:43 - Skipping non-dictionary item in messages list: <class 'NoneType'>
----------------------------------------------------------------------------------------------------------------------------- Captured log call ------------------------------------------------------------------------------------------------------------------------------
WARNING  src.swarm.utils.message_utils:message_utils.py:43 Skipping non-dictionary item in messages list: <class 'str'>
WARNING  src.swarm.utils.message_utils:message_utils.py:43 Skipping non-dictionary item in messages list: <class 'NoneType'>
___________________________________________________________________________________________________________________ test_truncate_no_action_needed[simple] ___________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,645 - 
--- Running Truncation Test [NoAction] (Mode: simple, MaxTk: 1000, MaxMsg: 10) ---
[INFO] 2025-08-24 20:29:16,645 - src.swarm.utils.context_utils:242 - --- Starting Truncation --- Mode: Simple (Recent Only), Max Tokens: 1000, Max Messages: 10, Input Msgs: 2
[INFO] 2025-08-24 20:29:16,645 - src.swarm.utils.context_utils:233 - Simple truncation result: 2 messages (1 sys), ~11 tokens.
[INFO] 2025-08-24 20:29:16,645 - src.swarm.utils.context_utils:275 - --- Finished Truncation --- Result Msgs: 2
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,645 - --- Test Passed [NoAction] ---
----------------------------------------------------------------------------------------------------------------------------- Captured log call ------------------------------------------------------------------------------------------------------------------------------
INFO     src.swarm.utils.context_utils:context_utils.py:242 --- Starting Truncation --- Mode: Simple (Recent Only), Max Tokens: 1000, Max Messages: 10, Input Msgs: 2
INFO     src.swarm.utils.context_utils:context_utils.py:233 Simple truncation result: 2 messages (1 sys), ~11 tokens.
INFO     src.swarm.utils.context_utils:context_utils.py:275 --- Finished Truncation --- Result Msgs: 2
___________________________________________________________________________________________________________________ test_truncate_no_action_needed[pairs] ____________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,648 - 
--- Running Truncation Test [NoAction] (Mode: pairs, MaxTk: 1000, MaxMsg: 10) ---
[INFO] 2025-08-24 20:29:16,648 - src.swarm.utils.context_utils:242 - --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 1000, Max Messages: 10, Input Msgs: 2
[INFO] 2025-08-24 20:29:16,648 - src.swarm.utils.context_utils:75 - History fits.
[INFO] 2025-08-24 20:29:16,648 - src.swarm.utils.context_utils:275 - --- Finished Truncation --- Result Msgs: 2
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,648 - --- Test Passed [NoAction] ---
----------------------------------------------------------------------------------------------------------------------------- Captured log call ------------------------------------------------------------------------------------------------------------------------------
INFO     src.swarm.utils.context_utils:context_utils.py:242 --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 1000, Max Messages: 10, Input Msgs: 2
INFO     src.swarm.utils.context_utils:context_utils.py:75 History fits.
INFO     src.swarm.utils.context_utils:context_utils.py:275 --- Finished Truncation --- Result Msgs: 2
________________________________________________________________________________________________________________ test_truncate_by_message_count_basic[simple] ________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,651 - 
--- Running Truncation Test [MsgCountBasic] (Mode: simple, MaxTk: 1000, MaxMsg: 3) ---
[INFO] 2025-08-24 20:29:16,651 - src.swarm.utils.context_utils:242 - --- Starting Truncation --- Mode: Simple (Recent Only), Max Tokens: 1000, Max Messages: 3, Input Msgs: 5
[INFO] 2025-08-24 20:29:16,651 - src.swarm.utils.context_utils:233 - Simple truncation result: 3 messages (1 sys), ~17 tokens.
[INFO] 2025-08-24 20:29:16,651 - src.swarm.utils.context_utils:275 - --- Finished Truncation --- Result Msgs: 3
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,651 - --- Test Passed [MsgCountBasic] ---
----------------------------------------------------------------------------------------------------------------------------- Captured log call ------------------------------------------------------------------------------------------------------------------------------
INFO     src.swarm.utils.context_utils:context_utils.py:242 --- Starting Truncation --- Mode: Simple (Recent Only), Max Tokens: 1000, Max Messages: 3, Input Msgs: 5
INFO     src.swarm.utils.context_utils:context_utils.py:233 Simple truncation result: 3 messages (1 sys), ~17 tokens.
INFO     src.swarm.utils.context_utils:context_utils.py:275 --- Finished Truncation --- Result Msgs: 3
________________________________________________________________________________________________________________ test_truncate_by_message_count_basic[pairs] _________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,653 - 
--- Running Truncation Test [MsgCountBasic] (Mode: pairs, MaxTk: 1000, MaxMsg: 3) ---
[INFO] 2025-08-24 20:29:16,654 - src.swarm.utils.context_utils:242 - --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 1000, Max Messages: 3, Input Msgs: 5
[INFO] 2025-08-24 20:29:16,654 - src.swarm.utils.context_utils:76 - Sophisticated truncation. Target: 2 msgs, 995 tokens.
[DEBUG] 2025-08-24 20:29:16,654 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=3, Role=assistant, Tokens=6. Kept: Msgs=0, Tokens=0
[DEBUG] 2025-08-24 20:29:16,654 - src.swarm.utils.context_utils:187 -     -> Case 3: Regular Message at index 3
[INFO] 2025-08-24 20:29:16,654 - src.swarm.utils.context_utils:191 -     -> Action: KEEPING SINGLE message 3
[DEBUG] 2025-08-24 20:29:16,654 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=2, Role=user, Tokens=6. Kept: Msgs=1, Tokens=6
[DEBUG] 2025-08-24 20:29:16,654 - src.swarm.utils.context_utils:187 -     -> Case 3: Regular Message at index 2
[INFO] 2025-08-24 20:29:16,654 - src.swarm.utils.context_utils:191 -     -> Action: KEEPING SINGLE message 2
[DEBUG] 2025-08-24 20:29:16,654 - src.swarm.utils.context_utils:81 -   [Loop Stop] Msg limit reached.
[INFO] 2025-08-24 20:29:16,654 - src.swarm.utils.context_utils:206 - Sophisticated truncation result: 3 msgs (1 sys, 2 non-sys), ~17 tokens.
[INFO] 2025-08-24 20:29:16,654 - src.swarm.utils.context_utils:275 - --- Finished Truncation --- Result Msgs: 3
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,654 - --- Test Passed [MsgCountBasic] ---
----------------------------------------------------------------------------------------------------------------------------- Captured log call ------------------------------------------------------------------------------------------------------------------------------
INFO     src.swarm.utils.context_utils:context_utils.py:242 --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 1000, Max Messages: 3, Input Msgs: 5
INFO     src.swarm.utils.context_utils:context_utils.py:76 Sophisticated truncation. Target: 2 msgs, 995 tokens.
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=3, Role=assistant, Tokens=6. Kept: Msgs=0, Tokens=0
DEBUG    src.swarm.utils.context_utils:context_utils.py:187     -> Case 3: Regular Message at index 3
INFO     src.swarm.utils.context_utils:context_utils.py:191     -> Action: KEEPING SINGLE message 3
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=2, Role=user, Tokens=6. Kept: Msgs=1, Tokens=6
DEBUG    src.swarm.utils.context_utils:context_utils.py:187     -> Case 3: Regular Message at index 2
INFO     src.swarm.utils.context_utils:context_utils.py:191     -> Action: KEEPING SINGLE message 2
DEBUG    src.swarm.utils.context_utils:context_utils.py:81   [Loop Stop] Msg limit reached.
INFO     src.swarm.utils.context_utils:context_utils.py:206 Sophisticated truncation result: 3 msgs (1 sys, 2 non-sys), ~17 tokens.
INFO     src.swarm.utils.context_utils:context_utils.py:275 --- Finished Truncation --- Result Msgs: 3
_________________________________________________________________________________________________________________ test_truncate_by_token_count_basic[simple] _________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,657 - 
--- Running Truncation Test [TokenCountBasic] (Mode: simple, MaxTk: 40, MaxMsg: 10) ---
[INFO] 2025-08-24 20:29:16,657 - src.swarm.utils.context_utils:242 - --- Starting Truncation --- Mode: Simple (Recent Only), Max Tokens: 40, Max Messages: 10, Input Msgs: 4
[INFO] 2025-08-24 20:29:16,657 - src.swarm.utils.context_utils:233 - Simple truncation result: 4 messages (1 sys), ~31 tokens.
[INFO] 2025-08-24 20:29:16,657 - src.swarm.utils.context_utils:275 - --- Finished Truncation --- Result Msgs: 4
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,657 - --- Test Passed [TokenCountBasic] ---
----------------------------------------------------------------------------------------------------------------------------- Captured log call ------------------------------------------------------------------------------------------------------------------------------
INFO     src.swarm.utils.context_utils:context_utils.py:242 --- Starting Truncation --- Mode: Simple (Recent Only), Max Tokens: 40, Max Messages: 10, Input Msgs: 4
INFO     src.swarm.utils.context_utils:context_utils.py:233 Simple truncation result: 4 messages (1 sys), ~31 tokens.
INFO     src.swarm.utils.context_utils:context_utils.py:275 --- Finished Truncation --- Result Msgs: 4
_________________________________________________________________________________________________________________ test_truncate_by_token_count_basic[pairs] __________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,660 - 
--- Running Truncation Test [TokenCountBasic] (Mode: pairs, MaxTk: 40, MaxMsg: 10) ---
[INFO] 2025-08-24 20:29:16,660 - src.swarm.utils.context_utils:242 - --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 40, Max Messages: 10, Input Msgs: 4
[INFO] 2025-08-24 20:29:16,660 - src.swarm.utils.context_utils:75 - History fits.
[INFO] 2025-08-24 20:29:16,660 - src.swarm.utils.context_utils:275 - --- Finished Truncation --- Result Msgs: 4
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,660 - --- Test Passed [TokenCountBasic] ---
----------------------------------------------------------------------------------------------------------------------------- Captured log call ------------------------------------------------------------------------------------------------------------------------------
INFO     src.swarm.utils.context_utils:context_utils.py:242 --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 40, Max Messages: 10, Input Msgs: 4
INFO     src.swarm.utils.context_utils:context_utils.py:75 History fits.
INFO     src.swarm.utils.context_utils:context_utils.py:275 --- Finished Truncation --- Result Msgs: 4
________________________________________________________________________________________________________________ test_pairs_preserves_basic_pair_ample_space _________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,663 - 
--- Running Truncation Test [PairsBasicAmple] (Mode: pairs, MaxTk: 1000, MaxMsg: 10) ---
[INFO] 2025-08-24 20:29:16,663 - src.swarm.utils.context_utils:242 - --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 1000, Max Messages: 10, Input Msgs: 5
[INFO] 2025-08-24 20:29:16,663 - src.swarm.utils.context_utils:75 - History fits.
[INFO] 2025-08-24 20:29:16,663 - src.swarm.utils.context_utils:275 - --- Finished Truncation --- Result Msgs: 5
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,663 - --- Test Passed [PairsBasicAmple] ---
----------------------------------------------------------------------------------------------------------------------------- Captured log call ------------------------------------------------------------------------------------------------------------------------------
INFO     src.swarm.utils.context_utils:context_utils.py:242 --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 1000, Max Messages: 10, Input Msgs: 5
INFO     src.swarm.utils.context_utils:context_utils.py:75 History fits.
INFO     src.swarm.utils.context_utils:context_utils.py:275 --- Finished Truncation --- Result Msgs: 5
________________________________________________________________________________________________________________ test_pairs_preserves_basic_pair_tight_space _________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,666 - 
--- Running Truncation Test [PairsBasicTight] (Mode: pairs, MaxTk: 75, MaxMsg: 10) ---
[INFO] 2025-08-24 20:29:16,666 - src.swarm.utils.context_utils:242 - --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 75, Max Messages: 10, Input Msgs: 5
[INFO] 2025-08-24 20:29:16,666 - src.swarm.utils.context_utils:76 - Sophisticated truncation. Target: 9 msgs, 53 tokens.
[DEBUG] 2025-08-24 20:29:16,666 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=3, Role=assistant, Tokens=20. Kept: Msgs=0, Tokens=0
[DEBUG] 2025-08-24 20:29:16,666 - src.swarm.utils.context_utils:187 -     -> Case 3: Regular Message at index 3
[INFO] 2025-08-24 20:29:16,666 - src.swarm.utils.context_utils:191 -     -> Action: KEEPING SINGLE message 3
[DEBUG] 2025-08-24 20:29:16,666 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=2, Role=tool, Tokens=24. Kept: Msgs=1, Tokens=20
[DEBUG] 2025-08-24 20:29:16,666 - src.swarm.utils.context_utils:99 -     -> Case 1: Tool Msg (ID: call_t1)
[DEBUG] 2025-08-24 20:29:16,667 - src.swarm.utils.context_utils:119 -       Found single-call assistant pair at 1. Pair cost=57, Pair msgs=2
[DEBUG] 2025-08-24 20:29:16,667 - src.swarm.utils.context_utils:122 -       Budget Check: (CurrentTokens=20 + PairTokens=57 <= TargetTokens=53) -> False
[DEBUG] 2025-08-24 20:29:16,667 - src.swarm.utils.context_utils:123 -       Budget Check: (CurrentMsgs=1 + PairMsgs=2 <= TargetMsgs=9) -> True
[DEBUG] 2025-08-24 20:29:16,667 - src.swarm.utils.context_utils:131 -         Pair doesn't fit budget.
[DEBUG] 2025-08-24 20:29:16,667 - src.swarm.utils.context_utils:135 -     -> Case 1 Result: Pair found but deferred or didn't fit.
[DEBUG] 2025-08-24 20:29:16,667 - src.swarm.utils.context_utils:200 -   [Loop Default Decrement] No action/break for index 2.
[DEBUG] 2025-08-24 20:29:16,667 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=1, Role=assistant, Tokens=33. Kept: Msgs=1, Tokens=20
[DEBUG] 2025-08-24 20:29:16,667 - src.swarm.utils.context_utils:140 -     -> Case 2: Assistant w/ Tools at index 1
[DEBUG] 2025-08-24 20:29:16,667 - src.swarm.utils.context_utils:153 -       Found 1 tools for 1 calls. Pair Cost=57, Pair Len=2.
[DEBUG] 2025-08-24 20:29:16,667 - src.swarm.utils.context_utils:160 -       Budget Check: (CurrentTokens=20 + PairTokens=57 <= TargetTokens=53) -> False
[DEBUG] 2025-08-24 20:29:16,667 - src.swarm.utils.context_utils:161 -       Budget Check: (CurrentMsgs=1 + PairMsgs=2 <= TargetMsgs=9) -> True
[DEBUG] 2025-08-24 20:29:16,667 - src.swarm.utils.context_utils:175 -       Pair doesn't fit or not all tools found.
[INFO] 2025-08-24 20:29:16,667 - src.swarm.utils.context_utils:179 -     -> Action: KEEPING SINGLE Assistant 1 (pair failed/incomplete).
[DEBUG] 2025-08-24 20:29:16,667 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=0, Role=user, Tokens=12. Kept: Msgs=2, Tokens=53
[DEBUG] 2025-08-24 20:29:16,667 - src.swarm.utils.context_utils:187 -     -> Case 3: Regular Message at index 0
[INFO] 2025-08-24 20:29:16,667 - src.swarm.utils.context_utils:195 -     -> Action: SKIPPING message 0 (Tokens fit: False, Msgs fit: True). Stopping.
[INFO] 2025-08-24 20:29:16,667 - src.swarm.utils.context_utils:206 - Sophisticated truncation result: 3 msgs (1 sys, 2 non-sys), ~75 tokens.
[INFO] 2025-08-24 20:29:16,667 - src.swarm.utils.context_utils:275 - --- Finished Truncation --- Result Msgs: 3
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,667 - --- Test Passed [PairsBasicTight] ---
----------------------------------------------------------------------------------------------------------------------------- Captured log call ------------------------------------------------------------------------------------------------------------------------------
INFO     src.swarm.utils.context_utils:context_utils.py:242 --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 75, Max Messages: 10, Input Msgs: 5
INFO     src.swarm.utils.context_utils:context_utils.py:76 Sophisticated truncation. Target: 9 msgs, 53 tokens.
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=3, Role=assistant, Tokens=20. Kept: Msgs=0, Tokens=0
DEBUG    src.swarm.utils.context_utils:context_utils.py:187     -> Case 3: Regular Message at index 3
INFO     src.swarm.utils.context_utils:context_utils.py:191     -> Action: KEEPING SINGLE message 3
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=2, Role=tool, Tokens=24. Kept: Msgs=1, Tokens=20
DEBUG    src.swarm.utils.context_utils:context_utils.py:99     -> Case 1: Tool Msg (ID: call_t1)
DEBUG    src.swarm.utils.context_utils:context_utils.py:119       Found single-call assistant pair at 1. Pair cost=57, Pair msgs=2
DEBUG    src.swarm.utils.context_utils:context_utils.py:122       Budget Check: (CurrentTokens=20 + PairTokens=57 <= TargetTokens=53) -> False
DEBUG    src.swarm.utils.context_utils:context_utils.py:123       Budget Check: (CurrentMsgs=1 + PairMsgs=2 <= TargetMsgs=9) -> True
DEBUG    src.swarm.utils.context_utils:context_utils.py:131         Pair doesn't fit budget.
DEBUG    src.swarm.utils.context_utils:context_utils.py:135     -> Case 1 Result: Pair found but deferred or didn't fit.
DEBUG    src.swarm.utils.context_utils:context_utils.py:200   [Loop Default Decrement] No action/break for index 2.
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=1, Role=assistant, Tokens=33. Kept: Msgs=1, Tokens=20
DEBUG    src.swarm.utils.context_utils:context_utils.py:140     -> Case 2: Assistant w/ Tools at index 1
DEBUG    src.swarm.utils.context_utils:context_utils.py:153       Found 1 tools for 1 calls. Pair Cost=57, Pair Len=2.
DEBUG    src.swarm.utils.context_utils:context_utils.py:160       Budget Check: (CurrentTokens=20 + PairTokens=57 <= TargetTokens=53) -> False
DEBUG    src.swarm.utils.context_utils:context_utils.py:161       Budget Check: (CurrentMsgs=1 + PairMsgs=2 <= TargetMsgs=9) -> True
DEBUG    src.swarm.utils.context_utils:context_utils.py:175       Pair doesn't fit or not all tools found.
INFO     src.swarm.utils.context_utils:context_utils.py:179     -> Action: KEEPING SINGLE Assistant 1 (pair failed/incomplete).
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=0, Role=user, Tokens=12. Kept: Msgs=2, Tokens=53
DEBUG    src.swarm.utils.context_utils:context_utils.py:187     -> Case 3: Regular Message at index 0
INFO     src.swarm.utils.context_utils:context_utils.py:195     -> Action: SKIPPING message 0 (Tokens fit: False, Msgs fit: True). Stopping.
INFO     src.swarm.utils.context_utils:context_utils.py:206 Sophisticated truncation result: 3 msgs (1 sys, 2 non-sys), ~75 tokens.
INFO     src.swarm.utils.context_utils:context_utils.py:275 --- Finished Truncation --- Result Msgs: 3
________________________________________________________________________________________________________________ test_pairs_preserves_multi_step_ample_space _________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,670 - 
--- Running Truncation Test [PairsMultiAmple] (Mode: pairs, MaxTk: 1000, MaxMsg: 20) ---
[INFO] 2025-08-24 20:29:16,670 - src.swarm.utils.context_utils:242 - --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 1000, Max Messages: 20, Input Msgs: 9
[INFO] 2025-08-24 20:29:16,670 - src.swarm.utils.context_utils:75 - History fits.
[INFO] 2025-08-24 20:29:16,670 - src.swarm.utils.context_utils:275 - --- Finished Truncation --- Result Msgs: 9
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,670 - --- Test Passed [PairsMultiAmple] ---
----------------------------------------------------------------------------------------------------------------------------- Captured log call ------------------------------------------------------------------------------------------------------------------------------
INFO     src.swarm.utils.context_utils:context_utils.py:242 --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 1000, Max Messages: 20, Input Msgs: 9
INFO     src.swarm.utils.context_utils:context_utils.py:75 History fits.
INFO     src.swarm.utils.context_utils:context_utils.py:275 --- Finished Truncation --- Result Msgs: 9
______________________________________________________________________________________________________________ test_pairs_preserves_multi_step_cuts_early_user _______________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,673 - 
--- Running Truncation Test [PairsMultiCutUser] (Mode: pairs, MaxTk: 170, MaxMsg: 20) ---
[INFO] 2025-08-24 20:29:16,673 - src.swarm.utils.context_utils:242 - --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 170, Max Messages: 20, Input Msgs: 9
[INFO] 2025-08-24 20:29:16,673 - src.swarm.utils.context_utils:76 - Sophisticated truncation. Target: 19 msgs, 148 tokens.
[DEBUG] 2025-08-24 20:29:16,673 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=7, Role=assistant, Tokens=10. Kept: Msgs=0, Tokens=0
[DEBUG] 2025-08-24 20:29:16,673 - src.swarm.utils.context_utils:187 -     -> Case 3: Regular Message at index 7
[INFO] 2025-08-24 20:29:16,673 - src.swarm.utils.context_utils:191 -     -> Action: KEEPING SINGLE message 7
[DEBUG] 2025-08-24 20:29:16,673 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=6, Role=tool, Tokens=27. Kept: Msgs=1, Tokens=10
[DEBUG] 2025-08-24 20:29:16,673 - src.swarm.utils.context_utils:99 -     -> Case 1: Tool Msg (ID: call_t2)
[DEBUG] 2025-08-24 20:29:16,673 - src.swarm.utils.context_utils:119 -       Found single-call assistant pair at 5. Pair cost=64, Pair msgs=2
[DEBUG] 2025-08-24 20:29:16,674 - src.swarm.utils.context_utils:122 -       Budget Check: (CurrentTokens=10 + PairTokens=64 <= TargetTokens=148) -> True
[DEBUG] 2025-08-24 20:29:16,674 - src.swarm.utils.context_utils:123 -       Budget Check: (CurrentMsgs=1 + PairMsgs=2 <= TargetMsgs=19) -> True
[INFO] 2025-08-24 20:29:16,674 - src.swarm.utils.context_utils:125 -       Action: KEEPING Pair T(idx 6)+A(idx 5)
[DEBUG] 2025-08-24 20:29:16,674 - src.swarm.utils.context_utils:80 -   [Loop Skip] Idx 5 already kept.
[DEBUG] 2025-08-24 20:29:16,674 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=4, Role=user, Tokens=22. Kept: Msgs=3, Tokens=74
[DEBUG] 2025-08-24 20:29:16,674 - src.swarm.utils.context_utils:187 -     -> Case 3: Regular Message at index 4
[INFO] 2025-08-24 20:29:16,674 - src.swarm.utils.context_utils:191 -     -> Action: KEEPING SINGLE message 4
[DEBUG] 2025-08-24 20:29:16,674 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=3, Role=assistant, Tokens=20. Kept: Msgs=4, Tokens=96
[DEBUG] 2025-08-24 20:29:16,674 - src.swarm.utils.context_utils:187 -     -> Case 3: Regular Message at index 3
[INFO] 2025-08-24 20:29:16,674 - src.swarm.utils.context_utils:191 -     -> Action: KEEPING SINGLE message 3
[DEBUG] 2025-08-24 20:29:16,674 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=2, Role=tool, Tokens=24. Kept: Msgs=5, Tokens=116
[DEBUG] 2025-08-24 20:29:16,674 - src.swarm.utils.context_utils:99 -     -> Case 1: Tool Msg (ID: call_t1)
[DEBUG] 2025-08-24 20:29:16,674 - src.swarm.utils.context_utils:119 -       Found single-call assistant pair at 1. Pair cost=57, Pair msgs=2
[DEBUG] 2025-08-24 20:29:16,674 - src.swarm.utils.context_utils:122 -       Budget Check: (CurrentTokens=116 + PairTokens=57 <= TargetTokens=148) -> False
[DEBUG] 2025-08-24 20:29:16,674 - src.swarm.utils.context_utils:123 -       Budget Check: (CurrentMsgs=5 + PairMsgs=2 <= TargetMsgs=19) -> True
[DEBUG] 2025-08-24 20:29:16,674 - src.swarm.utils.context_utils:131 -         Pair doesn't fit budget.
[DEBUG] 2025-08-24 20:29:16,674 - src.swarm.utils.context_utils:135 -     -> Case 1 Result: Pair found but deferred or didn't fit.
[DEBUG] 2025-08-24 20:29:16,674 - src.swarm.utils.context_utils:200 -   [Loop Default Decrement] No action/break for index 2.
[DEBUG] 2025-08-24 20:29:16,674 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=1, Role=assistant, Tokens=33. Kept: Msgs=5, Tokens=116
[DEBUG] 2025-08-24 20:29:16,674 - src.swarm.utils.context_utils:140 -     -> Case 2: Assistant w/ Tools at index 1
[DEBUG] 2025-08-24 20:29:16,674 - src.swarm.utils.context_utils:153 -       Found 1 tools for 1 calls. Pair Cost=57, Pair Len=2.
[DEBUG] 2025-08-24 20:29:16,674 - src.swarm.utils.context_utils:160 -       Budget Check: (CurrentTokens=116 + PairTokens=57 <= TargetTokens=148) -> False
[DEBUG] 2025-08-24 20:29:16,674 - src.swarm.utils.context_utils:161 -       Budget Check: (CurrentMsgs=5 + PairMsgs=2 <= TargetMsgs=19) -> True
[DEBUG] 2025-08-24 20:29:16,674 - src.swarm.utils.context_utils:175 -       Pair doesn't fit or not all tools found.
[DEBUG] 2025-08-24 20:29:16,674 - src.swarm.utils.context_utils:183 -       Cannot keep single assistant 1 either (Tokens fit: False, Msgs fit: True).
[DEBUG] 2025-08-24 20:29:16,675 - src.swarm.utils.context_utils:200 -   [Loop Default Decrement] No action/break for index 1.
[DEBUG] 2025-08-24 20:29:16,675 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=0, Role=user, Tokens=12. Kept: Msgs=5, Tokens=116
[DEBUG] 2025-08-24 20:29:16,675 - src.swarm.utils.context_utils:187 -     -> Case 3: Regular Message at index 0
[INFO] 2025-08-24 20:29:16,675 - src.swarm.utils.context_utils:191 -     -> Action: KEEPING SINGLE message 0
[INFO] 2025-08-24 20:29:16,675 - src.swarm.utils.context_utils:206 - Sophisticated truncation result: 7 msgs (1 sys, 6 non-sys), ~150 tokens.
[INFO] 2025-08-24 20:29:16,675 - src.swarm.utils.context_utils:275 - --- Finished Truncation --- Result Msgs: 7
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,675 - --- Test Passed [PairsMultiCutUser] ---
----------------------------------------------------------------------------------------------------------------------------- Captured log call ------------------------------------------------------------------------------------------------------------------------------
INFO     src.swarm.utils.context_utils:context_utils.py:242 --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 170, Max Messages: 20, Input Msgs: 9
INFO     src.swarm.utils.context_utils:context_utils.py:76 Sophisticated truncation. Target: 19 msgs, 148 tokens.
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=7, Role=assistant, Tokens=10. Kept: Msgs=0, Tokens=0
DEBUG    src.swarm.utils.context_utils:context_utils.py:187     -> Case 3: Regular Message at index 7
INFO     src.swarm.utils.context_utils:context_utils.py:191     -> Action: KEEPING SINGLE message 7
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=6, Role=tool, Tokens=27. Kept: Msgs=1, Tokens=10
DEBUG    src.swarm.utils.context_utils:context_utils.py:99     -> Case 1: Tool Msg (ID: call_t2)
DEBUG    src.swarm.utils.context_utils:context_utils.py:119       Found single-call assistant pair at 5. Pair cost=64, Pair msgs=2
DEBUG    src.swarm.utils.context_utils:context_utils.py:122       Budget Check: (CurrentTokens=10 + PairTokens=64 <= TargetTokens=148) -> True
DEBUG    src.swarm.utils.context_utils:context_utils.py:123       Budget Check: (CurrentMsgs=1 + PairMsgs=2 <= TargetMsgs=19) -> True
INFO     src.swarm.utils.context_utils:context_utils.py:125       Action: KEEPING Pair T(idx 6)+A(idx 5)
DEBUG    src.swarm.utils.context_utils:context_utils.py:80   [Loop Skip] Idx 5 already kept.
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=4, Role=user, Tokens=22. Kept: Msgs=3, Tokens=74
DEBUG    src.swarm.utils.context_utils:context_utils.py:187     -> Case 3: Regular Message at index 4
INFO     src.swarm.utils.context_utils:context_utils.py:191     -> Action: KEEPING SINGLE message 4
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=3, Role=assistant, Tokens=20. Kept: Msgs=4, Tokens=96
DEBUG    src.swarm.utils.context_utils:context_utils.py:187     -> Case 3: Regular Message at index 3
INFO     src.swarm.utils.context_utils:context_utils.py:191     -> Action: KEEPING SINGLE message 3
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=2, Role=tool, Tokens=24. Kept: Msgs=5, Tokens=116
DEBUG    src.swarm.utils.context_utils:context_utils.py:99     -> Case 1: Tool Msg (ID: call_t1)
DEBUG    src.swarm.utils.context_utils:context_utils.py:119       Found single-call assistant pair at 1. Pair cost=57, Pair msgs=2
DEBUG    src.swarm.utils.context_utils:context_utils.py:122       Budget Check: (CurrentTokens=116 + PairTokens=57 <= TargetTokens=148) -> False
DEBUG    src.swarm.utils.context_utils:context_utils.py:123       Budget Check: (CurrentMsgs=5 + PairMsgs=2 <= TargetMsgs=19) -> True
DEBUG    src.swarm.utils.context_utils:context_utils.py:131         Pair doesn't fit budget.
DEBUG    src.swarm.utils.context_utils:context_utils.py:135     -> Case 1 Result: Pair found but deferred or didn't fit.
DEBUG    src.swarm.utils.context_utils:context_utils.py:200   [Loop Default Decrement] No action/break for index 2.
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=1, Role=assistant, Tokens=33. Kept: Msgs=5, Tokens=116
DEBUG    src.swarm.utils.context_utils:context_utils.py:140     -> Case 2: Assistant w/ Tools at index 1
DEBUG    src.swarm.utils.context_utils:context_utils.py:153       Found 1 tools for 1 calls. Pair Cost=57, Pair Len=2.
DEBUG    src.swarm.utils.context_utils:context_utils.py:160       Budget Check: (CurrentTokens=116 + PairTokens=57 <= TargetTokens=148) -> False
DEBUG    src.swarm.utils.context_utils:context_utils.py:161       Budget Check: (CurrentMsgs=5 + PairMsgs=2 <= TargetMsgs=19) -> True
DEBUG    src.swarm.utils.context_utils:context_utils.py:175       Pair doesn't fit or not all tools found.
DEBUG    src.swarm.utils.context_utils:context_utils.py:183       Cannot keep single assistant 1 either (Tokens fit: False, Msgs fit: True).
DEBUG    src.swarm.utils.context_utils:context_utils.py:200   [Loop Default Decrement] No action/break for index 1.
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=0, Role=user, Tokens=12. Kept: Msgs=5, Tokens=116
DEBUG    src.swarm.utils.context_utils:context_utils.py:187     -> Case 3: Regular Message at index 0
INFO     src.swarm.utils.context_utils:context_utils.py:191     -> Action: KEEPING SINGLE message 0
INFO     src.swarm.utils.context_utils:context_utils.py:206 Sophisticated truncation result: 7 msgs (1 sys, 6 non-sys), ~150 tokens.
INFO     src.swarm.utils.context_utils:context_utils.py:275 --- Finished Truncation --- Result Msgs: 7
______________________________________________________________________________________________________________ test_pairs_preserves_multi_step_cuts_first_pair _______________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,678 - 
--- Running Truncation Test [PairsMultiCutPair] (Mode: pairs, MaxTk: 100, MaxMsg: 20) ---
[INFO] 2025-08-24 20:29:16,678 - src.swarm.utils.context_utils:242 - --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 100, Max Messages: 20, Input Msgs: 9
[INFO] 2025-08-24 20:29:16,678 - src.swarm.utils.context_utils:76 - Sophisticated truncation. Target: 19 msgs, 78 tokens.
[DEBUG] 2025-08-24 20:29:16,678 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=7, Role=assistant, Tokens=10. Kept: Msgs=0, Tokens=0
[DEBUG] 2025-08-24 20:29:16,678 - src.swarm.utils.context_utils:187 -     -> Case 3: Regular Message at index 7
[INFO] 2025-08-24 20:29:16,678 - src.swarm.utils.context_utils:191 -     -> Action: KEEPING SINGLE message 7
[DEBUG] 2025-08-24 20:29:16,678 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=6, Role=tool, Tokens=27. Kept: Msgs=1, Tokens=10
[DEBUG] 2025-08-24 20:29:16,678 - src.swarm.utils.context_utils:99 -     -> Case 1: Tool Msg (ID: call_t2)
[DEBUG] 2025-08-24 20:29:16,678 - src.swarm.utils.context_utils:119 -       Found single-call assistant pair at 5. Pair cost=64, Pair msgs=2
[DEBUG] 2025-08-24 20:29:16,678 - src.swarm.utils.context_utils:122 -       Budget Check: (CurrentTokens=10 + PairTokens=64 <= TargetTokens=78) -> True
[DEBUG] 2025-08-24 20:29:16,678 - src.swarm.utils.context_utils:123 -       Budget Check: (CurrentMsgs=1 + PairMsgs=2 <= TargetMsgs=19) -> True
[INFO] 2025-08-24 20:29:16,678 - src.swarm.utils.context_utils:125 -       Action: KEEPING Pair T(idx 6)+A(idx 5)
[DEBUG] 2025-08-24 20:29:16,678 - src.swarm.utils.context_utils:80 -   [Loop Skip] Idx 5 already kept.
[DEBUG] 2025-08-24 20:29:16,678 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=4, Role=user, Tokens=22. Kept: Msgs=3, Tokens=74
[DEBUG] 2025-08-24 20:29:16,678 - src.swarm.utils.context_utils:187 -     -> Case 3: Regular Message at index 4
[INFO] 2025-08-24 20:29:16,678 - src.swarm.utils.context_utils:195 -     -> Action: SKIPPING message 4 (Tokens fit: False, Msgs fit: True). Stopping.
[INFO] 2025-08-24 20:29:16,678 - src.swarm.utils.context_utils:206 - Sophisticated truncation result: 4 msgs (1 sys, 3 non-sys), ~96 tokens.
[INFO] 2025-08-24 20:29:16,678 - src.swarm.utils.context_utils:275 - --- Finished Truncation --- Result Msgs: 4
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,678 - --- Test Passed [PairsMultiCutPair] ---
----------------------------------------------------------------------------------------------------------------------------- Captured log call ------------------------------------------------------------------------------------------------------------------------------
INFO     src.swarm.utils.context_utils:context_utils.py:242 --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 100, Max Messages: 20, Input Msgs: 9
INFO     src.swarm.utils.context_utils:context_utils.py:76 Sophisticated truncation. Target: 19 msgs, 78 tokens.
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=7, Role=assistant, Tokens=10. Kept: Msgs=0, Tokens=0
DEBUG    src.swarm.utils.context_utils:context_utils.py:187     -> Case 3: Regular Message at index 7
INFO     src.swarm.utils.context_utils:context_utils.py:191     -> Action: KEEPING SINGLE message 7
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=6, Role=tool, Tokens=27. Kept: Msgs=1, Tokens=10
DEBUG    src.swarm.utils.context_utils:context_utils.py:99     -> Case 1: Tool Msg (ID: call_t2)
DEBUG    src.swarm.utils.context_utils:context_utils.py:119       Found single-call assistant pair at 5. Pair cost=64, Pair msgs=2
DEBUG    src.swarm.utils.context_utils:context_utils.py:122       Budget Check: (CurrentTokens=10 + PairTokens=64 <= TargetTokens=78) -> True
DEBUG    src.swarm.utils.context_utils:context_utils.py:123       Budget Check: (CurrentMsgs=1 + PairMsgs=2 <= TargetMsgs=19) -> True
INFO     src.swarm.utils.context_utils:context_utils.py:125       Action: KEEPING Pair T(idx 6)+A(idx 5)
DEBUG    src.swarm.utils.context_utils:context_utils.py:80   [Loop Skip] Idx 5 already kept.
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=4, Role=user, Tokens=22. Kept: Msgs=3, Tokens=74
DEBUG    src.swarm.utils.context_utils:context_utils.py:187     -> Case 3: Regular Message at index 4
INFO     src.swarm.utils.context_utils:context_utils.py:195     -> Action: SKIPPING message 4 (Tokens fit: False, Msgs fit: True). Stopping.
INFO     src.swarm.utils.context_utils:context_utils.py:206 Sophisticated truncation result: 4 msgs (1 sys, 3 non-sys), ~96 tokens.
INFO     src.swarm.utils.context_utils:context_utils.py:275 --- Finished Truncation --- Result Msgs: 4
___________________________________________________________________________________________________________ test_pairs_drops_lone_tool_due_to_separation_or_limit ____________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,681 - 
--- Running Truncation Test [PairsDropLoneToolLimit] (Mode: pairs, MaxTk: 100, MaxMsg: 10) ---
[INFO] 2025-08-24 20:29:16,681 - src.swarm.utils.context_utils:242 - --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 100, Max Messages: 10, Input Msgs: 6
[INFO] 2025-08-24 20:29:16,681 - src.swarm.utils.context_utils:76 - Sophisticated truncation. Target: 9 msgs, 78 tokens.
[DEBUG] 2025-08-24 20:29:16,681 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=4, Role=assistant, Tokens=20. Kept: Msgs=0, Tokens=0
[DEBUG] 2025-08-24 20:29:16,681 - src.swarm.utils.context_utils:187 -     -> Case 3: Regular Message at index 4
[INFO] 2025-08-24 20:29:16,681 - src.swarm.utils.context_utils:191 -     -> Action: KEEPING SINGLE message 4
[DEBUG] 2025-08-24 20:29:16,681 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=3, Role=tool, Tokens=24. Kept: Msgs=1, Tokens=20
[DEBUG] 2025-08-24 20:29:16,681 - src.swarm.utils.context_utils:99 -     -> Case 1: Tool Msg (ID: call_t1)
[DEBUG] 2025-08-24 20:29:16,681 - src.swarm.utils.context_utils:119 -       Found single-call assistant pair at 1. Pair cost=57, Pair msgs=2
[DEBUG] 2025-08-24 20:29:16,681 - src.swarm.utils.context_utils:122 -       Budget Check: (CurrentTokens=20 + PairTokens=57 <= TargetTokens=78) -> True
[DEBUG] 2025-08-24 20:29:16,682 - src.swarm.utils.context_utils:123 -       Budget Check: (CurrentMsgs=1 + PairMsgs=2 <= TargetMsgs=9) -> True
[INFO] 2025-08-24 20:29:16,682 - src.swarm.utils.context_utils:125 -       Action: KEEPING Pair T(idx 3)+A(idx 1)
[DEBUG] 2025-08-24 20:29:16,682 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=2, Role=user, Tokens=22. Kept: Msgs=3, Tokens=77
[DEBUG] 2025-08-24 20:29:16,682 - src.swarm.utils.context_utils:187 -     -> Case 3: Regular Message at index 2
[INFO] 2025-08-24 20:29:16,682 - src.swarm.utils.context_utils:195 -     -> Action: SKIPPING message 2 (Tokens fit: False, Msgs fit: True). Stopping.
[INFO] 2025-08-24 20:29:16,682 - src.swarm.utils.context_utils:206 - Sophisticated truncation result: 4 msgs (1 sys, 3 non-sys), ~99 tokens.
[INFO] 2025-08-24 20:29:16,682 - src.swarm.utils.context_utils:275 - --- Finished Truncation --- Result Msgs: 4
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,682 - --- Test Passed [PairsDropLoneToolLimit] ---
[WARNING] TEST_TRUNC_CORE - 2025-08-24 20:29:16,682 - Stable mock cost NF id=280065056807744. Recalc.
[WARNING] TEST_TRUNC_CORE - 2025-08-24 20:29:16,682 - Stable mock cost NF id=280065056801280. Recalc.
[WARNING] TEST_TRUNC_CORE - 2025-08-24 20:29:16,682 - Stable mock cost NF id=280065056812800. Recalc.
[WARNING] TEST_TRUNC_CORE - 2025-08-24 20:29:16,682 - Stable mock cost NF id=280065056811264. Recalc.
[WARNING] TEST_TRUNC_CORE - 2025-08-24 20:29:16,682 - Stable mock cost NF id=280065056775360. Recalc.
[WARNING] TEST_TRUNC_CORE - 2025-08-24 20:29:16,682 - Stable mock cost NF id=280065056778048. Recalc.
[WARNING] TEST_TRUNC_CORE - 2025-08-24 20:29:16,682 - Stable mock cost NF id=280065056805632. Recalc.
[WARNING] TEST_TRUNC_CORE - 2025-08-24 20:29:16,682 - Stable mock cost NF id=280065056810880. Recalc.
[WARNING] TEST_TRUNC_CORE - 2025-08-24 20:29:16,682 - Stable mock cost NF id=280065056812864. Recalc.
[WARNING] TEST_TRUNC_CORE - 2025-08-24 20:29:16,682 - Stable mock cost NF id=280065056805056. Recalc.
[WARNING] TEST_TRUNC_CORE - 2025-08-24 20:29:16,682 - Stable mock cost NF id=280065056811904. Recalc.
[WARNING] TEST_TRUNC_CORE - 2025-08-24 20:29:16,682 - Stable mock cost NF id=280065056815104. Recalc.
[WARNING] TEST_TRUNC_CORE - 2025-08-24 20:29:16,682 - Stable mock cost NF id=280065056811328. Recalc.
[WARNING] TEST_TRUNC_CORE - 2025-08-24 20:29:16,682 - Stable mock cost NF id=280065047580032. Recalc.
[WARNING] TEST_TRUNC_CORE - 2025-08-24 20:29:16,682 - Stable mock cost NF id=280065047586816. Recalc.
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,682 - 
--- Running Truncation Test [PairsDropLoneToolSep] (Mode: pairs, MaxTk: 100, MaxMsg: 10) ---
[INFO] 2025-08-24 20:29:16,682 - src.swarm.utils.context_utils:242 - --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 100, Max Messages: 10, Input Msgs: 20
[INFO] 2025-08-24 20:29:16,682 - src.swarm.utils.context_utils:76 - Sophisticated truncation. Target: 9 msgs, 78 tokens.
[DEBUG] 2025-08-24 20:29:16,682 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=18, Role=assistant, Tokens=20. Kept: Msgs=0, Tokens=0
[DEBUG] 2025-08-24 20:29:16,682 - src.swarm.utils.context_utils:187 -     -> Case 3: Regular Message at index 18
[INFO] 2025-08-24 20:29:16,683 - src.swarm.utils.context_utils:191 -     -> Action: KEEPING SINGLE message 18
[DEBUG] 2025-08-24 20:29:16,683 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=17, Role=tool, Tokens=24. Kept: Msgs=1, Tokens=20
[DEBUG] 2025-08-24 20:29:16,683 - src.swarm.utils.context_utils:99 -     -> Case 1: Tool Msg (ID: call_t1)
[DEBUG] 2025-08-24 20:29:16,683 - src.swarm.utils.context_utils:119 -       Found single-call assistant pair at 15. Pair cost=57, Pair msgs=2
[DEBUG] 2025-08-24 20:29:16,683 - src.swarm.utils.context_utils:122 -       Budget Check: (CurrentTokens=20 + PairTokens=57 <= TargetTokens=78) -> True
[DEBUG] 2025-08-24 20:29:16,683 - src.swarm.utils.context_utils:123 -       Budget Check: (CurrentMsgs=1 + PairMsgs=2 <= TargetMsgs=9) -> True
[INFO] 2025-08-24 20:29:16,683 - src.swarm.utils.context_utils:125 -       Action: KEEPING Pair T(idx 17)+A(idx 15)
[DEBUG] 2025-08-24 20:29:16,683 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=16, Role=user, Tokens=22. Kept: Msgs=3, Tokens=77
[DEBUG] 2025-08-24 20:29:16,683 - src.swarm.utils.context_utils:187 -     -> Case 3: Regular Message at index 16
[INFO] 2025-08-24 20:29:16,683 - src.swarm.utils.context_utils:195 -     -> Action: SKIPPING message 16 (Tokens fit: False, Msgs fit: True). Stopping.
[INFO] 2025-08-24 20:29:16,683 - src.swarm.utils.context_utils:206 - Sophisticated truncation result: 4 msgs (1 sys, 3 non-sys), ~99 tokens.
[INFO] 2025-08-24 20:29:16,683 - src.swarm.utils.context_utils:275 - --- Finished Truncation --- Result Msgs: 4
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,683 - --- Test Passed [PairsDropLoneToolSep] ---
----------------------------------------------------------------------------------------------------------------------------- Captured log call ------------------------------------------------------------------------------------------------------------------------------
INFO     src.swarm.utils.context_utils:context_utils.py:242 --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 100, Max Messages: 10, Input Msgs: 6
INFO     src.swarm.utils.context_utils:context_utils.py:76 Sophisticated truncation. Target: 9 msgs, 78 tokens.
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=4, Role=assistant, Tokens=20. Kept: Msgs=0, Tokens=0
DEBUG    src.swarm.utils.context_utils:context_utils.py:187     -> Case 3: Regular Message at index 4
INFO     src.swarm.utils.context_utils:context_utils.py:191     -> Action: KEEPING SINGLE message 4
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=3, Role=tool, Tokens=24. Kept: Msgs=1, Tokens=20
DEBUG    src.swarm.utils.context_utils:context_utils.py:99     -> Case 1: Tool Msg (ID: call_t1)
DEBUG    src.swarm.utils.context_utils:context_utils.py:119       Found single-call assistant pair at 1. Pair cost=57, Pair msgs=2
DEBUG    src.swarm.utils.context_utils:context_utils.py:122       Budget Check: (CurrentTokens=20 + PairTokens=57 <= TargetTokens=78) -> True
DEBUG    src.swarm.utils.context_utils:context_utils.py:123       Budget Check: (CurrentMsgs=1 + PairMsgs=2 <= TargetMsgs=9) -> True
INFO     src.swarm.utils.context_utils:context_utils.py:125       Action: KEEPING Pair T(idx 3)+A(idx 1)
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=2, Role=user, Tokens=22. Kept: Msgs=3, Tokens=77
DEBUG    src.swarm.utils.context_utils:context_utils.py:187     -> Case 3: Regular Message at index 2
INFO     src.swarm.utils.context_utils:context_utils.py:195     -> Action: SKIPPING message 2 (Tokens fit: False, Msgs fit: True). Stopping.
INFO     src.swarm.utils.context_utils:context_utils.py:206 Sophisticated truncation result: 4 msgs (1 sys, 3 non-sys), ~99 tokens.
INFO     src.swarm.utils.context_utils:context_utils.py:275 --- Finished Truncation --- Result Msgs: 4
INFO     src.swarm.utils.context_utils:context_utils.py:242 --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 100, Max Messages: 10, Input Msgs: 20
INFO     src.swarm.utils.context_utils:context_utils.py:76 Sophisticated truncation. Target: 9 msgs, 78 tokens.
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=18, Role=assistant, Tokens=20. Kept: Msgs=0, Tokens=0
DEBUG    src.swarm.utils.context_utils:context_utils.py:187     -> Case 3: Regular Message at index 18
INFO     src.swarm.utils.context_utils:context_utils.py:191     -> Action: KEEPING SINGLE message 18
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=17, Role=tool, Tokens=24. Kept: Msgs=1, Tokens=20
DEBUG    src.swarm.utils.context_utils:context_utils.py:99     -> Case 1: Tool Msg (ID: call_t1)
DEBUG    src.swarm.utils.context_utils:context_utils.py:119       Found single-call assistant pair at 15. Pair cost=57, Pair msgs=2
DEBUG    src.swarm.utils.context_utils:context_utils.py:122       Budget Check: (CurrentTokens=20 + PairTokens=57 <= TargetTokens=78) -> True
DEBUG    src.swarm.utils.context_utils:context_utils.py:123       Budget Check: (CurrentMsgs=1 + PairMsgs=2 <= TargetMsgs=9) -> True
INFO     src.swarm.utils.context_utils:context_utils.py:125       Action: KEEPING Pair T(idx 17)+A(idx 15)
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=16, Role=user, Tokens=22. Kept: Msgs=3, Tokens=77
DEBUG    src.swarm.utils.context_utils:context_utils.py:187     -> Case 3: Regular Message at index 16
INFO     src.swarm.utils.context_utils:context_utils.py:195     -> Action: SKIPPING message 16 (Tokens fit: False, Msgs fit: True). Stopping.
INFO     src.swarm.utils.context_utils:context_utils.py:206 Sophisticated truncation result: 4 msgs (1 sys, 3 non-sys), ~99 tokens.
INFO     src.swarm.utils.context_utils:context_utils.py:275 --- Finished Truncation --- Result Msgs: 4
__________________________________________________________________________________________________________________ test_pairs_handles_missing_tool_response __________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,686 - 
--- Running Truncation Test [PairsMissingToolResp] (Mode: pairs, MaxTk: 80, MaxMsg: 10) ---
[INFO] 2025-08-24 20:29:16,686 - src.swarm.utils.context_utils:242 - --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 80, Max Messages: 10, Input Msgs: 5
[INFO] 2025-08-24 20:29:16,686 - src.swarm.utils.context_utils:76 - Sophisticated truncation. Target: 9 msgs, 58 tokens.
[DEBUG] 2025-08-24 20:29:16,686 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=3, Role=assistant, Tokens=20. Kept: Msgs=0, Tokens=0
[DEBUG] 2025-08-24 20:29:16,686 - src.swarm.utils.context_utils:187 -     -> Case 3: Regular Message at index 3
[INFO] 2025-08-24 20:29:16,686 - src.swarm.utils.context_utils:191 -     -> Action: KEEPING SINGLE message 3
[DEBUG] 2025-08-24 20:29:16,686 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=2, Role=user, Tokens=22. Kept: Msgs=1, Tokens=20
[DEBUG] 2025-08-24 20:29:16,686 - src.swarm.utils.context_utils:187 -     -> Case 3: Regular Message at index 2
[INFO] 2025-08-24 20:29:16,686 - src.swarm.utils.context_utils:191 -     -> Action: KEEPING SINGLE message 2
[DEBUG] 2025-08-24 20:29:16,686 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=1, Role=assistant, Tokens=33. Kept: Msgs=2, Tokens=42
[DEBUG] 2025-08-24 20:29:16,686 - src.swarm.utils.context_utils:140 -     -> Case 2: Assistant w/ Tools at index 1
[DEBUG] 2025-08-24 20:29:16,686 - src.swarm.utils.context_utils:153 -       Found 0 tools for 1 calls. Pair Cost=33, Pair Len=1.
[DEBUG] 2025-08-24 20:29:16,686 - src.swarm.utils.context_utils:156 -       Did not find all expected tools for this assistant call.
[DEBUG] 2025-08-24 20:29:16,686 - src.swarm.utils.context_utils:160 -       Budget Check: (CurrentTokens=42 + PairTokens=33 <= TargetTokens=58) -> False
[DEBUG] 2025-08-24 20:29:16,686 - src.swarm.utils.context_utils:161 -       Budget Check: (CurrentMsgs=2 + PairMsgs=1 <= TargetMsgs=9) -> True
[DEBUG] 2025-08-24 20:29:16,686 - src.swarm.utils.context_utils:175 -       Pair doesn't fit or not all tools found.
[DEBUG] 2025-08-24 20:29:16,686 - src.swarm.utils.context_utils:183 -       Cannot keep single assistant 1 either (Tokens fit: False, Msgs fit: True).
[DEBUG] 2025-08-24 20:29:16,686 - src.swarm.utils.context_utils:200 -   [Loop Default Decrement] No action/break for index 1.
[DEBUG] 2025-08-24 20:29:16,686 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=0, Role=user, Tokens=12. Kept: Msgs=2, Tokens=42
[DEBUG] 2025-08-24 20:29:16,686 - src.swarm.utils.context_utils:187 -     -> Case 3: Regular Message at index 0
[INFO] 2025-08-24 20:29:16,686 - src.swarm.utils.context_utils:191 -     -> Action: KEEPING SINGLE message 0
[INFO] 2025-08-24 20:29:16,687 - src.swarm.utils.context_utils:206 - Sophisticated truncation result: 4 msgs (1 sys, 3 non-sys), ~76 tokens.
[INFO] 2025-08-24 20:29:16,687 - src.swarm.utils.context_utils:275 - --- Finished Truncation --- Result Msgs: 4
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,687 - --- Test Passed [PairsMissingToolResp] ---
----------------------------------------------------------------------------------------------------------------------------- Captured log call ------------------------------------------------------------------------------------------------------------------------------
INFO     src.swarm.utils.context_utils:context_utils.py:242 --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 80, Max Messages: 10, Input Msgs: 5
INFO     src.swarm.utils.context_utils:context_utils.py:76 Sophisticated truncation. Target: 9 msgs, 58 tokens.
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=3, Role=assistant, Tokens=20. Kept: Msgs=0, Tokens=0
DEBUG    src.swarm.utils.context_utils:context_utils.py:187     -> Case 3: Regular Message at index 3
INFO     src.swarm.utils.context_utils:context_utils.py:191     -> Action: KEEPING SINGLE message 3
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=2, Role=user, Tokens=22. Kept: Msgs=1, Tokens=20
DEBUG    src.swarm.utils.context_utils:context_utils.py:187     -> Case 3: Regular Message at index 2
INFO     src.swarm.utils.context_utils:context_utils.py:191     -> Action: KEEPING SINGLE message 2
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=1, Role=assistant, Tokens=33. Kept: Msgs=2, Tokens=42
DEBUG    src.swarm.utils.context_utils:context_utils.py:140     -> Case 2: Assistant w/ Tools at index 1
DEBUG    src.swarm.utils.context_utils:context_utils.py:153       Found 0 tools for 1 calls. Pair Cost=33, Pair Len=1.
DEBUG    src.swarm.utils.context_utils:context_utils.py:156       Did not find all expected tools for this assistant call.
DEBUG    src.swarm.utils.context_utils:context_utils.py:160       Budget Check: (CurrentTokens=42 + PairTokens=33 <= TargetTokens=58) -> False
DEBUG    src.swarm.utils.context_utils:context_utils.py:161       Budget Check: (CurrentMsgs=2 + PairMsgs=1 <= TargetMsgs=9) -> True
DEBUG    src.swarm.utils.context_utils:context_utils.py:175       Pair doesn't fit or not all tools found.
DEBUG    src.swarm.utils.context_utils:context_utils.py:183       Cannot keep single assistant 1 either (Tokens fit: False, Msgs fit: True).
DEBUG    src.swarm.utils.context_utils:context_utils.py:200   [Loop Default Decrement] No action/break for index 1.
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=0, Role=user, Tokens=12. Kept: Msgs=2, Tokens=42
DEBUG    src.swarm.utils.context_utils:context_utils.py:187     -> Case 3: Regular Message at index 0
INFO     src.swarm.utils.context_utils:context_utils.py:191     -> Action: KEEPING SINGLE message 0
INFO     src.swarm.utils.context_utils:context_utils.py:206 Sophisticated truncation result: 4 msgs (1 sys, 3 non-sys), ~76 tokens.
INFO     src.swarm.utils.context_utils:context_utils.py:275 --- Finished Truncation --- Result Msgs: 4
________________________________________________________________________________________________________________ test_pairs_interspersed_messages_truncation _________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,689 - 
--- Running Truncation Test [PairsInterspersed] (Mode: pairs, MaxTk: 100, MaxMsg: 10) ---
[INFO] 2025-08-24 20:29:16,689 - src.swarm.utils.context_utils:242 - --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 100, Max Messages: 10, Input Msgs: 8
[INFO] 2025-08-24 20:29:16,690 - src.swarm.utils.context_utils:76 - Sophisticated truncation. Target: 9 msgs, 78 tokens.
[DEBUG] 2025-08-24 20:29:16,690 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=6, Role=assistant, Tokens=19. Kept: Msgs=0, Tokens=0
[DEBUG] 2025-08-24 20:29:16,690 - src.swarm.utils.context_utils:187 -     -> Case 3: Regular Message at index 6
[INFO] 2025-08-24 20:29:16,690 - src.swarm.utils.context_utils:191 -     -> Action: KEEPING SINGLE message 6
[DEBUG] 2025-08-24 20:29:16,690 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=5, Role=user, Tokens=20. Kept: Msgs=1, Tokens=19
[DEBUG] 2025-08-24 20:29:16,690 - src.swarm.utils.context_utils:187 -     -> Case 3: Regular Message at index 5
[INFO] 2025-08-24 20:29:16,690 - src.swarm.utils.context_utils:191 -     -> Action: KEEPING SINGLE message 5
[DEBUG] 2025-08-24 20:29:16,690 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=4, Role=assistant, Tokens=20. Kept: Msgs=2, Tokens=39
[DEBUG] 2025-08-24 20:29:16,690 - src.swarm.utils.context_utils:187 -     -> Case 3: Regular Message at index 4
[INFO] 2025-08-24 20:29:16,690 - src.swarm.utils.context_utils:191 -     -> Action: KEEPING SINGLE message 4
[DEBUG] 2025-08-24 20:29:16,690 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=3, Role=tool, Tokens=24. Kept: Msgs=3, Tokens=59
[DEBUG] 2025-08-24 20:29:16,690 - src.swarm.utils.context_utils:99 -     -> Case 1: Tool Msg (ID: call_t1)
[DEBUG] 2025-08-24 20:29:16,690 - src.swarm.utils.context_utils:119 -       Found single-call assistant pair at 1. Pair cost=57, Pair msgs=2
[DEBUG] 2025-08-24 20:29:16,690 - src.swarm.utils.context_utils:122 -       Budget Check: (CurrentTokens=59 + PairTokens=57 <= TargetTokens=78) -> False
[DEBUG] 2025-08-24 20:29:16,690 - src.swarm.utils.context_utils:123 -       Budget Check: (CurrentMsgs=3 + PairMsgs=2 <= TargetMsgs=9) -> True
[DEBUG] 2025-08-24 20:29:16,690 - src.swarm.utils.context_utils:131 -         Pair doesn't fit budget.
[DEBUG] 2025-08-24 20:29:16,690 - src.swarm.utils.context_utils:135 -     -> Case 1 Result: Pair found but deferred or didn't fit.
[DEBUG] 2025-08-24 20:29:16,690 - src.swarm.utils.context_utils:200 -   [Loop Default Decrement] No action/break for index 3.
[DEBUG] 2025-08-24 20:29:16,690 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=2, Role=user, Tokens=22. Kept: Msgs=3, Tokens=59
[DEBUG] 2025-08-24 20:29:16,690 - src.swarm.utils.context_utils:187 -     -> Case 3: Regular Message at index 2
[INFO] 2025-08-24 20:29:16,690 - src.swarm.utils.context_utils:195 -     -> Action: SKIPPING message 2 (Tokens fit: False, Msgs fit: True). Stopping.
[INFO] 2025-08-24 20:29:16,690 - src.swarm.utils.context_utils:206 - Sophisticated truncation result: 4 msgs (1 sys, 3 non-sys), ~81 tokens.
[INFO] 2025-08-24 20:29:16,690 - src.swarm.utils.context_utils:275 - --- Finished Truncation --- Result Msgs: 4
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,690 - --- Test Passed [PairsInterspersed] ---
----------------------------------------------------------------------------------------------------------------------------- Captured log call ------------------------------------------------------------------------------------------------------------------------------
INFO     src.swarm.utils.context_utils:context_utils.py:242 --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 100, Max Messages: 10, Input Msgs: 8
INFO     src.swarm.utils.context_utils:context_utils.py:76 Sophisticated truncation. Target: 9 msgs, 78 tokens.
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=6, Role=assistant, Tokens=19. Kept: Msgs=0, Tokens=0
DEBUG    src.swarm.utils.context_utils:context_utils.py:187     -> Case 3: Regular Message at index 6
INFO     src.swarm.utils.context_utils:context_utils.py:191     -> Action: KEEPING SINGLE message 6
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=5, Role=user, Tokens=20. Kept: Msgs=1, Tokens=19
DEBUG    src.swarm.utils.context_utils:context_utils.py:187     -> Case 3: Regular Message at index 5
INFO     src.swarm.utils.context_utils:context_utils.py:191     -> Action: KEEPING SINGLE message 5
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=4, Role=assistant, Tokens=20. Kept: Msgs=2, Tokens=39
DEBUG    src.swarm.utils.context_utils:context_utils.py:187     -> Case 3: Regular Message at index 4
INFO     src.swarm.utils.context_utils:context_utils.py:191     -> Action: KEEPING SINGLE message 4
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=3, Role=tool, Tokens=24. Kept: Msgs=3, Tokens=59
DEBUG    src.swarm.utils.context_utils:context_utils.py:99     -> Case 1: Tool Msg (ID: call_t1)
DEBUG    src.swarm.utils.context_utils:context_utils.py:119       Found single-call assistant pair at 1. Pair cost=57, Pair msgs=2
DEBUG    src.swarm.utils.context_utils:context_utils.py:122       Budget Check: (CurrentTokens=59 + PairTokens=57 <= TargetTokens=78) -> False
DEBUG    src.swarm.utils.context_utils:context_utils.py:123       Budget Check: (CurrentMsgs=3 + PairMsgs=2 <= TargetMsgs=9) -> True
DEBUG    src.swarm.utils.context_utils:context_utils.py:131         Pair doesn't fit budget.
DEBUG    src.swarm.utils.context_utils:context_utils.py:135     -> Case 1 Result: Pair found but deferred or didn't fit.
DEBUG    src.swarm.utils.context_utils:context_utils.py:200   [Loop Default Decrement] No action/break for index 3.
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=2, Role=user, Tokens=22. Kept: Msgs=3, Tokens=59
DEBUG    src.swarm.utils.context_utils:context_utils.py:187     -> Case 3: Regular Message at index 2
INFO     src.swarm.utils.context_utils:context_utils.py:195     -> Action: SKIPPING message 2 (Tokens fit: False, Msgs fit: True). Stopping.
INFO     src.swarm.utils.context_utils:context_utils.py:206 Sophisticated truncation result: 4 msgs (1 sys, 3 non-sys), ~81 tokens.
INFO     src.swarm.utils.context_utils:context_utils.py:275 --- Finished Truncation --- Result Msgs: 4
____________________________________________________________________________________________________________ test_pairs_system_message_priority_and_exceeds_limit ____________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,693 - 
--- Running Truncation Test [PairsSysExceeds] (Mode: pairs, MaxTk: 100, MaxMsg: 10) ---
[INFO] 2025-08-24 20:29:16,693 - src.swarm.utils.context_utils:242 - --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 100, Max Messages: 10, Input Msgs: 3
[INFO] 2025-08-24 20:29:16,693 - src.swarm.utils.context_utils:76 - Sophisticated truncation. Target: 9 msgs, 0 tokens.
[DEBUG] 2025-08-24 20:29:16,694 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=1, Role=assistant, Tokens=33. Kept: Msgs=0, Tokens=0
[DEBUG] 2025-08-24 20:29:16,694 - src.swarm.utils.context_utils:140 -     -> Case 2: Assistant w/ Tools at index 1
[DEBUG] 2025-08-24 20:29:16,694 - src.swarm.utils.context_utils:153 -       Found 0 tools for 1 calls. Pair Cost=33, Pair Len=1.
[DEBUG] 2025-08-24 20:29:16,694 - src.swarm.utils.context_utils:156 -       Did not find all expected tools for this assistant call.
[DEBUG] 2025-08-24 20:29:16,694 - src.swarm.utils.context_utils:160 -       Budget Check: (CurrentTokens=0 + PairTokens=33 <= TargetTokens=0) -> False
[DEBUG] 2025-08-24 20:29:16,694 - src.swarm.utils.context_utils:161 -       Budget Check: (CurrentMsgs=0 + PairMsgs=1 <= TargetMsgs=9) -> True
[DEBUG] 2025-08-24 20:29:16,694 - src.swarm.utils.context_utils:175 -       Pair doesn't fit or not all tools found.
[DEBUG] 2025-08-24 20:29:16,694 - src.swarm.utils.context_utils:183 -       Cannot keep single assistant 1 either (Tokens fit: False, Msgs fit: True).
[DEBUG] 2025-08-24 20:29:16,694 - src.swarm.utils.context_utils:200 -   [Loop Default Decrement] No action/break for index 1.
[DEBUG] 2025-08-24 20:29:16,694 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=0, Role=user, Tokens=12. Kept: Msgs=0, Tokens=0
[DEBUG] 2025-08-24 20:29:16,694 - src.swarm.utils.context_utils:187 -     -> Case 3: Regular Message at index 0
[INFO] 2025-08-24 20:29:16,694 - src.swarm.utils.context_utils:195 -     -> Action: SKIPPING message 0 (Tokens fit: False, Msgs fit: True). Stopping.
[INFO] 2025-08-24 20:29:16,694 - src.swarm.utils.context_utils:206 - Sophisticated truncation result: 1 msgs (1 sys, 0 non-sys), ~100 tokens.
[INFO] 2025-08-24 20:29:16,694 - src.swarm.utils.context_utils:275 - --- Finished Truncation --- Result Msgs: 1
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,694 - --- Test Passed [PairsSysExceeds] ---
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,694 - 
--- Running Truncation Test [PairsSysFits] (Mode: pairs, MaxTk: 200, MaxMsg: 10) ---
[INFO] 2025-08-24 20:29:16,694 - src.swarm.utils.context_utils:242 - --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 200, Max Messages: 10, Input Msgs: 3
[INFO] 2025-08-24 20:29:16,694 - src.swarm.utils.context_utils:75 - History fits.
[INFO] 2025-08-24 20:29:16,694 - src.swarm.utils.context_utils:275 - --- Finished Truncation --- Result Msgs: 3
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,694 - --- Test Passed [PairsSysFits] ---
----------------------------------------------------------------------------------------------------------------------------- Captured log call ------------------------------------------------------------------------------------------------------------------------------
INFO     src.swarm.utils.context_utils:context_utils.py:242 --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 100, Max Messages: 10, Input Msgs: 3
INFO     src.swarm.utils.context_utils:context_utils.py:76 Sophisticated truncation. Target: 9 msgs, 0 tokens.
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=1, Role=assistant, Tokens=33. Kept: Msgs=0, Tokens=0
DEBUG    src.swarm.utils.context_utils:context_utils.py:140     -> Case 2: Assistant w/ Tools at index 1
DEBUG    src.swarm.utils.context_utils:context_utils.py:153       Found 0 tools for 1 calls. Pair Cost=33, Pair Len=1.
DEBUG    src.swarm.utils.context_utils:context_utils.py:156       Did not find all expected tools for this assistant call.
DEBUG    src.swarm.utils.context_utils:context_utils.py:160       Budget Check: (CurrentTokens=0 + PairTokens=33 <= TargetTokens=0) -> False
DEBUG    src.swarm.utils.context_utils:context_utils.py:161       Budget Check: (CurrentMsgs=0 + PairMsgs=1 <= TargetMsgs=9) -> True
DEBUG    src.swarm.utils.context_utils:context_utils.py:175       Pair doesn't fit or not all tools found.
DEBUG    src.swarm.utils.context_utils:context_utils.py:183       Cannot keep single assistant 1 either (Tokens fit: False, Msgs fit: True).
DEBUG    src.swarm.utils.context_utils:context_utils.py:200   [Loop Default Decrement] No action/break for index 1.
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=0, Role=user, Tokens=12. Kept: Msgs=0, Tokens=0
DEBUG    src.swarm.utils.context_utils:context_utils.py:187     -> Case 3: Regular Message at index 0
INFO     src.swarm.utils.context_utils:context_utils.py:195     -> Action: SKIPPING message 0 (Tokens fit: False, Msgs fit: True). Stopping.
INFO     src.swarm.utils.context_utils:context_utils.py:206 Sophisticated truncation result: 1 msgs (1 sys, 0 non-sys), ~100 tokens.
INFO     src.swarm.utils.context_utils:context_utils.py:275 --- Finished Truncation --- Result Msgs: 1
INFO     src.swarm.utils.context_utils:context_utils.py:242 --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 200, Max Messages: 10, Input Msgs: 3
INFO     src.swarm.utils.context_utils:context_utils.py:75 History fits.
INFO     src.swarm.utils.context_utils:context_utils.py:275 --- Finished Truncation --- Result Msgs: 3
___________________________________________________________________________________________________________________ test_pairs_multi_call_in_one_turn_fits ___________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,697 - 
--- Running Truncation Test [PairsMultiCallFits] (Mode: pairs, MaxTk: 400, MaxMsg: 10) ---
[INFO] 2025-08-24 20:29:16,697 - src.swarm.utils.context_utils:242 - --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 400, Max Messages: 10, Input Msgs: 6
[INFO] 2025-08-24 20:29:16,697 - src.swarm.utils.context_utils:75 - History fits.
[INFO] 2025-08-24 20:29:16,697 - src.swarm.utils.context_utils:275 - --- Finished Truncation --- Result Msgs: 6
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,698 - --- Test Passed [PairsMultiCallFits] ---
----------------------------------------------------------------------------------------------------------------------------- Captured log call ------------------------------------------------------------------------------------------------------------------------------
INFO     src.swarm.utils.context_utils:context_utils.py:242 --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 400, Max Messages: 10, Input Msgs: 6
INFO     src.swarm.utils.context_utils:context_utils.py:75 History fits.
INFO     src.swarm.utils.context_utils:context_utils.py:275 --- Finished Truncation --- Result Msgs: 6
________________________________________________________________________________________________________________ test_pairs_multi_call_in_one_turn_cuts_user _________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,700 - 
--- Running Truncation Test [PairsMultiCallCutUser] (Mode: pairs, MaxTk: 150, MaxMsg: 10) ---
[INFO] 2025-08-24 20:29:16,700 - src.swarm.utils.context_utils:242 - --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 150, Max Messages: 10, Input Msgs: 6
[INFO] 2025-08-24 20:29:16,700 - src.swarm.utils.context_utils:76 - Sophisticated truncation. Target: 9 msgs, 128 tokens.
[DEBUG] 2025-08-24 20:29:16,700 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=4, Role=assistant, Tokens=25. Kept: Msgs=0, Tokens=0
[DEBUG] 2025-08-24 20:29:16,701 - src.swarm.utils.context_utils:187 -     -> Case 3: Regular Message at index 4
[INFO] 2025-08-24 20:29:16,701 - src.swarm.utils.context_utils:191 -     -> Action: KEEPING SINGLE message 4
[DEBUG] 2025-08-24 20:29:16,701 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=3, Role=tool, Tokens=22. Kept: Msgs=1, Tokens=25
[DEBUG] 2025-08-24 20:29:16,701 - src.swarm.utils.context_utils:99 -     -> Case 1: Tool Msg (ID: call_mc2)
[DEBUG] 2025-08-24 20:29:16,701 - src.swarm.utils.context_utils:114 -       Found assistant pair at 1, but it has multiple tool calls (2). Deferring to Case 2.
[DEBUG] 2025-08-24 20:29:16,701 - src.swarm.utils.context_utils:135 -     -> Case 1 Result: Pair found but deferred or didn't fit.
[DEBUG] 2025-08-24 20:29:16,701 - src.swarm.utils.context_utils:200 -   [Loop Default Decrement] No action/break for index 3.
[DEBUG] 2025-08-24 20:29:16,701 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=2, Role=tool, Tokens=22. Kept: Msgs=1, Tokens=25
[DEBUG] 2025-08-24 20:29:16,701 - src.swarm.utils.context_utils:99 -     -> Case 1: Tool Msg (ID: call_mc1)
[DEBUG] 2025-08-24 20:29:16,701 - src.swarm.utils.context_utils:114 -       Found assistant pair at 1, but it has multiple tool calls (2). Deferring to Case 2.
[DEBUG] 2025-08-24 20:29:16,701 - src.swarm.utils.context_utils:135 -     -> Case 1 Result: Pair found but deferred or didn't fit.
[DEBUG] 2025-08-24 20:29:16,701 - src.swarm.utils.context_utils:200 -   [Loop Default Decrement] No action/break for index 2.
[DEBUG] 2025-08-24 20:29:16,701 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=1, Role=assistant, Tokens=59. Kept: Msgs=1, Tokens=25
[DEBUG] 2025-08-24 20:29:16,701 - src.swarm.utils.context_utils:140 -     -> Case 2: Assistant w/ Tools at index 1
[DEBUG] 2025-08-24 20:29:16,701 - src.swarm.utils.context_utils:153 -       Found 2 tools for 2 calls. Pair Cost=103, Pair Len=3.
[DEBUG] 2025-08-24 20:29:16,701 - src.swarm.utils.context_utils:160 -       Budget Check: (CurrentTokens=25 + PairTokens=103 <= TargetTokens=128) -> True
[DEBUG] 2025-08-24 20:29:16,701 - src.swarm.utils.context_utils:161 -       Budget Check: (CurrentMsgs=1 + PairMsgs=3 <= TargetMsgs=9) -> True
[INFO] 2025-08-24 20:29:16,701 - src.swarm.utils.context_utils:164 -     -> Action: KEEPING Pair A(idx 1)+Tools([2, 3])
[DEBUG] 2025-08-24 20:29:16,701 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=0, Role=user, Tokens=224. Kept: Msgs=4, Tokens=128
[DEBUG] 2025-08-24 20:29:16,701 - src.swarm.utils.context_utils:187 -     -> Case 3: Regular Message at index 0
[INFO] 2025-08-24 20:29:16,701 - src.swarm.utils.context_utils:195 -     -> Action: SKIPPING message 0 (Tokens fit: False, Msgs fit: True). Stopping.
[INFO] 2025-08-24 20:29:16,701 - src.swarm.utils.context_utils:206 - Sophisticated truncation result: 5 msgs (1 sys, 4 non-sys), ~150 tokens.
[INFO] 2025-08-24 20:29:16,701 - src.swarm.utils.context_utils:275 - --- Finished Truncation --- Result Msgs: 5
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,701 - --- Test Passed [PairsMultiCallCutUser] ---
----------------------------------------------------------------------------------------------------------------------------- Captured log call ------------------------------------------------------------------------------------------------------------------------------
INFO     src.swarm.utils.context_utils:context_utils.py:242 --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 150, Max Messages: 10, Input Msgs: 6
INFO     src.swarm.utils.context_utils:context_utils.py:76 Sophisticated truncation. Target: 9 msgs, 128 tokens.
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=4, Role=assistant, Tokens=25. Kept: Msgs=0, Tokens=0
DEBUG    src.swarm.utils.context_utils:context_utils.py:187     -> Case 3: Regular Message at index 4
INFO     src.swarm.utils.context_utils:context_utils.py:191     -> Action: KEEPING SINGLE message 4
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=3, Role=tool, Tokens=22. Kept: Msgs=1, Tokens=25
DEBUG    src.swarm.utils.context_utils:context_utils.py:99     -> Case 1: Tool Msg (ID: call_mc2)
DEBUG    src.swarm.utils.context_utils:context_utils.py:114       Found assistant pair at 1, but it has multiple tool calls (2). Deferring to Case 2.
DEBUG    src.swarm.utils.context_utils:context_utils.py:135     -> Case 1 Result: Pair found but deferred or didn't fit.
DEBUG    src.swarm.utils.context_utils:context_utils.py:200   [Loop Default Decrement] No action/break for index 3.
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=2, Role=tool, Tokens=22. Kept: Msgs=1, Tokens=25
DEBUG    src.swarm.utils.context_utils:context_utils.py:99     -> Case 1: Tool Msg (ID: call_mc1)
DEBUG    src.swarm.utils.context_utils:context_utils.py:114       Found assistant pair at 1, but it has multiple tool calls (2). Deferring to Case 2.
DEBUG    src.swarm.utils.context_utils:context_utils.py:135     -> Case 1 Result: Pair found but deferred or didn't fit.
DEBUG    src.swarm.utils.context_utils:context_utils.py:200   [Loop Default Decrement] No action/break for index 2.
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=1, Role=assistant, Tokens=59. Kept: Msgs=1, Tokens=25
DEBUG    src.swarm.utils.context_utils:context_utils.py:140     -> Case 2: Assistant w/ Tools at index 1
DEBUG    src.swarm.utils.context_utils:context_utils.py:153       Found 2 tools for 2 calls. Pair Cost=103, Pair Len=3.
DEBUG    src.swarm.utils.context_utils:context_utils.py:160       Budget Check: (CurrentTokens=25 + PairTokens=103 <= TargetTokens=128) -> True
DEBUG    src.swarm.utils.context_utils:context_utils.py:161       Budget Check: (CurrentMsgs=1 + PairMsgs=3 <= TargetMsgs=9) -> True
INFO     src.swarm.utils.context_utils:context_utils.py:164     -> Action: KEEPING Pair A(idx 1)+Tools([2, 3])
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=0, Role=user, Tokens=224. Kept: Msgs=4, Tokens=128
DEBUG    src.swarm.utils.context_utils:context_utils.py:187     -> Case 3: Regular Message at index 0
INFO     src.swarm.utils.context_utils:context_utils.py:195     -> Action: SKIPPING message 0 (Tokens fit: False, Msgs fit: True). Stopping.
INFO     src.swarm.utils.context_utils:context_utils.py:206 Sophisticated truncation result: 5 msgs (1 sys, 4 non-sys), ~150 tokens.
INFO     src.swarm.utils.context_utils:context_utils.py:275 --- Finished Truncation --- Result Msgs: 5
________________________________________________________________________________________________________________ test_pairs_multi_call_in_one_turn_cuts_pair _________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,704 - 
--- Running Truncation Test [PairsMultiCallCutPair] (Mode: pairs, MaxTk: 100, MaxMsg: 10) ---
[INFO] 2025-08-24 20:29:16,704 - src.swarm.utils.context_utils:242 - --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 100, Max Messages: 10, Input Msgs: 6
[INFO] 2025-08-24 20:29:16,704 - src.swarm.utils.context_utils:76 - Sophisticated truncation. Target: 9 msgs, 78 tokens.
[DEBUG] 2025-08-24 20:29:16,704 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=4, Role=assistant, Tokens=25. Kept: Msgs=0, Tokens=0
[DEBUG] 2025-08-24 20:29:16,704 - src.swarm.utils.context_utils:187 -     -> Case 3: Regular Message at index 4
[INFO] 2025-08-24 20:29:16,704 - src.swarm.utils.context_utils:191 -     -> Action: KEEPING SINGLE message 4
[DEBUG] 2025-08-24 20:29:16,704 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=3, Role=tool, Tokens=22. Kept: Msgs=1, Tokens=25
[DEBUG] 2025-08-24 20:29:16,704 - src.swarm.utils.context_utils:99 -     -> Case 1: Tool Msg (ID: call_mc2)
[DEBUG] 2025-08-24 20:29:16,704 - src.swarm.utils.context_utils:114 -       Found assistant pair at 1, but it has multiple tool calls (2). Deferring to Case 2.
[DEBUG] 2025-08-24 20:29:16,704 - src.swarm.utils.context_utils:135 -     -> Case 1 Result: Pair found but deferred or didn't fit.
[DEBUG] 2025-08-24 20:29:16,704 - src.swarm.utils.context_utils:200 -   [Loop Default Decrement] No action/break for index 3.
[DEBUG] 2025-08-24 20:29:16,704 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=2, Role=tool, Tokens=22. Kept: Msgs=1, Tokens=25
[DEBUG] 2025-08-24 20:29:16,704 - src.swarm.utils.context_utils:99 -     -> Case 1: Tool Msg (ID: call_mc1)
[DEBUG] 2025-08-24 20:29:16,705 - src.swarm.utils.context_utils:114 -       Found assistant pair at 1, but it has multiple tool calls (2). Deferring to Case 2.
[DEBUG] 2025-08-24 20:29:16,705 - src.swarm.utils.context_utils:135 -     -> Case 1 Result: Pair found but deferred or didn't fit.
[DEBUG] 2025-08-24 20:29:16,705 - src.swarm.utils.context_utils:200 -   [Loop Default Decrement] No action/break for index 2.
[DEBUG] 2025-08-24 20:29:16,705 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=1, Role=assistant, Tokens=59. Kept: Msgs=1, Tokens=25
[DEBUG] 2025-08-24 20:29:16,705 - src.swarm.utils.context_utils:140 -     -> Case 2: Assistant w/ Tools at index 1
[DEBUG] 2025-08-24 20:29:16,705 - src.swarm.utils.context_utils:153 -       Found 2 tools for 2 calls. Pair Cost=103, Pair Len=3.
[DEBUG] 2025-08-24 20:29:16,705 - src.swarm.utils.context_utils:160 -       Budget Check: (CurrentTokens=25 + PairTokens=103 <= TargetTokens=78) -> False
[DEBUG] 2025-08-24 20:29:16,705 - src.swarm.utils.context_utils:161 -       Budget Check: (CurrentMsgs=1 + PairMsgs=3 <= TargetMsgs=9) -> True
[DEBUG] 2025-08-24 20:29:16,705 - src.swarm.utils.context_utils:175 -       Pair doesn't fit or not all tools found.
[DEBUG] 2025-08-24 20:29:16,705 - src.swarm.utils.context_utils:183 -       Cannot keep single assistant 1 either (Tokens fit: False, Msgs fit: True).
[DEBUG] 2025-08-24 20:29:16,705 - src.swarm.utils.context_utils:200 -   [Loop Default Decrement] No action/break for index 1.
[DEBUG] 2025-08-24 20:29:16,705 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=0, Role=user, Tokens=224. Kept: Msgs=1, Tokens=25
[DEBUG] 2025-08-24 20:29:16,705 - src.swarm.utils.context_utils:187 -     -> Case 3: Regular Message at index 0
[INFO] 2025-08-24 20:29:16,705 - src.swarm.utils.context_utils:195 -     -> Action: SKIPPING message 0 (Tokens fit: False, Msgs fit: True). Stopping.
[INFO] 2025-08-24 20:29:16,705 - src.swarm.utils.context_utils:206 - Sophisticated truncation result: 2 msgs (1 sys, 1 non-sys), ~47 tokens.
[INFO] 2025-08-24 20:29:16,705 - src.swarm.utils.context_utils:275 - --- Finished Truncation --- Result Msgs: 2
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,705 - --- Test Passed [PairsMultiCallCutPair] ---
----------------------------------------------------------------------------------------------------------------------------- Captured log call ------------------------------------------------------------------------------------------------------------------------------
INFO     src.swarm.utils.context_utils:context_utils.py:242 --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 100, Max Messages: 10, Input Msgs: 6
INFO     src.swarm.utils.context_utils:context_utils.py:76 Sophisticated truncation. Target: 9 msgs, 78 tokens.
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=4, Role=assistant, Tokens=25. Kept: Msgs=0, Tokens=0
DEBUG    src.swarm.utils.context_utils:context_utils.py:187     -> Case 3: Regular Message at index 4
INFO     src.swarm.utils.context_utils:context_utils.py:191     -> Action: KEEPING SINGLE message 4
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=3, Role=tool, Tokens=22. Kept: Msgs=1, Tokens=25
DEBUG    src.swarm.utils.context_utils:context_utils.py:99     -> Case 1: Tool Msg (ID: call_mc2)
DEBUG    src.swarm.utils.context_utils:context_utils.py:114       Found assistant pair at 1, but it has multiple tool calls (2). Deferring to Case 2.
DEBUG    src.swarm.utils.context_utils:context_utils.py:135     -> Case 1 Result: Pair found but deferred or didn't fit.
DEBUG    src.swarm.utils.context_utils:context_utils.py:200   [Loop Default Decrement] No action/break for index 3.
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=2, Role=tool, Tokens=22. Kept: Msgs=1, Tokens=25
DEBUG    src.swarm.utils.context_utils:context_utils.py:99     -> Case 1: Tool Msg (ID: call_mc1)
DEBUG    src.swarm.utils.context_utils:context_utils.py:114       Found assistant pair at 1, but it has multiple tool calls (2). Deferring to Case 2.
DEBUG    src.swarm.utils.context_utils:context_utils.py:135     -> Case 1 Result: Pair found but deferred or didn't fit.
DEBUG    src.swarm.utils.context_utils:context_utils.py:200   [Loop Default Decrement] No action/break for index 2.
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=1, Role=assistant, Tokens=59. Kept: Msgs=1, Tokens=25
DEBUG    src.swarm.utils.context_utils:context_utils.py:140     -> Case 2: Assistant w/ Tools at index 1
DEBUG    src.swarm.utils.context_utils:context_utils.py:153       Found 2 tools for 2 calls. Pair Cost=103, Pair Len=3.
DEBUG    src.swarm.utils.context_utils:context_utils.py:160       Budget Check: (CurrentTokens=25 + PairTokens=103 <= TargetTokens=78) -> False
DEBUG    src.swarm.utils.context_utils:context_utils.py:161       Budget Check: (CurrentMsgs=1 + PairMsgs=3 <= TargetMsgs=9) -> True
DEBUG    src.swarm.utils.context_utils:context_utils.py:175       Pair doesn't fit or not all tools found.
DEBUG    src.swarm.utils.context_utils:context_utils.py:183       Cannot keep single assistant 1 either (Tokens fit: False, Msgs fit: True).
DEBUG    src.swarm.utils.context_utils:context_utils.py:200   [Loop Default Decrement] No action/break for index 1.
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=0, Role=user, Tokens=224. Kept: Msgs=1, Tokens=25
DEBUG    src.swarm.utils.context_utils:context_utils.py:187     -> Case 3: Regular Message at index 0
INFO     src.swarm.utils.context_utils:context_utils.py:195     -> Action: SKIPPING message 0 (Tokens fit: False, Msgs fit: True). Stopping.
INFO     src.swarm.utils.context_utils:context_utils.py:206 Sophisticated truncation result: 2 msgs (1 sys, 1 non-sys), ~47 tokens.
INFO     src.swarm.utils.context_utils:context_utils.py:275 --- Finished Truncation --- Result Msgs: 2
_____________________________________________________________________________________________________________________ test_pairs_back_to_back_tools_fit ______________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,708 - 
--- Running Truncation Test [PairsB2BFits] (Mode: pairs, MaxTk: 200, MaxMsg: 10) ---
[INFO] 2025-08-24 20:29:16,708 - src.swarm.utils.context_utils:242 - --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 200, Max Messages: 10, Input Msgs: 7
[INFO] 2025-08-24 20:29:16,708 - src.swarm.utils.context_utils:75 - History fits.
[INFO] 2025-08-24 20:29:16,708 - src.swarm.utils.context_utils:275 - --- Finished Truncation --- Result Msgs: 7
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,708 - --- Test Passed [PairsB2BFits] ---
----------------------------------------------------------------------------------------------------------------------------- Captured log call ------------------------------------------------------------------------------------------------------------------------------
INFO     src.swarm.utils.context_utils:context_utils.py:242 --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 200, Max Messages: 10, Input Msgs: 7
INFO     src.swarm.utils.context_utils:context_utils.py:75 History fits.
INFO     src.swarm.utils.context_utils:context_utils.py:275 --- Finished Truncation --- Result Msgs: 7
___________________________________________________________________________________________________________________ test_pairs_back_to_back_tools_cut_user ___________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,711 - 
--- Running Truncation Test [PairsB2BCutUser] (Mode: pairs, MaxTk: 150, MaxMsg: 10) ---
[INFO] 2025-08-24 20:29:16,711 - src.swarm.utils.context_utils:242 - --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 150, Max Messages: 10, Input Msgs: 7
[INFO] 2025-08-24 20:29:16,711 - src.swarm.utils.context_utils:76 - Sophisticated truncation. Target: 9 msgs, 128 tokens.
[DEBUG] 2025-08-24 20:29:16,711 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=5, Role=assistant, Tokens=19. Kept: Msgs=0, Tokens=0
[DEBUG] 2025-08-24 20:29:16,711 - src.swarm.utils.context_utils:187 -     -> Case 3: Regular Message at index 5
[INFO] 2025-08-24 20:29:16,711 - src.swarm.utils.context_utils:191 -     -> Action: KEEPING SINGLE message 5
[DEBUG] 2025-08-24 20:29:16,711 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=4, Role=tool, Tokens=23. Kept: Msgs=1, Tokens=19
[DEBUG] 2025-08-24 20:29:16,711 - src.swarm.utils.context_utils:99 -     -> Case 1: Tool Msg (ID: call_b2b_2)
[DEBUG] 2025-08-24 20:29:16,711 - src.swarm.utils.context_utils:119 -       Found single-call assistant pair at 3. Pair cost=63, Pair msgs=2
[DEBUG] 2025-08-24 20:29:16,711 - src.swarm.utils.context_utils:122 -       Budget Check: (CurrentTokens=19 + PairTokens=63 <= TargetTokens=128) -> True
[DEBUG] 2025-08-24 20:29:16,711 - src.swarm.utils.context_utils:123 -       Budget Check: (CurrentMsgs=1 + PairMsgs=2 <= TargetMsgs=9) -> True
[INFO] 2025-08-24 20:29:16,711 - src.swarm.utils.context_utils:125 -       Action: KEEPING Pair T(idx 4)+A(idx 3)
[DEBUG] 2025-08-24 20:29:16,711 - src.swarm.utils.context_utils:80 -   [Loop Skip] Idx 3 already kept.
[DEBUG] 2025-08-24 20:29:16,711 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=2, Role=tool, Tokens=21. Kept: Msgs=3, Tokens=82
[DEBUG] 2025-08-24 20:29:16,711 - src.swarm.utils.context_utils:99 -     -> Case 1: Tool Msg (ID: call_b2b_1)
[DEBUG] 2025-08-24 20:29:16,711 - src.swarm.utils.context_utils:119 -       Found single-call assistant pair at 1. Pair cost=55, Pair msgs=2
[DEBUG] 2025-08-24 20:29:16,711 - src.swarm.utils.context_utils:122 -       Budget Check: (CurrentTokens=82 + PairTokens=55 <= TargetTokens=128) -> False
[DEBUG] 2025-08-24 20:29:16,711 - src.swarm.utils.context_utils:123 -       Budget Check: (CurrentMsgs=3 + PairMsgs=2 <= TargetMsgs=9) -> True
[DEBUG] 2025-08-24 20:29:16,711 - src.swarm.utils.context_utils:131 -         Pair doesn't fit budget.
[DEBUG] 2025-08-24 20:29:16,711 - src.swarm.utils.context_utils:135 -     -> Case 1 Result: Pair found but deferred or didn't fit.
[DEBUG] 2025-08-24 20:29:16,711 - src.swarm.utils.context_utils:200 -   [Loop Default Decrement] No action/break for index 2.
[DEBUG] 2025-08-24 20:29:16,711 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=1, Role=assistant, Tokens=34. Kept: Msgs=3, Tokens=82
[DEBUG] 2025-08-24 20:29:16,712 - src.swarm.utils.context_utils:140 -     -> Case 2: Assistant w/ Tools at index 1
[DEBUG] 2025-08-24 20:29:16,712 - src.swarm.utils.context_utils:153 -       Found 1 tools for 1 calls. Pair Cost=55, Pair Len=2.
[DEBUG] 2025-08-24 20:29:16,712 - src.swarm.utils.context_utils:160 -       Budget Check: (CurrentTokens=82 + PairTokens=55 <= TargetTokens=128) -> False
[DEBUG] 2025-08-24 20:29:16,712 - src.swarm.utils.context_utils:161 -       Budget Check: (CurrentMsgs=3 + PairMsgs=2 <= TargetMsgs=9) -> True
[DEBUG] 2025-08-24 20:29:16,712 - src.swarm.utils.context_utils:175 -       Pair doesn't fit or not all tools found.
[INFO] 2025-08-24 20:29:16,712 - src.swarm.utils.context_utils:179 -     -> Action: KEEPING SINGLE Assistant 1 (pair failed/incomplete).
[DEBUG] 2025-08-24 20:29:16,712 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=0, Role=user, Tokens=12. Kept: Msgs=4, Tokens=116
[DEBUG] 2025-08-24 20:29:16,712 - src.swarm.utils.context_utils:187 -     -> Case 3: Regular Message at index 0
[INFO] 2025-08-24 20:29:16,712 - src.swarm.utils.context_utils:191 -     -> Action: KEEPING SINGLE message 0
[INFO] 2025-08-24 20:29:16,712 - src.swarm.utils.context_utils:206 - Sophisticated truncation result: 6 msgs (1 sys, 5 non-sys), ~150 tokens.
[INFO] 2025-08-24 20:29:16,712 - src.swarm.utils.context_utils:275 - --- Finished Truncation --- Result Msgs: 6
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,712 - --- Test Passed [PairsB2BCutUser] ---
----------------------------------------------------------------------------------------------------------------------------- Captured log call ------------------------------------------------------------------------------------------------------------------------------
INFO     src.swarm.utils.context_utils:context_utils.py:242 --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 150, Max Messages: 10, Input Msgs: 7
INFO     src.swarm.utils.context_utils:context_utils.py:76 Sophisticated truncation. Target: 9 msgs, 128 tokens.
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=5, Role=assistant, Tokens=19. Kept: Msgs=0, Tokens=0
DEBUG    src.swarm.utils.context_utils:context_utils.py:187     -> Case 3: Regular Message at index 5
INFO     src.swarm.utils.context_utils:context_utils.py:191     -> Action: KEEPING SINGLE message 5
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=4, Role=tool, Tokens=23. Kept: Msgs=1, Tokens=19
DEBUG    src.swarm.utils.context_utils:context_utils.py:99     -> Case 1: Tool Msg (ID: call_b2b_2)
DEBUG    src.swarm.utils.context_utils:context_utils.py:119       Found single-call assistant pair at 3. Pair cost=63, Pair msgs=2
DEBUG    src.swarm.utils.context_utils:context_utils.py:122       Budget Check: (CurrentTokens=19 + PairTokens=63 <= TargetTokens=128) -> True
DEBUG    src.swarm.utils.context_utils:context_utils.py:123       Budget Check: (CurrentMsgs=1 + PairMsgs=2 <= TargetMsgs=9) -> True
INFO     src.swarm.utils.context_utils:context_utils.py:125       Action: KEEPING Pair T(idx 4)+A(idx 3)
DEBUG    src.swarm.utils.context_utils:context_utils.py:80   [Loop Skip] Idx 3 already kept.
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=2, Role=tool, Tokens=21. Kept: Msgs=3, Tokens=82
DEBUG    src.swarm.utils.context_utils:context_utils.py:99     -> Case 1: Tool Msg (ID: call_b2b_1)
DEBUG    src.swarm.utils.context_utils:context_utils.py:119       Found single-call assistant pair at 1. Pair cost=55, Pair msgs=2
DEBUG    src.swarm.utils.context_utils:context_utils.py:122       Budget Check: (CurrentTokens=82 + PairTokens=55 <= TargetTokens=128) -> False
DEBUG    src.swarm.utils.context_utils:context_utils.py:123       Budget Check: (CurrentMsgs=3 + PairMsgs=2 <= TargetMsgs=9) -> True
DEBUG    src.swarm.utils.context_utils:context_utils.py:131         Pair doesn't fit budget.
DEBUG    src.swarm.utils.context_utils:context_utils.py:135     -> Case 1 Result: Pair found but deferred or didn't fit.
DEBUG    src.swarm.utils.context_utils:context_utils.py:200   [Loop Default Decrement] No action/break for index 2.
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=1, Role=assistant, Tokens=34. Kept: Msgs=3, Tokens=82
DEBUG    src.swarm.utils.context_utils:context_utils.py:140     -> Case 2: Assistant w/ Tools at index 1
DEBUG    src.swarm.utils.context_utils:context_utils.py:153       Found 1 tools for 1 calls. Pair Cost=55, Pair Len=2.
DEBUG    src.swarm.utils.context_utils:context_utils.py:160       Budget Check: (CurrentTokens=82 + PairTokens=55 <= TargetTokens=128) -> False
DEBUG    src.swarm.utils.context_utils:context_utils.py:161       Budget Check: (CurrentMsgs=3 + PairMsgs=2 <= TargetMsgs=9) -> True
DEBUG    src.swarm.utils.context_utils:context_utils.py:175       Pair doesn't fit or not all tools found.
INFO     src.swarm.utils.context_utils:context_utils.py:179     -> Action: KEEPING SINGLE Assistant 1 (pair failed/incomplete).
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=0, Role=user, Tokens=12. Kept: Msgs=4, Tokens=116
DEBUG    src.swarm.utils.context_utils:context_utils.py:187     -> Case 3: Regular Message at index 0
INFO     src.swarm.utils.context_utils:context_utils.py:191     -> Action: KEEPING SINGLE message 0
INFO     src.swarm.utils.context_utils:context_utils.py:206 Sophisticated truncation result: 6 msgs (1 sys, 5 non-sys), ~150 tokens.
INFO     src.swarm.utils.context_utils:context_utils.py:275 --- Finished Truncation --- Result Msgs: 6
________________________________________________________________________________________________________________ test_pairs_back_to_back_tools_cut_first_pair ________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,715 - 
--- Running Truncation Test [PairsB2BCutFirstPair] (Mode: pairs, MaxTk: 100, MaxMsg: 10) ---
[INFO] 2025-08-24 20:29:16,715 - src.swarm.utils.context_utils:242 - --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 100, Max Messages: 10, Input Msgs: 7
[INFO] 2025-08-24 20:29:16,715 - src.swarm.utils.context_utils:76 - Sophisticated truncation. Target: 9 msgs, 78 tokens.
[DEBUG] 2025-08-24 20:29:16,715 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=5, Role=assistant, Tokens=19. Kept: Msgs=0, Tokens=0
[DEBUG] 2025-08-24 20:29:16,715 - src.swarm.utils.context_utils:187 -     -> Case 3: Regular Message at index 5
[INFO] 2025-08-24 20:29:16,715 - src.swarm.utils.context_utils:191 -     -> Action: KEEPING SINGLE message 5
[DEBUG] 2025-08-24 20:29:16,715 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=4, Role=tool, Tokens=23. Kept: Msgs=1, Tokens=19
[DEBUG] 2025-08-24 20:29:16,715 - src.swarm.utils.context_utils:99 -     -> Case 1: Tool Msg (ID: call_b2b_2)
[DEBUG] 2025-08-24 20:29:16,715 - src.swarm.utils.context_utils:119 -       Found single-call assistant pair at 3. Pair cost=63, Pair msgs=2
[DEBUG] 2025-08-24 20:29:16,715 - src.swarm.utils.context_utils:122 -       Budget Check: (CurrentTokens=19 + PairTokens=63 <= TargetTokens=78) -> False
[DEBUG] 2025-08-24 20:29:16,715 - src.swarm.utils.context_utils:123 -       Budget Check: (CurrentMsgs=1 + PairMsgs=2 <= TargetMsgs=9) -> True
[DEBUG] 2025-08-24 20:29:16,715 - src.swarm.utils.context_utils:131 -         Pair doesn't fit budget.
[DEBUG] 2025-08-24 20:29:16,715 - src.swarm.utils.context_utils:135 -     -> Case 1 Result: Pair found but deferred or didn't fit.
[DEBUG] 2025-08-24 20:29:16,715 - src.swarm.utils.context_utils:200 -   [Loop Default Decrement] No action/break for index 4.
[DEBUG] 2025-08-24 20:29:16,715 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=3, Role=assistant, Tokens=40. Kept: Msgs=1, Tokens=19
[DEBUG] 2025-08-24 20:29:16,715 - src.swarm.utils.context_utils:140 -     -> Case 2: Assistant w/ Tools at index 3
[DEBUG] 2025-08-24 20:29:16,715 - src.swarm.utils.context_utils:153 -       Found 1 tools for 1 calls. Pair Cost=63, Pair Len=2.
[DEBUG] 2025-08-24 20:29:16,715 - src.swarm.utils.context_utils:160 -       Budget Check: (CurrentTokens=19 + PairTokens=63 <= TargetTokens=78) -> False
[DEBUG] 2025-08-24 20:29:16,715 - src.swarm.utils.context_utils:161 -       Budget Check: (CurrentMsgs=1 + PairMsgs=2 <= TargetMsgs=9) -> True
[DEBUG] 2025-08-24 20:29:16,716 - src.swarm.utils.context_utils:175 -       Pair doesn't fit or not all tools found.
[INFO] 2025-08-24 20:29:16,716 - src.swarm.utils.context_utils:179 -     -> Action: KEEPING SINGLE Assistant 3 (pair failed/incomplete).
[DEBUG] 2025-08-24 20:29:16,716 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=2, Role=tool, Tokens=21. Kept: Msgs=2, Tokens=59
[DEBUG] 2025-08-24 20:29:16,716 - src.swarm.utils.context_utils:99 -     -> Case 1: Tool Msg (ID: call_b2b_1)
[DEBUG] 2025-08-24 20:29:16,716 - src.swarm.utils.context_utils:119 -       Found single-call assistant pair at 1. Pair cost=55, Pair msgs=2
[DEBUG] 2025-08-24 20:29:16,716 - src.swarm.utils.context_utils:122 -       Budget Check: (CurrentTokens=59 + PairTokens=55 <= TargetTokens=78) -> False
[DEBUG] 2025-08-24 20:29:16,716 - src.swarm.utils.context_utils:123 -       Budget Check: (CurrentMsgs=2 + PairMsgs=2 <= TargetMsgs=9) -> True
[DEBUG] 2025-08-24 20:29:16,716 - src.swarm.utils.context_utils:131 -         Pair doesn't fit budget.
[DEBUG] 2025-08-24 20:29:16,716 - src.swarm.utils.context_utils:135 -     -> Case 1 Result: Pair found but deferred or didn't fit.
[DEBUG] 2025-08-24 20:29:16,716 - src.swarm.utils.context_utils:200 -   [Loop Default Decrement] No action/break for index 2.
[DEBUG] 2025-08-24 20:29:16,716 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=1, Role=assistant, Tokens=34. Kept: Msgs=2, Tokens=59
[DEBUG] 2025-08-24 20:29:16,716 - src.swarm.utils.context_utils:140 -     -> Case 2: Assistant w/ Tools at index 1
[DEBUG] 2025-08-24 20:29:16,716 - src.swarm.utils.context_utils:153 -       Found 1 tools for 1 calls. Pair Cost=55, Pair Len=2.
[DEBUG] 2025-08-24 20:29:16,716 - src.swarm.utils.context_utils:160 -       Budget Check: (CurrentTokens=59 + PairTokens=55 <= TargetTokens=78) -> False
[DEBUG] 2025-08-24 20:29:16,716 - src.swarm.utils.context_utils:161 -       Budget Check: (CurrentMsgs=2 + PairMsgs=2 <= TargetMsgs=9) -> True
[DEBUG] 2025-08-24 20:29:16,716 - src.swarm.utils.context_utils:175 -       Pair doesn't fit or not all tools found.
[DEBUG] 2025-08-24 20:29:16,716 - src.swarm.utils.context_utils:183 -       Cannot keep single assistant 1 either (Tokens fit: False, Msgs fit: True).
[DEBUG] 2025-08-24 20:29:16,716 - src.swarm.utils.context_utils:200 -   [Loop Default Decrement] No action/break for index 1.
[DEBUG] 2025-08-24 20:29:16,716 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=0, Role=user, Tokens=12. Kept: Msgs=2, Tokens=59
[DEBUG] 2025-08-24 20:29:16,716 - src.swarm.utils.context_utils:187 -     -> Case 3: Regular Message at index 0
[INFO] 2025-08-24 20:29:16,716 - src.swarm.utils.context_utils:191 -     -> Action: KEEPING SINGLE message 0
[INFO] 2025-08-24 20:29:16,716 - src.swarm.utils.context_utils:206 - Sophisticated truncation result: 4 msgs (1 sys, 3 non-sys), ~93 tokens.
[INFO] 2025-08-24 20:29:16,716 - src.swarm.utils.context_utils:275 - --- Finished Truncation --- Result Msgs: 4
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,716 - --- Test Passed [PairsB2BCutFirstPair] ---
----------------------------------------------------------------------------------------------------------------------------- Captured log call ------------------------------------------------------------------------------------------------------------------------------
INFO     src.swarm.utils.context_utils:context_utils.py:242 --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 100, Max Messages: 10, Input Msgs: 7
INFO     src.swarm.utils.context_utils:context_utils.py:76 Sophisticated truncation. Target: 9 msgs, 78 tokens.
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=5, Role=assistant, Tokens=19. Kept: Msgs=0, Tokens=0
DEBUG    src.swarm.utils.context_utils:context_utils.py:187     -> Case 3: Regular Message at index 5
INFO     src.swarm.utils.context_utils:context_utils.py:191     -> Action: KEEPING SINGLE message 5
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=4, Role=tool, Tokens=23. Kept: Msgs=1, Tokens=19
DEBUG    src.swarm.utils.context_utils:context_utils.py:99     -> Case 1: Tool Msg (ID: call_b2b_2)
DEBUG    src.swarm.utils.context_utils:context_utils.py:119       Found single-call assistant pair at 3. Pair cost=63, Pair msgs=2
DEBUG    src.swarm.utils.context_utils:context_utils.py:122       Budget Check: (CurrentTokens=19 + PairTokens=63 <= TargetTokens=78) -> False
DEBUG    src.swarm.utils.context_utils:context_utils.py:123       Budget Check: (CurrentMsgs=1 + PairMsgs=2 <= TargetMsgs=9) -> True
DEBUG    src.swarm.utils.context_utils:context_utils.py:131         Pair doesn't fit budget.
DEBUG    src.swarm.utils.context_utils:context_utils.py:135     -> Case 1 Result: Pair found but deferred or didn't fit.
DEBUG    src.swarm.utils.context_utils:context_utils.py:200   [Loop Default Decrement] No action/break for index 4.
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=3, Role=assistant, Tokens=40. Kept: Msgs=1, Tokens=19
DEBUG    src.swarm.utils.context_utils:context_utils.py:140     -> Case 2: Assistant w/ Tools at index 3
DEBUG    src.swarm.utils.context_utils:context_utils.py:153       Found 1 tools for 1 calls. Pair Cost=63, Pair Len=2.
DEBUG    src.swarm.utils.context_utils:context_utils.py:160       Budget Check: (CurrentTokens=19 + PairTokens=63 <= TargetTokens=78) -> False
DEBUG    src.swarm.utils.context_utils:context_utils.py:161       Budget Check: (CurrentMsgs=1 + PairMsgs=2 <= TargetMsgs=9) -> True
DEBUG    src.swarm.utils.context_utils:context_utils.py:175       Pair doesn't fit or not all tools found.
INFO     src.swarm.utils.context_utils:context_utils.py:179     -> Action: KEEPING SINGLE Assistant 3 (pair failed/incomplete).
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=2, Role=tool, Tokens=21. Kept: Msgs=2, Tokens=59
DEBUG    src.swarm.utils.context_utils:context_utils.py:99     -> Case 1: Tool Msg (ID: call_b2b_1)
DEBUG    src.swarm.utils.context_utils:context_utils.py:119       Found single-call assistant pair at 1. Pair cost=55, Pair msgs=2
DEBUG    src.swarm.utils.context_utils:context_utils.py:122       Budget Check: (CurrentTokens=59 + PairTokens=55 <= TargetTokens=78) -> False
DEBUG    src.swarm.utils.context_utils:context_utils.py:123       Budget Check: (CurrentMsgs=2 + PairMsgs=2 <= TargetMsgs=9) -> True
DEBUG    src.swarm.utils.context_utils:context_utils.py:131         Pair doesn't fit budget.
DEBUG    src.swarm.utils.context_utils:context_utils.py:135     -> Case 1 Result: Pair found but deferred or didn't fit.
DEBUG    src.swarm.utils.context_utils:context_utils.py:200   [Loop Default Decrement] No action/break for index 2.
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=1, Role=assistant, Tokens=34. Kept: Msgs=2, Tokens=59
DEBUG    src.swarm.utils.context_utils:context_utils.py:140     -> Case 2: Assistant w/ Tools at index 1
DEBUG    src.swarm.utils.context_utils:context_utils.py:153       Found 1 tools for 1 calls. Pair Cost=55, Pair Len=2.
DEBUG    src.swarm.utils.context_utils:context_utils.py:160       Budget Check: (CurrentTokens=59 + PairTokens=55 <= TargetTokens=78) -> False
DEBUG    src.swarm.utils.context_utils:context_utils.py:161       Budget Check: (CurrentMsgs=2 + PairMsgs=2 <= TargetMsgs=9) -> True
DEBUG    src.swarm.utils.context_utils:context_utils.py:175       Pair doesn't fit or not all tools found.
DEBUG    src.swarm.utils.context_utils:context_utils.py:183       Cannot keep single assistant 1 either (Tokens fit: False, Msgs fit: True).
DEBUG    src.swarm.utils.context_utils:context_utils.py:200   [Loop Default Decrement] No action/break for index 1.
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=0, Role=user, Tokens=12. Kept: Msgs=2, Tokens=59
DEBUG    src.swarm.utils.context_utils:context_utils.py:187     -> Case 3: Regular Message at index 0
INFO     src.swarm.utils.context_utils:context_utils.py:191     -> Action: KEEPING SINGLE message 0
INFO     src.swarm.utils.context_utils:context_utils.py:206 Sophisticated truncation result: 4 msgs (1 sys, 3 non-sys), ~93 tokens.
INFO     src.swarm.utils.context_utils:context_utils.py:275 --- Finished Truncation --- Result Msgs: 4
________________________________________________________________________________________________________________________ test_pairs_empty_input_list _________________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,719 - 
--- Running Truncation Test [RobustEmpty] (Mode: pairs, MaxTk: 100, MaxMsg: 10) ---
[DEBUG] 2025-08-24 20:29:16,719 - src.swarm.utils.context_utils:239 - Truncate called with empty/invalid list.
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,719 - --- Test Passed [RobustEmpty] ---
----------------------------------------------------------------------------------------------------------------------------- Captured log call ------------------------------------------------------------------------------------------------------------------------------
DEBUG    src.swarm.utils.context_utils:context_utils.py:239 Truncate called with empty/invalid list.
_______________________________________________________________________________________________________________________ test_pairs_only_system_message _______________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,722 - 
--- Running Truncation Test [RobustSysOnly] (Mode: pairs, MaxTk: 100, MaxMsg: 10) ---
[INFO] 2025-08-24 20:29:16,722 - src.swarm.utils.context_utils:242 - --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 100, Max Messages: 10, Input Msgs: 1
[INFO] 2025-08-24 20:29:16,722 - src.swarm.utils.context_utils:71 - No valid non-system msgs.
[INFO] 2025-08-24 20:29:16,722 - src.swarm.utils.context_utils:275 - --- Finished Truncation --- Result Msgs: 1
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,722 - --- Test Passed [RobustSysOnly] ---
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,722 - 
--- Running Truncation Test [RobustSysOnlyExceeds] (Mode: pairs, MaxTk: 10, MaxMsg: 10) ---
[INFO] 2025-08-24 20:29:16,722 - src.swarm.utils.context_utils:242 - --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 10, Max Messages: 10, Input Msgs: 1
[WARNING] 2025-08-24 20:29:16,722 - src.swarm.utils.context_utils:70 - System msgs exceed limits.
[WARNING] 2025-08-24 20:29:16,722 - src.swarm.utils.context_utils:270 - Truncation empty list, likely due to system message exceeding limits.
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,722 - --- Test Passed [RobustSysOnlyExceeds] ---
----------------------------------------------------------------------------------------------------------------------------- Captured log call ------------------------------------------------------------------------------------------------------------------------------
INFO     src.swarm.utils.context_utils:context_utils.py:242 --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 100, Max Messages: 10, Input Msgs: 1
INFO     src.swarm.utils.context_utils:context_utils.py:71 No valid non-system msgs.
INFO     src.swarm.utils.context_utils:context_utils.py:275 --- Finished Truncation --- Result Msgs: 1
INFO     src.swarm.utils.context_utils:context_utils.py:242 --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 10, Max Messages: 10, Input Msgs: 1
WARNING  src.swarm.utils.context_utils:context_utils.py:70 System msgs exceed limits.
WARNING  src.swarm.utils.context_utils:context_utils.py:270 Truncation empty list, likely due to system message exceeding limits.
____________________________________________________________________________________________________________________ test_pairs_invalid_messages_mixed_in ____________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,725 - 
--- Running Truncation Test [RobustInvalidSimple] (Mode: simple, MaxTk: 1000, MaxMsg: 4) ---
[INFO] 2025-08-24 20:29:16,725 - src.swarm.utils.context_utils:242 - --- Starting Truncation --- Mode: Simple (Recent Only), Max Tokens: 1000, Max Messages: 4, Input Msgs: 7
[WARNING] 2025-08-24 20:29:16,725 - src.swarm.utils.context_utils:24 - Skipping msg missing role: {'content': 'No role here'}
[INFO] 2025-08-24 20:29:16,725 - src.swarm.utils.context_utils:214 - Simple Mode: Filtered 2 invalid msgs.
[INFO] 2025-08-24 20:29:16,725 - src.swarm.utils.context_utils:233 - Simple truncation result: 4 messages (1 sys), ~99 tokens.
[WARNING] 2025-08-24 20:29:16,726 - src.swarm.utils.context_utils:24 - Skipping msg missing role: {'content': 'No role here'}
[INFO] 2025-08-24 20:29:16,726 - src.swarm.utils.context_utils:275 - --- Finished Truncation --- Result Msgs: 4
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,726 - --- Test Passed [RobustInvalidSimple] ---
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,726 - 
--- Running Truncation Test [RobustInvalidPairs] (Mode: pairs, MaxTk: 1000, MaxMsg: 10) ---
[INFO] 2025-08-24 20:29:16,726 - src.swarm.utils.context_utils:242 - --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 1000, Max Messages: 10, Input Msgs: 7
[WARNING] 2025-08-24 20:29:16,726 - src.swarm.utils.context_utils:24 - Skipping msg missing role: {'content': 'No role here'}
[INFO] 2025-08-24 20:29:16,726 - src.swarm.utils.context_utils:63 - Filtered 2 invalid msgs.
[INFO] 2025-08-24 20:29:16,726 - src.swarm.utils.context_utils:75 - History fits.
[WARNING] 2025-08-24 20:29:16,726 - src.swarm.utils.context_utils:24 - Skipping msg missing role: {'content': 'No role here'}
[INFO] 2025-08-24 20:29:16,726 - src.swarm.utils.context_utils:275 - --- Finished Truncation --- Result Msgs: 5
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,726 - --- Test Passed [RobustInvalidPairs] ---
----------------------------------------------------------------------------------------------------------------------------- Captured log call ------------------------------------------------------------------------------------------------------------------------------
INFO     src.swarm.utils.context_utils:context_utils.py:242 --- Starting Truncation --- Mode: Simple (Recent Only), Max Tokens: 1000, Max Messages: 4, Input Msgs: 7
WARNING  src.swarm.utils.context_utils:context_utils.py:24 Skipping msg missing role: {'content': 'No role here'}
INFO     src.swarm.utils.context_utils:context_utils.py:214 Simple Mode: Filtered 2 invalid msgs.
INFO     src.swarm.utils.context_utils:context_utils.py:233 Simple truncation result: 4 messages (1 sys), ~99 tokens.
WARNING  src.swarm.utils.context_utils:context_utils.py:24 Skipping msg missing role: {'content': 'No role here'}
INFO     src.swarm.utils.context_utils:context_utils.py:275 --- Finished Truncation --- Result Msgs: 4
INFO     src.swarm.utils.context_utils:context_utils.py:242 --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 1000, Max Messages: 10, Input Msgs: 7
WARNING  src.swarm.utils.context_utils:context_utils.py:24 Skipping msg missing role: {'content': 'No role here'}
INFO     src.swarm.utils.context_utils:context_utils.py:63 Filtered 2 invalid msgs.
INFO     src.swarm.utils.context_utils:context_utils.py:75 History fits.
WARNING  src.swarm.utils.context_utils:context_utils.py:24 Skipping msg missing role: {'content': 'No role here'}
INFO     src.swarm.utils.context_utils:context_utils.py:275 --- Finished Truncation --- Result Msgs: 5
____________________________________________________________________________________________________________________ test_pairs_non_serializable_content _____________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,729 - 
--- Running Truncation Test [RobustNonSerializable] (Mode: pairs, MaxTk: 1000, MaxMsg: 10) ---
[INFO] 2025-08-24 20:29:16,729 - src.swarm.utils.context_utils:242 - --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 1000, Max Messages: 10, Input Msgs: 5
[WARNING] 2025-08-24 20:29:16,729 - src.swarm.utils.context_utils:35 - Skipping msg failing validity check for role 'user': {'role': 'user', 'content': datetime.datetime(2025, 8, 24, 20, 28, 51, 842332)}
[INFO] 2025-08-24 20:29:16,729 - src.swarm.utils.context_utils:63 - Filtered 1 invalid msgs.
[INFO] 2025-08-24 20:29:16,729 - src.swarm.utils.context_utils:75 - History fits.
[WARNING] 2025-08-24 20:29:16,729 - src.swarm.utils.context_utils:35 - Skipping msg failing validity check for role 'user': {'role': 'user', 'content': datetime.datetime(2025, 8, 24, 20, 28, 51, 842332)}
[INFO] 2025-08-24 20:29:16,729 - src.swarm.utils.context_utils:275 - --- Finished Truncation --- Result Msgs: 4
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,729 - --- Test Passed [RobustNonSerializable] ---
----------------------------------------------------------------------------------------------------------------------------- Captured log call ------------------------------------------------------------------------------------------------------------------------------
INFO     src.swarm.utils.context_utils:context_utils.py:242 --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 1000, Max Messages: 10, Input Msgs: 5
WARNING  src.swarm.utils.context_utils:context_utils.py:35 Skipping msg failing validity check for role 'user': {'role': 'user', 'content': datetime.datetime(2025, 8, 24, 20, 28, 51, 842332)}
INFO     src.swarm.utils.context_utils:context_utils.py:63 Filtered 1 invalid msgs.
INFO     src.swarm.utils.context_utils:context_utils.py:75 History fits.
WARNING  src.swarm.utils.context_utils:context_utils.py:35 Skipping msg failing validity check for role 'user': {'role': 'user', 'content': datetime.datetime(2025, 8, 24, 20, 28, 51, 842332)}
INFO     src.swarm.utils.context_utils:context_utils.py:275 --- Finished Truncation --- Result Msgs: 4
_________________________________________________________________________________________________________________ test_simple_truncation_fallback_simulation _________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,732 - 
--- Running Truncation Test [RobustFallback] (Mode: pairs, MaxTk: 80, MaxMsg: 10) ---
[INFO] 2025-08-24 20:29:16,732 - src.swarm.utils.context_utils:242 - --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 80, Max Messages: 10, Input Msgs: 5
[ERROR] 2025-08-24 20:29:16,732 - src.swarm.utils.context_utils:250 - !!! Critical error during primary truncation (Sophisticated (Pair-Preserving)): Simulated error in sophisticated truncation
Traceback (most recent call last):
  File "/mnt/models/open-swarm-mcp/src/swarm/utils/context_utils.py", line 245, in truncate_message_history
    if truncation_mode == "pairs": result = _truncate_sophisticated(messages, model, max_tokens, max_messages)
  File "/mnt/models/open-swarm-mcp/tests/test_core_truncate_message_history.py", line 185, in broken_sophisticated
    def broken_sophisticated(*args, **kwargs): raise ValueError("Simulated error in sophisticated truncation")
ValueError: Simulated error in sophisticated truncation
[WARNING] 2025-08-24 20:29:16,733 - src.swarm.utils.context_utils:252 - Attempting fallback to simple truncation.
[INFO] 2025-08-24 20:29:16,733 - src.swarm.utils.context_utils:233 - Simple truncation result: 3 messages (1 sys), ~66 tokens.
[INFO] 2025-08-24 20:29:16,733 - src.swarm.utils.context_utils:275 - --- Finished Truncation --- Result Msgs: 3
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,733 - --- Test Passed [RobustFallback] ---
----------------------------------------------------------------------------------------------------------------------------- Captured log call ------------------------------------------------------------------------------------------------------------------------------
INFO     src.swarm.utils.context_utils:context_utils.py:242 --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 80, Max Messages: 10, Input Msgs: 5
ERROR    src.swarm.utils.context_utils:context_utils.py:250 !!! Critical error during primary truncation (Sophisticated (Pair-Preserving)): Simulated error in sophisticated truncation
Traceback (most recent call last):
  File "/mnt/models/open-swarm-mcp/src/swarm/utils/context_utils.py", line 245, in truncate_message_history
    if truncation_mode == "pairs": result = _truncate_sophisticated(messages, model, max_tokens, max_messages)
  File "/mnt/models/open-swarm-mcp/tests/test_core_truncate_message_history.py", line 185, in broken_sophisticated
    def broken_sophisticated(*args, **kwargs): raise ValueError("Simulated error in sophisticated truncation")
ValueError: Simulated error in sophisticated truncation
WARNING  src.swarm.utils.context_utils:context_utils.py:252 Attempting fallback to simple truncation.
INFO     src.swarm.utils.context_utils:context_utils.py:233 Simple truncation result: 3 messages (1 sys), ~66 tokens.
INFO     src.swarm.utils.context_utils:context_utils.py:275 --- Finished Truncation --- Result Msgs: 3
_______________________________________________________________________________________________________________________ test_update_null_content_list ________________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[WARNING] 2025-08-24 20:29:16,735 - src.swarm.utils.message_utils:86 - Skipping non-dictionary item during null content update: <class 'NoneType'>
----------------------------------------------------------------------------------------------------------------------------- Captured log call ------------------------------------------------------------------------------------------------------------------------------
WARNING  src.swarm.utils.message_utils:message_utils.py:86 Skipping non-dictionary item during null content update: <class 'NoneType'>
____________________________________________________________________________________________________________ test_update_null_content_empty_list_or_invalid_input ____________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[WARNING] 2025-08-24 20:29:16,742 - src.swarm.utils.message_utils:91 - update_null_content received unexpected type: <class 'NoneType'>. Returning unchanged.
[WARNING] 2025-08-24 20:29:16,742 - src.swarm.utils.message_utils:91 - update_null_content received unexpected type: <class 'str'>. Returning unchanged.
[WARNING] 2025-08-24 20:29:16,742 - src.swarm.utils.message_utils:91 - update_null_content received unexpected type: <class 'int'>. Returning unchanged.
----------------------------------------------------------------------------------------------------------------------------- Captured log call ------------------------------------------------------------------------------------------------------------------------------
WARNING  src.swarm.utils.message_utils:message_utils.py:91 update_null_content received unexpected type: <class 'NoneType'>. Returning unchanged.
WARNING  src.swarm.utils.message_utils:message_utils.py:91 update_null_content received unexpected type: <class 'str'>. Returning unchanged.
WARNING  src.swarm.utils.message_utils:message_utils.py:91 update_null_content received unexpected type: <class 'int'>. Returning unchanged.
___________________________________________________________________________________________________________________ test_truncate_no_action_needed[simple] ___________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,747 - 
--- Running Truncation Test [NoAction] (Mode: simple, MaxTk: 1000, MaxMsg: 10) ---
[INFO] 2025-08-24 20:29:16,747 - src.swarm.utils.context_utils:242 - --- Starting Truncation --- Mode: Simple (Recent Only), Max Tokens: 1000, Max Messages: 10, Input Msgs: 2
[INFO] 2025-08-24 20:29:16,747 - src.swarm.utils.context_utils:233 - Simple truncation result: 2 messages (1 sys), ~11 tokens.
[INFO] 2025-08-24 20:29:16,747 - src.swarm.utils.context_utils:275 - --- Finished Truncation --- Result Msgs: 2
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,747 - --- Test Passed [NoAction] ---
----------------------------------------------------------------------------------------------------------------------------- Captured log call ------------------------------------------------------------------------------------------------------------------------------
INFO     src.swarm.utils.context_utils:context_utils.py:242 --- Starting Truncation --- Mode: Simple (Recent Only), Max Tokens: 1000, Max Messages: 10, Input Msgs: 2
INFO     src.swarm.utils.context_utils:context_utils.py:233 Simple truncation result: 2 messages (1 sys), ~11 tokens.
INFO     src.swarm.utils.context_utils:context_utils.py:275 --- Finished Truncation --- Result Msgs: 2
___________________________________________________________________________________________________________________ test_truncate_no_action_needed[pairs] ____________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,750 - 
--- Running Truncation Test [NoAction] (Mode: pairs, MaxTk: 1000, MaxMsg: 10) ---
[INFO] 2025-08-24 20:29:16,750 - src.swarm.utils.context_utils:242 - --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 1000, Max Messages: 10, Input Msgs: 2
[INFO] 2025-08-24 20:29:16,750 - src.swarm.utils.context_utils:75 - History fits.
[INFO] 2025-08-24 20:29:16,750 - src.swarm.utils.context_utils:275 - --- Finished Truncation --- Result Msgs: 2
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,750 - --- Test Passed [NoAction] ---
----------------------------------------------------------------------------------------------------------------------------- Captured log call ------------------------------------------------------------------------------------------------------------------------------
INFO     src.swarm.utils.context_utils:context_utils.py:242 --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 1000, Max Messages: 10, Input Msgs: 2
INFO     src.swarm.utils.context_utils:context_utils.py:75 History fits.
INFO     src.swarm.utils.context_utils:context_utils.py:275 --- Finished Truncation --- Result Msgs: 2
________________________________________________________________________________________________________________ test_truncate_by_message_count_basic[simple] ________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,753 - 
--- Running Truncation Test [MsgCountBasic] (Mode: simple, MaxTk: 1000, MaxMsg: 3) ---
[INFO] 2025-08-24 20:29:16,753 - src.swarm.utils.context_utils:242 - --- Starting Truncation --- Mode: Simple (Recent Only), Max Tokens: 1000, Max Messages: 3, Input Msgs: 5
[INFO] 2025-08-24 20:29:16,753 - src.swarm.utils.context_utils:233 - Simple truncation result: 3 messages (1 sys), ~17 tokens.
[INFO] 2025-08-24 20:29:16,753 - src.swarm.utils.context_utils:275 - --- Finished Truncation --- Result Msgs: 3
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,753 - --- Test Passed [MsgCountBasic] ---
----------------------------------------------------------------------------------------------------------------------------- Captured log call ------------------------------------------------------------------------------------------------------------------------------
INFO     src.swarm.utils.context_utils:context_utils.py:242 --- Starting Truncation --- Mode: Simple (Recent Only), Max Tokens: 1000, Max Messages: 3, Input Msgs: 5
INFO     src.swarm.utils.context_utils:context_utils.py:233 Simple truncation result: 3 messages (1 sys), ~17 tokens.
INFO     src.swarm.utils.context_utils:context_utils.py:275 --- Finished Truncation --- Result Msgs: 3
________________________________________________________________________________________________________________ test_truncate_by_message_count_basic[pairs] _________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,756 - 
--- Running Truncation Test [MsgCountBasic] (Mode: pairs, MaxTk: 1000, MaxMsg: 3) ---
[INFO] 2025-08-24 20:29:16,756 - src.swarm.utils.context_utils:242 - --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 1000, Max Messages: 3, Input Msgs: 5
[INFO] 2025-08-24 20:29:16,756 - src.swarm.utils.context_utils:76 - Sophisticated truncation. Target: 2 msgs, 995 tokens.
[DEBUG] 2025-08-24 20:29:16,756 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=3, Role=assistant, Tokens=6. Kept: Msgs=0, Tokens=0
[DEBUG] 2025-08-24 20:29:16,756 - src.swarm.utils.context_utils:187 -     -> Case 3: Regular Message at index 3
[INFO] 2025-08-24 20:29:16,756 - src.swarm.utils.context_utils:191 -     -> Action: KEEPING SINGLE message 3
[DEBUG] 2025-08-24 20:29:16,756 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=2, Role=user, Tokens=6. Kept: Msgs=1, Tokens=6
[DEBUG] 2025-08-24 20:29:16,756 - src.swarm.utils.context_utils:187 -     -> Case 3: Regular Message at index 2
[INFO] 2025-08-24 20:29:16,756 - src.swarm.utils.context_utils:191 -     -> Action: KEEPING SINGLE message 2
[DEBUG] 2025-08-24 20:29:16,756 - src.swarm.utils.context_utils:81 -   [Loop Stop] Msg limit reached.
[INFO] 2025-08-24 20:29:16,756 - src.swarm.utils.context_utils:206 - Sophisticated truncation result: 3 msgs (1 sys, 2 non-sys), ~17 tokens.
[INFO] 2025-08-24 20:29:16,756 - src.swarm.utils.context_utils:275 - --- Finished Truncation --- Result Msgs: 3
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,756 - --- Test Passed [MsgCountBasic] ---
----------------------------------------------------------------------------------------------------------------------------- Captured log call ------------------------------------------------------------------------------------------------------------------------------
INFO     src.swarm.utils.context_utils:context_utils.py:242 --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 1000, Max Messages: 3, Input Msgs: 5
INFO     src.swarm.utils.context_utils:context_utils.py:76 Sophisticated truncation. Target: 2 msgs, 995 tokens.
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=3, Role=assistant, Tokens=6. Kept: Msgs=0, Tokens=0
DEBUG    src.swarm.utils.context_utils:context_utils.py:187     -> Case 3: Regular Message at index 3
INFO     src.swarm.utils.context_utils:context_utils.py:191     -> Action: KEEPING SINGLE message 3
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=2, Role=user, Tokens=6. Kept: Msgs=1, Tokens=6
DEBUG    src.swarm.utils.context_utils:context_utils.py:187     -> Case 3: Regular Message at index 2
INFO     src.swarm.utils.context_utils:context_utils.py:191     -> Action: KEEPING SINGLE message 2
DEBUG    src.swarm.utils.context_utils:context_utils.py:81   [Loop Stop] Msg limit reached.
INFO     src.swarm.utils.context_utils:context_utils.py:206 Sophisticated truncation result: 3 msgs (1 sys, 2 non-sys), ~17 tokens.
INFO     src.swarm.utils.context_utils:context_utils.py:275 --- Finished Truncation --- Result Msgs: 3
_________________________________________________________________________________________________________________ test_truncate_by_token_count_basic[simple] _________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,759 - 
--- Running Truncation Test [TokenCountBasic] (Mode: simple, MaxTk: 40, MaxMsg: 10) ---
[INFO] 2025-08-24 20:29:16,759 - src.swarm.utils.context_utils:242 - --- Starting Truncation --- Mode: Simple (Recent Only), Max Tokens: 40, Max Messages: 10, Input Msgs: 4
[INFO] 2025-08-24 20:29:16,759 - src.swarm.utils.context_utils:233 - Simple truncation result: 4 messages (1 sys), ~31 tokens.
[INFO] 2025-08-24 20:29:16,759 - src.swarm.utils.context_utils:275 - --- Finished Truncation --- Result Msgs: 4
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,759 - --- Test Passed [TokenCountBasic] ---
----------------------------------------------------------------------------------------------------------------------------- Captured log call ------------------------------------------------------------------------------------------------------------------------------
INFO     src.swarm.utils.context_utils:context_utils.py:242 --- Starting Truncation --- Mode: Simple (Recent Only), Max Tokens: 40, Max Messages: 10, Input Msgs: 4
INFO     src.swarm.utils.context_utils:context_utils.py:233 Simple truncation result: 4 messages (1 sys), ~31 tokens.
INFO     src.swarm.utils.context_utils:context_utils.py:275 --- Finished Truncation --- Result Msgs: 4
_________________________________________________________________________________________________________________ test_truncate_by_token_count_basic[pairs] __________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,762 - 
--- Running Truncation Test [TokenCountBasic] (Mode: pairs, MaxTk: 40, MaxMsg: 10) ---
[INFO] 2025-08-24 20:29:16,762 - src.swarm.utils.context_utils:242 - --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 40, Max Messages: 10, Input Msgs: 4
[INFO] 2025-08-24 20:29:16,762 - src.swarm.utils.context_utils:75 - History fits.
[INFO] 2025-08-24 20:29:16,762 - src.swarm.utils.context_utils:275 - --- Finished Truncation --- Result Msgs: 4
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,762 - --- Test Passed [TokenCountBasic] ---
----------------------------------------------------------------------------------------------------------------------------- Captured log call ------------------------------------------------------------------------------------------------------------------------------
INFO     src.swarm.utils.context_utils:context_utils.py:242 --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 40, Max Messages: 10, Input Msgs: 4
INFO     src.swarm.utils.context_utils:context_utils.py:75 History fits.
INFO     src.swarm.utils.context_utils:context_utils.py:275 --- Finished Truncation --- Result Msgs: 4
________________________________________________________________________________________________________________ test_pairs_preserves_basic_pair_ample_space _________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,765 - 
--- Running Truncation Test [PairsBasicAmple] (Mode: pairs, MaxTk: 1000, MaxMsg: 10) ---
[INFO] 2025-08-24 20:29:16,765 - src.swarm.utils.context_utils:242 - --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 1000, Max Messages: 10, Input Msgs: 5
[INFO] 2025-08-24 20:29:16,765 - src.swarm.utils.context_utils:75 - History fits.
[INFO] 2025-08-24 20:29:16,765 - src.swarm.utils.context_utils:275 - --- Finished Truncation --- Result Msgs: 5
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,766 - --- Test Passed [PairsBasicAmple] ---
----------------------------------------------------------------------------------------------------------------------------- Captured log call ------------------------------------------------------------------------------------------------------------------------------
INFO     src.swarm.utils.context_utils:context_utils.py:242 --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 1000, Max Messages: 10, Input Msgs: 5
INFO     src.swarm.utils.context_utils:context_utils.py:75 History fits.
INFO     src.swarm.utils.context_utils:context_utils.py:275 --- Finished Truncation --- Result Msgs: 5
________________________________________________________________________________________________________________ test_pairs_preserves_basic_pair_tight_space _________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,769 - 
--- Running Truncation Test [PairsBasicTight] (Mode: pairs, MaxTk: 75, MaxMsg: 10) ---
[INFO] 2025-08-24 20:29:16,769 - src.swarm.utils.context_utils:242 - --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 75, Max Messages: 10, Input Msgs: 5
[INFO] 2025-08-24 20:29:16,769 - src.swarm.utils.context_utils:76 - Sophisticated truncation. Target: 9 msgs, 53 tokens.
[DEBUG] 2025-08-24 20:29:16,769 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=3, Role=assistant, Tokens=20. Kept: Msgs=0, Tokens=0
[DEBUG] 2025-08-24 20:29:16,769 - src.swarm.utils.context_utils:187 -     -> Case 3: Regular Message at index 3
[INFO] 2025-08-24 20:29:16,769 - src.swarm.utils.context_utils:191 -     -> Action: KEEPING SINGLE message 3
[DEBUG] 2025-08-24 20:29:16,769 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=2, Role=tool, Tokens=24. Kept: Msgs=1, Tokens=20
[DEBUG] 2025-08-24 20:29:16,769 - src.swarm.utils.context_utils:99 -     -> Case 1: Tool Msg (ID: call_t1)
[DEBUG] 2025-08-24 20:29:16,769 - src.swarm.utils.context_utils:119 -       Found single-call assistant pair at 1. Pair cost=57, Pair msgs=2
[DEBUG] 2025-08-24 20:29:16,769 - src.swarm.utils.context_utils:122 -       Budget Check: (CurrentTokens=20 + PairTokens=57 <= TargetTokens=53) -> False
[DEBUG] 2025-08-24 20:29:16,769 - src.swarm.utils.context_utils:123 -       Budget Check: (CurrentMsgs=1 + PairMsgs=2 <= TargetMsgs=9) -> True
[DEBUG] 2025-08-24 20:29:16,769 - src.swarm.utils.context_utils:131 -         Pair doesn't fit budget.
[DEBUG] 2025-08-24 20:29:16,769 - src.swarm.utils.context_utils:135 -     -> Case 1 Result: Pair found but deferred or didn't fit.
[DEBUG] 2025-08-24 20:29:16,769 - src.swarm.utils.context_utils:200 -   [Loop Default Decrement] No action/break for index 2.
[DEBUG] 2025-08-24 20:29:16,769 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=1, Role=assistant, Tokens=33. Kept: Msgs=1, Tokens=20
[DEBUG] 2025-08-24 20:29:16,769 - src.swarm.utils.context_utils:140 -     -> Case 2: Assistant w/ Tools at index 1
[DEBUG] 2025-08-24 20:29:16,770 - src.swarm.utils.context_utils:153 -       Found 1 tools for 1 calls. Pair Cost=57, Pair Len=2.
[DEBUG] 2025-08-24 20:29:16,770 - src.swarm.utils.context_utils:160 -       Budget Check: (CurrentTokens=20 + PairTokens=57 <= TargetTokens=53) -> False
[DEBUG] 2025-08-24 20:29:16,770 - src.swarm.utils.context_utils:161 -       Budget Check: (CurrentMsgs=1 + PairMsgs=2 <= TargetMsgs=9) -> True
[DEBUG] 2025-08-24 20:29:16,770 - src.swarm.utils.context_utils:175 -       Pair doesn't fit or not all tools found.
[INFO] 2025-08-24 20:29:16,770 - src.swarm.utils.context_utils:179 -     -> Action: KEEPING SINGLE Assistant 1 (pair failed/incomplete).
[DEBUG] 2025-08-24 20:29:16,770 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=0, Role=user, Tokens=12. Kept: Msgs=2, Tokens=53
[DEBUG] 2025-08-24 20:29:16,770 - src.swarm.utils.context_utils:187 -     -> Case 3: Regular Message at index 0
[INFO] 2025-08-24 20:29:16,770 - src.swarm.utils.context_utils:195 -     -> Action: SKIPPING message 0 (Tokens fit: False, Msgs fit: True). Stopping.
[INFO] 2025-08-24 20:29:16,770 - src.swarm.utils.context_utils:206 - Sophisticated truncation result: 3 msgs (1 sys, 2 non-sys), ~75 tokens.
[INFO] 2025-08-24 20:29:16,770 - src.swarm.utils.context_utils:275 - --- Finished Truncation --- Result Msgs: 3
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,770 - --- Test Passed [PairsBasicTight] ---
----------------------------------------------------------------------------------------------------------------------------- Captured log call ------------------------------------------------------------------------------------------------------------------------------
INFO     src.swarm.utils.context_utils:context_utils.py:242 --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 75, Max Messages: 10, Input Msgs: 5
INFO     src.swarm.utils.context_utils:context_utils.py:76 Sophisticated truncation. Target: 9 msgs, 53 tokens.
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=3, Role=assistant, Tokens=20. Kept: Msgs=0, Tokens=0
DEBUG    src.swarm.utils.context_utils:context_utils.py:187     -> Case 3: Regular Message at index 3
INFO     src.swarm.utils.context_utils:context_utils.py:191     -> Action: KEEPING SINGLE message 3
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=2, Role=tool, Tokens=24. Kept: Msgs=1, Tokens=20
DEBUG    src.swarm.utils.context_utils:context_utils.py:99     -> Case 1: Tool Msg (ID: call_t1)
DEBUG    src.swarm.utils.context_utils:context_utils.py:119       Found single-call assistant pair at 1. Pair cost=57, Pair msgs=2
DEBUG    src.swarm.utils.context_utils:context_utils.py:122       Budget Check: (CurrentTokens=20 + PairTokens=57 <= TargetTokens=53) -> False
DEBUG    src.swarm.utils.context_utils:context_utils.py:123       Budget Check: (CurrentMsgs=1 + PairMsgs=2 <= TargetMsgs=9) -> True
DEBUG    src.swarm.utils.context_utils:context_utils.py:131         Pair doesn't fit budget.
DEBUG    src.swarm.utils.context_utils:context_utils.py:135     -> Case 1 Result: Pair found but deferred or didn't fit.
DEBUG    src.swarm.utils.context_utils:context_utils.py:200   [Loop Default Decrement] No action/break for index 2.
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=1, Role=assistant, Tokens=33. Kept: Msgs=1, Tokens=20
DEBUG    src.swarm.utils.context_utils:context_utils.py:140     -> Case 2: Assistant w/ Tools at index 1
DEBUG    src.swarm.utils.context_utils:context_utils.py:153       Found 1 tools for 1 calls. Pair Cost=57, Pair Len=2.
DEBUG    src.swarm.utils.context_utils:context_utils.py:160       Budget Check: (CurrentTokens=20 + PairTokens=57 <= TargetTokens=53) -> False
DEBUG    src.swarm.utils.context_utils:context_utils.py:161       Budget Check: (CurrentMsgs=1 + PairMsgs=2 <= TargetMsgs=9) -> True
DEBUG    src.swarm.utils.context_utils:context_utils.py:175       Pair doesn't fit or not all tools found.
INFO     src.swarm.utils.context_utils:context_utils.py:179     -> Action: KEEPING SINGLE Assistant 1 (pair failed/incomplete).
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=0, Role=user, Tokens=12. Kept: Msgs=2, Tokens=53
DEBUG    src.swarm.utils.context_utils:context_utils.py:187     -> Case 3: Regular Message at index 0
INFO     src.swarm.utils.context_utils:context_utils.py:195     -> Action: SKIPPING message 0 (Tokens fit: False, Msgs fit: True). Stopping.
INFO     src.swarm.utils.context_utils:context_utils.py:206 Sophisticated truncation result: 3 msgs (1 sys, 2 non-sys), ~75 tokens.
INFO     src.swarm.utils.context_utils:context_utils.py:275 --- Finished Truncation --- Result Msgs: 3
________________________________________________________________________________________________________________ test_pairs_preserves_multi_step_ample_space _________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,772 - 
--- Running Truncation Test [PairsMultiAmple] (Mode: pairs, MaxTk: 1000, MaxMsg: 20) ---
[INFO] 2025-08-24 20:29:16,773 - src.swarm.utils.context_utils:242 - --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 1000, Max Messages: 20, Input Msgs: 9
[INFO] 2025-08-24 20:29:16,773 - src.swarm.utils.context_utils:75 - History fits.
[INFO] 2025-08-24 20:29:16,773 - src.swarm.utils.context_utils:275 - --- Finished Truncation --- Result Msgs: 9
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,773 - --- Test Passed [PairsMultiAmple] ---
----------------------------------------------------------------------------------------------------------------------------- Captured log call ------------------------------------------------------------------------------------------------------------------------------
INFO     src.swarm.utils.context_utils:context_utils.py:242 --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 1000, Max Messages: 20, Input Msgs: 9
INFO     src.swarm.utils.context_utils:context_utils.py:75 History fits.
INFO     src.swarm.utils.context_utils:context_utils.py:275 --- Finished Truncation --- Result Msgs: 9
______________________________________________________________________________________________________________ test_pairs_preserves_multi_step_cuts_early_user _______________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,775 - 
--- Running Truncation Test [PairsMultiCutUser] (Mode: pairs, MaxTk: 170, MaxMsg: 20) ---
[INFO] 2025-08-24 20:29:16,776 - src.swarm.utils.context_utils:242 - --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 170, Max Messages: 20, Input Msgs: 9
[INFO] 2025-08-24 20:29:16,776 - src.swarm.utils.context_utils:76 - Sophisticated truncation. Target: 19 msgs, 148 tokens.
[DEBUG] 2025-08-24 20:29:16,776 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=7, Role=assistant, Tokens=10. Kept: Msgs=0, Tokens=0
[DEBUG] 2025-08-24 20:29:16,776 - src.swarm.utils.context_utils:187 -     -> Case 3: Regular Message at index 7
[INFO] 2025-08-24 20:29:16,776 - src.swarm.utils.context_utils:191 -     -> Action: KEEPING SINGLE message 7
[DEBUG] 2025-08-24 20:29:16,776 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=6, Role=tool, Tokens=27. Kept: Msgs=1, Tokens=10
[DEBUG] 2025-08-24 20:29:16,776 - src.swarm.utils.context_utils:99 -     -> Case 1: Tool Msg (ID: call_t2)
[DEBUG] 2025-08-24 20:29:16,776 - src.swarm.utils.context_utils:119 -       Found single-call assistant pair at 5. Pair cost=64, Pair msgs=2
[DEBUG] 2025-08-24 20:29:16,776 - src.swarm.utils.context_utils:122 -       Budget Check: (CurrentTokens=10 + PairTokens=64 <= TargetTokens=148) -> True
[DEBUG] 2025-08-24 20:29:16,776 - src.swarm.utils.context_utils:123 -       Budget Check: (CurrentMsgs=1 + PairMsgs=2 <= TargetMsgs=19) -> True
[INFO] 2025-08-24 20:29:16,776 - src.swarm.utils.context_utils:125 -       Action: KEEPING Pair T(idx 6)+A(idx 5)
[DEBUG] 2025-08-24 20:29:16,776 - src.swarm.utils.context_utils:80 -   [Loop Skip] Idx 5 already kept.
[DEBUG] 2025-08-24 20:29:16,776 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=4, Role=user, Tokens=22. Kept: Msgs=3, Tokens=74
[DEBUG] 2025-08-24 20:29:16,776 - src.swarm.utils.context_utils:187 -     -> Case 3: Regular Message at index 4
[INFO] 2025-08-24 20:29:16,776 - src.swarm.utils.context_utils:191 -     -> Action: KEEPING SINGLE message 4
[DEBUG] 2025-08-24 20:29:16,776 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=3, Role=assistant, Tokens=20. Kept: Msgs=4, Tokens=96
[DEBUG] 2025-08-24 20:29:16,776 - src.swarm.utils.context_utils:187 -     -> Case 3: Regular Message at index 3
[INFO] 2025-08-24 20:29:16,776 - src.swarm.utils.context_utils:191 -     -> Action: KEEPING SINGLE message 3
[DEBUG] 2025-08-24 20:29:16,776 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=2, Role=tool, Tokens=24. Kept: Msgs=5, Tokens=116
[DEBUG] 2025-08-24 20:29:16,776 - src.swarm.utils.context_utils:99 -     -> Case 1: Tool Msg (ID: call_t1)
[DEBUG] 2025-08-24 20:29:16,776 - src.swarm.utils.context_utils:119 -       Found single-call assistant pair at 1. Pair cost=57, Pair msgs=2
[DEBUG] 2025-08-24 20:29:16,776 - src.swarm.utils.context_utils:122 -       Budget Check: (CurrentTokens=116 + PairTokens=57 <= TargetTokens=148) -> False
[DEBUG] 2025-08-24 20:29:16,776 - src.swarm.utils.context_utils:123 -       Budget Check: (CurrentMsgs=5 + PairMsgs=2 <= TargetMsgs=19) -> True
[DEBUG] 2025-08-24 20:29:16,776 - src.swarm.utils.context_utils:131 -         Pair doesn't fit budget.
[DEBUG] 2025-08-24 20:29:16,776 - src.swarm.utils.context_utils:135 -     -> Case 1 Result: Pair found but deferred or didn't fit.
[DEBUG] 2025-08-24 20:29:16,776 - src.swarm.utils.context_utils:200 -   [Loop Default Decrement] No action/break for index 2.
[DEBUG] 2025-08-24 20:29:16,776 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=1, Role=assistant, Tokens=33. Kept: Msgs=5, Tokens=116
[DEBUG] 2025-08-24 20:29:16,776 - src.swarm.utils.context_utils:140 -     -> Case 2: Assistant w/ Tools at index 1
[DEBUG] 2025-08-24 20:29:16,777 - src.swarm.utils.context_utils:153 -       Found 1 tools for 1 calls. Pair Cost=57, Pair Len=2.
[DEBUG] 2025-08-24 20:29:16,777 - src.swarm.utils.context_utils:160 -       Budget Check: (CurrentTokens=116 + PairTokens=57 <= TargetTokens=148) -> False
[DEBUG] 2025-08-24 20:29:16,777 - src.swarm.utils.context_utils:161 -       Budget Check: (CurrentMsgs=5 + PairMsgs=2 <= TargetMsgs=19) -> True
[DEBUG] 2025-08-24 20:29:16,777 - src.swarm.utils.context_utils:175 -       Pair doesn't fit or not all tools found.
[DEBUG] 2025-08-24 20:29:16,777 - src.swarm.utils.context_utils:183 -       Cannot keep single assistant 1 either (Tokens fit: False, Msgs fit: True).
[DEBUG] 2025-08-24 20:29:16,777 - src.swarm.utils.context_utils:200 -   [Loop Default Decrement] No action/break for index 1.
[DEBUG] 2025-08-24 20:29:16,777 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=0, Role=user, Tokens=12. Kept: Msgs=5, Tokens=116
[DEBUG] 2025-08-24 20:29:16,777 - src.swarm.utils.context_utils:187 -     -> Case 3: Regular Message at index 0
[INFO] 2025-08-24 20:29:16,777 - src.swarm.utils.context_utils:191 -     -> Action: KEEPING SINGLE message 0
[INFO] 2025-08-24 20:29:16,777 - src.swarm.utils.context_utils:206 - Sophisticated truncation result: 7 msgs (1 sys, 6 non-sys), ~150 tokens.
[INFO] 2025-08-24 20:29:16,777 - src.swarm.utils.context_utils:275 - --- Finished Truncation --- Result Msgs: 7
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,777 - --- Test Passed [PairsMultiCutUser] ---
----------------------------------------------------------------------------------------------------------------------------- Captured log call ------------------------------------------------------------------------------------------------------------------------------
INFO     src.swarm.utils.context_utils:context_utils.py:242 --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 170, Max Messages: 20, Input Msgs: 9
INFO     src.swarm.utils.context_utils:context_utils.py:76 Sophisticated truncation. Target: 19 msgs, 148 tokens.
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=7, Role=assistant, Tokens=10. Kept: Msgs=0, Tokens=0
DEBUG    src.swarm.utils.context_utils:context_utils.py:187     -> Case 3: Regular Message at index 7
INFO     src.swarm.utils.context_utils:context_utils.py:191     -> Action: KEEPING SINGLE message 7
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=6, Role=tool, Tokens=27. Kept: Msgs=1, Tokens=10
DEBUG    src.swarm.utils.context_utils:context_utils.py:99     -> Case 1: Tool Msg (ID: call_t2)
DEBUG    src.swarm.utils.context_utils:context_utils.py:119       Found single-call assistant pair at 5. Pair cost=64, Pair msgs=2
DEBUG    src.swarm.utils.context_utils:context_utils.py:122       Budget Check: (CurrentTokens=10 + PairTokens=64 <= TargetTokens=148) -> True
DEBUG    src.swarm.utils.context_utils:context_utils.py:123       Budget Check: (CurrentMsgs=1 + PairMsgs=2 <= TargetMsgs=19) -> True
INFO     src.swarm.utils.context_utils:context_utils.py:125       Action: KEEPING Pair T(idx 6)+A(idx 5)
DEBUG    src.swarm.utils.context_utils:context_utils.py:80   [Loop Skip] Idx 5 already kept.
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=4, Role=user, Tokens=22. Kept: Msgs=3, Tokens=74
DEBUG    src.swarm.utils.context_utils:context_utils.py:187     -> Case 3: Regular Message at index 4
INFO     src.swarm.utils.context_utils:context_utils.py:191     -> Action: KEEPING SINGLE message 4
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=3, Role=assistant, Tokens=20. Kept: Msgs=4, Tokens=96
DEBUG    src.swarm.utils.context_utils:context_utils.py:187     -> Case 3: Regular Message at index 3
INFO     src.swarm.utils.context_utils:context_utils.py:191     -> Action: KEEPING SINGLE message 3
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=2, Role=tool, Tokens=24. Kept: Msgs=5, Tokens=116
DEBUG    src.swarm.utils.context_utils:context_utils.py:99     -> Case 1: Tool Msg (ID: call_t1)
DEBUG    src.swarm.utils.context_utils:context_utils.py:119       Found single-call assistant pair at 1. Pair cost=57, Pair msgs=2
DEBUG    src.swarm.utils.context_utils:context_utils.py:122       Budget Check: (CurrentTokens=116 + PairTokens=57 <= TargetTokens=148) -> False
DEBUG    src.swarm.utils.context_utils:context_utils.py:123       Budget Check: (CurrentMsgs=5 + PairMsgs=2 <= TargetMsgs=19) -> True
DEBUG    src.swarm.utils.context_utils:context_utils.py:131         Pair doesn't fit budget.
DEBUG    src.swarm.utils.context_utils:context_utils.py:135     -> Case 1 Result: Pair found but deferred or didn't fit.
DEBUG    src.swarm.utils.context_utils:context_utils.py:200   [Loop Default Decrement] No action/break for index 2.
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=1, Role=assistant, Tokens=33. Kept: Msgs=5, Tokens=116
DEBUG    src.swarm.utils.context_utils:context_utils.py:140     -> Case 2: Assistant w/ Tools at index 1
DEBUG    src.swarm.utils.context_utils:context_utils.py:153       Found 1 tools for 1 calls. Pair Cost=57, Pair Len=2.
DEBUG    src.swarm.utils.context_utils:context_utils.py:160       Budget Check: (CurrentTokens=116 + PairTokens=57 <= TargetTokens=148) -> False
DEBUG    src.swarm.utils.context_utils:context_utils.py:161       Budget Check: (CurrentMsgs=5 + PairMsgs=2 <= TargetMsgs=19) -> True
DEBUG    src.swarm.utils.context_utils:context_utils.py:175       Pair doesn't fit or not all tools found.
DEBUG    src.swarm.utils.context_utils:context_utils.py:183       Cannot keep single assistant 1 either (Tokens fit: False, Msgs fit: True).
DEBUG    src.swarm.utils.context_utils:context_utils.py:200   [Loop Default Decrement] No action/break for index 1.
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=0, Role=user, Tokens=12. Kept: Msgs=5, Tokens=116
DEBUG    src.swarm.utils.context_utils:context_utils.py:187     -> Case 3: Regular Message at index 0
INFO     src.swarm.utils.context_utils:context_utils.py:191     -> Action: KEEPING SINGLE message 0
INFO     src.swarm.utils.context_utils:context_utils.py:206 Sophisticated truncation result: 7 msgs (1 sys, 6 non-sys), ~150 tokens.
INFO     src.swarm.utils.context_utils:context_utils.py:275 --- Finished Truncation --- Result Msgs: 7
______________________________________________________________________________________________________________ test_pairs_preserves_multi_step_cuts_first_pair _______________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,780 - 
--- Running Truncation Test [PairsMultiCutPair] (Mode: pairs, MaxTk: 100, MaxMsg: 20) ---
[INFO] 2025-08-24 20:29:16,780 - src.swarm.utils.context_utils:242 - --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 100, Max Messages: 20, Input Msgs: 9
[INFO] 2025-08-24 20:29:16,780 - src.swarm.utils.context_utils:76 - Sophisticated truncation. Target: 19 msgs, 78 tokens.
[DEBUG] 2025-08-24 20:29:16,780 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=7, Role=assistant, Tokens=10. Kept: Msgs=0, Tokens=0
[DEBUG] 2025-08-24 20:29:16,780 - src.swarm.utils.context_utils:187 -     -> Case 3: Regular Message at index 7
[INFO] 2025-08-24 20:29:16,780 - src.swarm.utils.context_utils:191 -     -> Action: KEEPING SINGLE message 7
[DEBUG] 2025-08-24 20:29:16,780 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=6, Role=tool, Tokens=27. Kept: Msgs=1, Tokens=10
[DEBUG] 2025-08-24 20:29:16,780 - src.swarm.utils.context_utils:99 -     -> Case 1: Tool Msg (ID: call_t2)
[DEBUG] 2025-08-24 20:29:16,780 - src.swarm.utils.context_utils:119 -       Found single-call assistant pair at 5. Pair cost=64, Pair msgs=2
[DEBUG] 2025-08-24 20:29:16,780 - src.swarm.utils.context_utils:122 -       Budget Check: (CurrentTokens=10 + PairTokens=64 <= TargetTokens=78) -> True
[DEBUG] 2025-08-24 20:29:16,780 - src.swarm.utils.context_utils:123 -       Budget Check: (CurrentMsgs=1 + PairMsgs=2 <= TargetMsgs=19) -> True
[INFO] 2025-08-24 20:29:16,780 - src.swarm.utils.context_utils:125 -       Action: KEEPING Pair T(idx 6)+A(idx 5)
[DEBUG] 2025-08-24 20:29:16,780 - src.swarm.utils.context_utils:80 -   [Loop Skip] Idx 5 already kept.
[DEBUG] 2025-08-24 20:29:16,780 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=4, Role=user, Tokens=22. Kept: Msgs=3, Tokens=74
[DEBUG] 2025-08-24 20:29:16,780 - src.swarm.utils.context_utils:187 -     -> Case 3: Regular Message at index 4
[INFO] 2025-08-24 20:29:16,780 - src.swarm.utils.context_utils:195 -     -> Action: SKIPPING message 4 (Tokens fit: False, Msgs fit: True). Stopping.
[INFO] 2025-08-24 20:29:16,780 - src.swarm.utils.context_utils:206 - Sophisticated truncation result: 4 msgs (1 sys, 3 non-sys), ~96 tokens.
[INFO] 2025-08-24 20:29:16,780 - src.swarm.utils.context_utils:275 - --- Finished Truncation --- Result Msgs: 4
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,780 - --- Test Passed [PairsMultiCutPair] ---
----------------------------------------------------------------------------------------------------------------------------- Captured log call ------------------------------------------------------------------------------------------------------------------------------
INFO     src.swarm.utils.context_utils:context_utils.py:242 --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 100, Max Messages: 20, Input Msgs: 9
INFO     src.swarm.utils.context_utils:context_utils.py:76 Sophisticated truncation. Target: 19 msgs, 78 tokens.
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=7, Role=assistant, Tokens=10. Kept: Msgs=0, Tokens=0
DEBUG    src.swarm.utils.context_utils:context_utils.py:187     -> Case 3: Regular Message at index 7
INFO     src.swarm.utils.context_utils:context_utils.py:191     -> Action: KEEPING SINGLE message 7
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=6, Role=tool, Tokens=27. Kept: Msgs=1, Tokens=10
DEBUG    src.swarm.utils.context_utils:context_utils.py:99     -> Case 1: Tool Msg (ID: call_t2)
DEBUG    src.swarm.utils.context_utils:context_utils.py:119       Found single-call assistant pair at 5. Pair cost=64, Pair msgs=2
DEBUG    src.swarm.utils.context_utils:context_utils.py:122       Budget Check: (CurrentTokens=10 + PairTokens=64 <= TargetTokens=78) -> True
DEBUG    src.swarm.utils.context_utils:context_utils.py:123       Budget Check: (CurrentMsgs=1 + PairMsgs=2 <= TargetMsgs=19) -> True
INFO     src.swarm.utils.context_utils:context_utils.py:125       Action: KEEPING Pair T(idx 6)+A(idx 5)
DEBUG    src.swarm.utils.context_utils:context_utils.py:80   [Loop Skip] Idx 5 already kept.
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=4, Role=user, Tokens=22. Kept: Msgs=3, Tokens=74
DEBUG    src.swarm.utils.context_utils:context_utils.py:187     -> Case 3: Regular Message at index 4
INFO     src.swarm.utils.context_utils:context_utils.py:195     -> Action: SKIPPING message 4 (Tokens fit: False, Msgs fit: True). Stopping.
INFO     src.swarm.utils.context_utils:context_utils.py:206 Sophisticated truncation result: 4 msgs (1 sys, 3 non-sys), ~96 tokens.
INFO     src.swarm.utils.context_utils:context_utils.py:275 --- Finished Truncation --- Result Msgs: 4
___________________________________________________________________________________________________________ test_pairs_drops_lone_tool_due_to_separation_or_limit ____________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,783 - 
--- Running Truncation Test [PairsDropLoneToolLimit] (Mode: pairs, MaxTk: 100, MaxMsg: 10) ---
[INFO] 2025-08-24 20:29:16,783 - src.swarm.utils.context_utils:242 - --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 100, Max Messages: 10, Input Msgs: 6
[INFO] 2025-08-24 20:29:16,783 - src.swarm.utils.context_utils:76 - Sophisticated truncation. Target: 9 msgs, 78 tokens.
[DEBUG] 2025-08-24 20:29:16,783 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=4, Role=assistant, Tokens=20. Kept: Msgs=0, Tokens=0
[DEBUG] 2025-08-24 20:29:16,783 - src.swarm.utils.context_utils:187 -     -> Case 3: Regular Message at index 4
[INFO] 2025-08-24 20:29:16,783 - src.swarm.utils.context_utils:191 -     -> Action: KEEPING SINGLE message 4
[DEBUG] 2025-08-24 20:29:16,783 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=3, Role=tool, Tokens=24. Kept: Msgs=1, Tokens=20
[DEBUG] 2025-08-24 20:29:16,783 - src.swarm.utils.context_utils:99 -     -> Case 1: Tool Msg (ID: call_t1)
[DEBUG] 2025-08-24 20:29:16,783 - src.swarm.utils.context_utils:119 -       Found single-call assistant pair at 1. Pair cost=57, Pair msgs=2
[DEBUG] 2025-08-24 20:29:16,784 - src.swarm.utils.context_utils:122 -       Budget Check: (CurrentTokens=20 + PairTokens=57 <= TargetTokens=78) -> True
[DEBUG] 2025-08-24 20:29:16,784 - src.swarm.utils.context_utils:123 -       Budget Check: (CurrentMsgs=1 + PairMsgs=2 <= TargetMsgs=9) -> True
[INFO] 2025-08-24 20:29:16,784 - src.swarm.utils.context_utils:125 -       Action: KEEPING Pair T(idx 3)+A(idx 1)
[DEBUG] 2025-08-24 20:29:16,784 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=2, Role=user, Tokens=22. Kept: Msgs=3, Tokens=77
[DEBUG] 2025-08-24 20:29:16,784 - src.swarm.utils.context_utils:187 -     -> Case 3: Regular Message at index 2
[INFO] 2025-08-24 20:29:16,784 - src.swarm.utils.context_utils:195 -     -> Action: SKIPPING message 2 (Tokens fit: False, Msgs fit: True). Stopping.
[INFO] 2025-08-24 20:29:16,784 - src.swarm.utils.context_utils:206 - Sophisticated truncation result: 4 msgs (1 sys, 3 non-sys), ~99 tokens.
[INFO] 2025-08-24 20:29:16,784 - src.swarm.utils.context_utils:275 - --- Finished Truncation --- Result Msgs: 4
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,784 - --- Test Passed [PairsDropLoneToolLimit] ---
[WARNING] TEST_TRUNC_CORE - 2025-08-24 20:29:16,784 - Stable mock cost NF id=280065059160768. Recalc.
[WARNING] TEST_TRUNC_CORE - 2025-08-24 20:29:16,784 - Stable mock cost NF id=280065059448320. Recalc.
[WARNING] TEST_TRUNC_CORE - 2025-08-24 20:29:16,784 - Stable mock cost NF id=280065057627648. Recalc.
[WARNING] TEST_TRUNC_CORE - 2025-08-24 20:29:16,784 - Stable mock cost NF id=280065059452352. Recalc.
[WARNING] TEST_TRUNC_CORE - 2025-08-24 20:29:16,784 - Stable mock cost NF id=280065057674752. Recalc.
[WARNING] TEST_TRUNC_CORE - 2025-08-24 20:29:16,784 - Stable mock cost NF id=280065057675008. Recalc.
[WARNING] TEST_TRUNC_CORE - 2025-08-24 20:29:16,784 - Stable mock cost NF id=280065065298368. Recalc.
[WARNING] TEST_TRUNC_CORE - 2025-08-24 20:29:16,784 - Stable mock cost NF id=280065057752064. Recalc.
[WARNING] TEST_TRUNC_CORE - 2025-08-24 20:29:16,784 - Stable mock cost NF id=280065043845760. Recalc.
[WARNING] TEST_TRUNC_CORE - 2025-08-24 20:29:16,784 - Stable mock cost NF id=280065057627904. Recalc.
[WARNING] TEST_TRUNC_CORE - 2025-08-24 20:29:16,784 - Stable mock cost NF id=280065059453760. Recalc.
[WARNING] TEST_TRUNC_CORE - 2025-08-24 20:29:16,784 - Stable mock cost NF id=280065057620288. Recalc.
[WARNING] TEST_TRUNC_CORE - 2025-08-24 20:29:16,784 - Stable mock cost NF id=280065043850688. Recalc.
[WARNING] TEST_TRUNC_CORE - 2025-08-24 20:29:16,784 - Stable mock cost NF id=280065057670912. Recalc.
[WARNING] TEST_TRUNC_CORE - 2025-08-24 20:29:16,784 - Stable mock cost NF id=280065057672128. Recalc.
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,784 - 
--- Running Truncation Test [PairsDropLoneToolSep] (Mode: pairs, MaxTk: 100, MaxMsg: 10) ---
[INFO] 2025-08-24 20:29:16,784 - src.swarm.utils.context_utils:242 - --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 100, Max Messages: 10, Input Msgs: 20
[INFO] 2025-08-24 20:29:16,785 - src.swarm.utils.context_utils:76 - Sophisticated truncation. Target: 9 msgs, 78 tokens.
[DEBUG] 2025-08-24 20:29:16,785 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=18, Role=assistant, Tokens=20. Kept: Msgs=0, Tokens=0
[DEBUG] 2025-08-24 20:29:16,785 - src.swarm.utils.context_utils:187 -     -> Case 3: Regular Message at index 18
[INFO] 2025-08-24 20:29:16,785 - src.swarm.utils.context_utils:191 -     -> Action: KEEPING SINGLE message 18
[DEBUG] 2025-08-24 20:29:16,785 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=17, Role=tool, Tokens=24. Kept: Msgs=1, Tokens=20
[DEBUG] 2025-08-24 20:29:16,785 - src.swarm.utils.context_utils:99 -     -> Case 1: Tool Msg (ID: call_t1)
[DEBUG] 2025-08-24 20:29:16,785 - src.swarm.utils.context_utils:119 -       Found single-call assistant pair at 15. Pair cost=57, Pair msgs=2
[DEBUG] 2025-08-24 20:29:16,785 - src.swarm.utils.context_utils:122 -       Budget Check: (CurrentTokens=20 + PairTokens=57 <= TargetTokens=78) -> True
[DEBUG] 2025-08-24 20:29:16,785 - src.swarm.utils.context_utils:123 -       Budget Check: (CurrentMsgs=1 + PairMsgs=2 <= TargetMsgs=9) -> True
[INFO] 2025-08-24 20:29:16,785 - src.swarm.utils.context_utils:125 -       Action: KEEPING Pair T(idx 17)+A(idx 15)
[DEBUG] 2025-08-24 20:29:16,785 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=16, Role=user, Tokens=22. Kept: Msgs=3, Tokens=77
[DEBUG] 2025-08-24 20:29:16,785 - src.swarm.utils.context_utils:187 -     -> Case 3: Regular Message at index 16
[INFO] 2025-08-24 20:29:16,785 - src.swarm.utils.context_utils:195 -     -> Action: SKIPPING message 16 (Tokens fit: False, Msgs fit: True). Stopping.
[INFO] 2025-08-24 20:29:16,785 - src.swarm.utils.context_utils:206 - Sophisticated truncation result: 4 msgs (1 sys, 3 non-sys), ~99 tokens.
[INFO] 2025-08-24 20:29:16,785 - src.swarm.utils.context_utils:275 - --- Finished Truncation --- Result Msgs: 4
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,785 - --- Test Passed [PairsDropLoneToolSep] ---
----------------------------------------------------------------------------------------------------------------------------- Captured log call ------------------------------------------------------------------------------------------------------------------------------
INFO     src.swarm.utils.context_utils:context_utils.py:242 --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 100, Max Messages: 10, Input Msgs: 6
INFO     src.swarm.utils.context_utils:context_utils.py:76 Sophisticated truncation. Target: 9 msgs, 78 tokens.
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=4, Role=assistant, Tokens=20. Kept: Msgs=0, Tokens=0
DEBUG    src.swarm.utils.context_utils:context_utils.py:187     -> Case 3: Regular Message at index 4
INFO     src.swarm.utils.context_utils:context_utils.py:191     -> Action: KEEPING SINGLE message 4
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=3, Role=tool, Tokens=24. Kept: Msgs=1, Tokens=20
DEBUG    src.swarm.utils.context_utils:context_utils.py:99     -> Case 1: Tool Msg (ID: call_t1)
DEBUG    src.swarm.utils.context_utils:context_utils.py:119       Found single-call assistant pair at 1. Pair cost=57, Pair msgs=2
DEBUG    src.swarm.utils.context_utils:context_utils.py:122       Budget Check: (CurrentTokens=20 + PairTokens=57 <= TargetTokens=78) -> True
DEBUG    src.swarm.utils.context_utils:context_utils.py:123       Budget Check: (CurrentMsgs=1 + PairMsgs=2 <= TargetMsgs=9) -> True
INFO     src.swarm.utils.context_utils:context_utils.py:125       Action: KEEPING Pair T(idx 3)+A(idx 1)
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=2, Role=user, Tokens=22. Kept: Msgs=3, Tokens=77
DEBUG    src.swarm.utils.context_utils:context_utils.py:187     -> Case 3: Regular Message at index 2
INFO     src.swarm.utils.context_utils:context_utils.py:195     -> Action: SKIPPING message 2 (Tokens fit: False, Msgs fit: True). Stopping.
INFO     src.swarm.utils.context_utils:context_utils.py:206 Sophisticated truncation result: 4 msgs (1 sys, 3 non-sys), ~99 tokens.
INFO     src.swarm.utils.context_utils:context_utils.py:275 --- Finished Truncation --- Result Msgs: 4
INFO     src.swarm.utils.context_utils:context_utils.py:242 --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 100, Max Messages: 10, Input Msgs: 20
INFO     src.swarm.utils.context_utils:context_utils.py:76 Sophisticated truncation. Target: 9 msgs, 78 tokens.
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=18, Role=assistant, Tokens=20. Kept: Msgs=0, Tokens=0
DEBUG    src.swarm.utils.context_utils:context_utils.py:187     -> Case 3: Regular Message at index 18
INFO     src.swarm.utils.context_utils:context_utils.py:191     -> Action: KEEPING SINGLE message 18
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=17, Role=tool, Tokens=24. Kept: Msgs=1, Tokens=20
DEBUG    src.swarm.utils.context_utils:context_utils.py:99     -> Case 1: Tool Msg (ID: call_t1)
DEBUG    src.swarm.utils.context_utils:context_utils.py:119       Found single-call assistant pair at 15. Pair cost=57, Pair msgs=2
DEBUG    src.swarm.utils.context_utils:context_utils.py:122       Budget Check: (CurrentTokens=20 + PairTokens=57 <= TargetTokens=78) -> True
DEBUG    src.swarm.utils.context_utils:context_utils.py:123       Budget Check: (CurrentMsgs=1 + PairMsgs=2 <= TargetMsgs=9) -> True
INFO     src.swarm.utils.context_utils:context_utils.py:125       Action: KEEPING Pair T(idx 17)+A(idx 15)
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=16, Role=user, Tokens=22. Kept: Msgs=3, Tokens=77
DEBUG    src.swarm.utils.context_utils:context_utils.py:187     -> Case 3: Regular Message at index 16
INFO     src.swarm.utils.context_utils:context_utils.py:195     -> Action: SKIPPING message 16 (Tokens fit: False, Msgs fit: True). Stopping.
INFO     src.swarm.utils.context_utils:context_utils.py:206 Sophisticated truncation result: 4 msgs (1 sys, 3 non-sys), ~99 tokens.
INFO     src.swarm.utils.context_utils:context_utils.py:275 --- Finished Truncation --- Result Msgs: 4
__________________________________________________________________________________________________________________ test_pairs_handles_missing_tool_response __________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,788 - 
--- Running Truncation Test [PairsMissingToolResp] (Mode: pairs, MaxTk: 80, MaxMsg: 10) ---
[INFO] 2025-08-24 20:29:16,788 - src.swarm.utils.context_utils:242 - --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 80, Max Messages: 10, Input Msgs: 5
[INFO] 2025-08-24 20:29:16,788 - src.swarm.utils.context_utils:76 - Sophisticated truncation. Target: 9 msgs, 58 tokens.
[DEBUG] 2025-08-24 20:29:16,788 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=3, Role=assistant, Tokens=20. Kept: Msgs=0, Tokens=0
[DEBUG] 2025-08-24 20:29:16,788 - src.swarm.utils.context_utils:187 -     -> Case 3: Regular Message at index 3
[INFO] 2025-08-24 20:29:16,788 - src.swarm.utils.context_utils:191 -     -> Action: KEEPING SINGLE message 3
[DEBUG] 2025-08-24 20:29:16,788 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=2, Role=user, Tokens=22. Kept: Msgs=1, Tokens=20
[DEBUG] 2025-08-24 20:29:16,788 - src.swarm.utils.context_utils:187 -     -> Case 3: Regular Message at index 2
[INFO] 2025-08-24 20:29:16,788 - src.swarm.utils.context_utils:191 -     -> Action: KEEPING SINGLE message 2
[DEBUG] 2025-08-24 20:29:16,788 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=1, Role=assistant, Tokens=33. Kept: Msgs=2, Tokens=42
[DEBUG] 2025-08-24 20:29:16,788 - src.swarm.utils.context_utils:140 -     -> Case 2: Assistant w/ Tools at index 1
[DEBUG] 2025-08-24 20:29:16,788 - src.swarm.utils.context_utils:153 -       Found 0 tools for 1 calls. Pair Cost=33, Pair Len=1.
[DEBUG] 2025-08-24 20:29:16,788 - src.swarm.utils.context_utils:156 -       Did not find all expected tools for this assistant call.
[DEBUG] 2025-08-24 20:29:16,788 - src.swarm.utils.context_utils:160 -       Budget Check: (CurrentTokens=42 + PairTokens=33 <= TargetTokens=58) -> False
[DEBUG] 2025-08-24 20:29:16,788 - src.swarm.utils.context_utils:161 -       Budget Check: (CurrentMsgs=2 + PairMsgs=1 <= TargetMsgs=9) -> True
[DEBUG] 2025-08-24 20:29:16,788 - src.swarm.utils.context_utils:175 -       Pair doesn't fit or not all tools found.
[DEBUG] 2025-08-24 20:29:16,788 - src.swarm.utils.context_utils:183 -       Cannot keep single assistant 1 either (Tokens fit: False, Msgs fit: True).
[DEBUG] 2025-08-24 20:29:16,788 - src.swarm.utils.context_utils:200 -   [Loop Default Decrement] No action/break for index 1.
[DEBUG] 2025-08-24 20:29:16,788 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=0, Role=user, Tokens=12. Kept: Msgs=2, Tokens=42
[DEBUG] 2025-08-24 20:29:16,788 - src.swarm.utils.context_utils:187 -     -> Case 3: Regular Message at index 0
[INFO] 2025-08-24 20:29:16,789 - src.swarm.utils.context_utils:191 -     -> Action: KEEPING SINGLE message 0
[INFO] 2025-08-24 20:29:16,789 - src.swarm.utils.context_utils:206 - Sophisticated truncation result: 4 msgs (1 sys, 3 non-sys), ~76 tokens.
[INFO] 2025-08-24 20:29:16,789 - src.swarm.utils.context_utils:275 - --- Finished Truncation --- Result Msgs: 4
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,789 - --- Test Passed [PairsMissingToolResp] ---
----------------------------------------------------------------------------------------------------------------------------- Captured log call ------------------------------------------------------------------------------------------------------------------------------
INFO     src.swarm.utils.context_utils:context_utils.py:242 --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 80, Max Messages: 10, Input Msgs: 5
INFO     src.swarm.utils.context_utils:context_utils.py:76 Sophisticated truncation. Target: 9 msgs, 58 tokens.
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=3, Role=assistant, Tokens=20. Kept: Msgs=0, Tokens=0
DEBUG    src.swarm.utils.context_utils:context_utils.py:187     -> Case 3: Regular Message at index 3
INFO     src.swarm.utils.context_utils:context_utils.py:191     -> Action: KEEPING SINGLE message 3
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=2, Role=user, Tokens=22. Kept: Msgs=1, Tokens=20
DEBUG    src.swarm.utils.context_utils:context_utils.py:187     -> Case 3: Regular Message at index 2
INFO     src.swarm.utils.context_utils:context_utils.py:191     -> Action: KEEPING SINGLE message 2
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=1, Role=assistant, Tokens=33. Kept: Msgs=2, Tokens=42
DEBUG    src.swarm.utils.context_utils:context_utils.py:140     -> Case 2: Assistant w/ Tools at index 1
DEBUG    src.swarm.utils.context_utils:context_utils.py:153       Found 0 tools for 1 calls. Pair Cost=33, Pair Len=1.
DEBUG    src.swarm.utils.context_utils:context_utils.py:156       Did not find all expected tools for this assistant call.
DEBUG    src.swarm.utils.context_utils:context_utils.py:160       Budget Check: (CurrentTokens=42 + PairTokens=33 <= TargetTokens=58) -> False
DEBUG    src.swarm.utils.context_utils:context_utils.py:161       Budget Check: (CurrentMsgs=2 + PairMsgs=1 <= TargetMsgs=9) -> True
DEBUG    src.swarm.utils.context_utils:context_utils.py:175       Pair doesn't fit or not all tools found.
DEBUG    src.swarm.utils.context_utils:context_utils.py:183       Cannot keep single assistant 1 either (Tokens fit: False, Msgs fit: True).
DEBUG    src.swarm.utils.context_utils:context_utils.py:200   [Loop Default Decrement] No action/break for index 1.
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=0, Role=user, Tokens=12. Kept: Msgs=2, Tokens=42
DEBUG    src.swarm.utils.context_utils:context_utils.py:187     -> Case 3: Regular Message at index 0
INFO     src.swarm.utils.context_utils:context_utils.py:191     -> Action: KEEPING SINGLE message 0
INFO     src.swarm.utils.context_utils:context_utils.py:206 Sophisticated truncation result: 4 msgs (1 sys, 3 non-sys), ~76 tokens.
INFO     src.swarm.utils.context_utils:context_utils.py:275 --- Finished Truncation --- Result Msgs: 4
________________________________________________________________________________________________________________ test_pairs_interspersed_messages_truncation _________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,791 - 
--- Running Truncation Test [PairsInterspersed] (Mode: pairs, MaxTk: 100, MaxMsg: 10) ---
[INFO] 2025-08-24 20:29:16,791 - src.swarm.utils.context_utils:242 - --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 100, Max Messages: 10, Input Msgs: 8
[INFO] 2025-08-24 20:29:16,792 - src.swarm.utils.context_utils:76 - Sophisticated truncation. Target: 9 msgs, 78 tokens.
[DEBUG] 2025-08-24 20:29:16,792 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=6, Role=assistant, Tokens=19. Kept: Msgs=0, Tokens=0
[DEBUG] 2025-08-24 20:29:16,792 - src.swarm.utils.context_utils:187 -     -> Case 3: Regular Message at index 6
[INFO] 2025-08-24 20:29:16,792 - src.swarm.utils.context_utils:191 -     -> Action: KEEPING SINGLE message 6
[DEBUG] 2025-08-24 20:29:16,792 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=5, Role=user, Tokens=20. Kept: Msgs=1, Tokens=19
[DEBUG] 2025-08-24 20:29:16,792 - src.swarm.utils.context_utils:187 -     -> Case 3: Regular Message at index 5
[INFO] 2025-08-24 20:29:16,792 - src.swarm.utils.context_utils:191 -     -> Action: KEEPING SINGLE message 5
[DEBUG] 2025-08-24 20:29:16,792 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=4, Role=assistant, Tokens=20. Kept: Msgs=2, Tokens=39
[DEBUG] 2025-08-24 20:29:16,792 - src.swarm.utils.context_utils:187 -     -> Case 3: Regular Message at index 4
[INFO] 2025-08-24 20:29:16,792 - src.swarm.utils.context_utils:191 -     -> Action: KEEPING SINGLE message 4
[DEBUG] 2025-08-24 20:29:16,792 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=3, Role=tool, Tokens=24. Kept: Msgs=3, Tokens=59
[DEBUG] 2025-08-24 20:29:16,792 - src.swarm.utils.context_utils:99 -     -> Case 1: Tool Msg (ID: call_t1)
[DEBUG] 2025-08-24 20:29:16,792 - src.swarm.utils.context_utils:119 -       Found single-call assistant pair at 1. Pair cost=57, Pair msgs=2
[DEBUG] 2025-08-24 20:29:16,792 - src.swarm.utils.context_utils:122 -       Budget Check: (CurrentTokens=59 + PairTokens=57 <= TargetTokens=78) -> False
[DEBUG] 2025-08-24 20:29:16,792 - src.swarm.utils.context_utils:123 -       Budget Check: (CurrentMsgs=3 + PairMsgs=2 <= TargetMsgs=9) -> True
[DEBUG] 2025-08-24 20:29:16,792 - src.swarm.utils.context_utils:131 -         Pair doesn't fit budget.
[DEBUG] 2025-08-24 20:29:16,792 - src.swarm.utils.context_utils:135 -     -> Case 1 Result: Pair found but deferred or didn't fit.
[DEBUG] 2025-08-24 20:29:16,792 - src.swarm.utils.context_utils:200 -   [Loop Default Decrement] No action/break for index 3.
[DEBUG] 2025-08-24 20:29:16,792 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=2, Role=user, Tokens=22. Kept: Msgs=3, Tokens=59
[DEBUG] 2025-08-24 20:29:16,792 - src.swarm.utils.context_utils:187 -     -> Case 3: Regular Message at index 2
[INFO] 2025-08-24 20:29:16,792 - src.swarm.utils.context_utils:195 -     -> Action: SKIPPING message 2 (Tokens fit: False, Msgs fit: True). Stopping.
[INFO] 2025-08-24 20:29:16,792 - src.swarm.utils.context_utils:206 - Sophisticated truncation result: 4 msgs (1 sys, 3 non-sys), ~81 tokens.
[INFO] 2025-08-24 20:29:16,792 - src.swarm.utils.context_utils:275 - --- Finished Truncation --- Result Msgs: 4
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,792 - --- Test Passed [PairsInterspersed] ---
----------------------------------------------------------------------------------------------------------------------------- Captured log call ------------------------------------------------------------------------------------------------------------------------------
INFO     src.swarm.utils.context_utils:context_utils.py:242 --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 100, Max Messages: 10, Input Msgs: 8
INFO     src.swarm.utils.context_utils:context_utils.py:76 Sophisticated truncation. Target: 9 msgs, 78 tokens.
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=6, Role=assistant, Tokens=19. Kept: Msgs=0, Tokens=0
DEBUG    src.swarm.utils.context_utils:context_utils.py:187     -> Case 3: Regular Message at index 6
INFO     src.swarm.utils.context_utils:context_utils.py:191     -> Action: KEEPING SINGLE message 6
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=5, Role=user, Tokens=20. Kept: Msgs=1, Tokens=19
DEBUG    src.swarm.utils.context_utils:context_utils.py:187     -> Case 3: Regular Message at index 5
INFO     src.swarm.utils.context_utils:context_utils.py:191     -> Action: KEEPING SINGLE message 5
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=4, Role=assistant, Tokens=20. Kept: Msgs=2, Tokens=39
DEBUG    src.swarm.utils.context_utils:context_utils.py:187     -> Case 3: Regular Message at index 4
INFO     src.swarm.utils.context_utils:context_utils.py:191     -> Action: KEEPING SINGLE message 4
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=3, Role=tool, Tokens=24. Kept: Msgs=3, Tokens=59
DEBUG    src.swarm.utils.context_utils:context_utils.py:99     -> Case 1: Tool Msg (ID: call_t1)
DEBUG    src.swarm.utils.context_utils:context_utils.py:119       Found single-call assistant pair at 1. Pair cost=57, Pair msgs=2
DEBUG    src.swarm.utils.context_utils:context_utils.py:122       Budget Check: (CurrentTokens=59 + PairTokens=57 <= TargetTokens=78) -> False
DEBUG    src.swarm.utils.context_utils:context_utils.py:123       Budget Check: (CurrentMsgs=3 + PairMsgs=2 <= TargetMsgs=9) -> True
DEBUG    src.swarm.utils.context_utils:context_utils.py:131         Pair doesn't fit budget.
DEBUG    src.swarm.utils.context_utils:context_utils.py:135     -> Case 1 Result: Pair found but deferred or didn't fit.
DEBUG    src.swarm.utils.context_utils:context_utils.py:200   [Loop Default Decrement] No action/break for index 3.
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=2, Role=user, Tokens=22. Kept: Msgs=3, Tokens=59
DEBUG    src.swarm.utils.context_utils:context_utils.py:187     -> Case 3: Regular Message at index 2
INFO     src.swarm.utils.context_utils:context_utils.py:195     -> Action: SKIPPING message 2 (Tokens fit: False, Msgs fit: True). Stopping.
INFO     src.swarm.utils.context_utils:context_utils.py:206 Sophisticated truncation result: 4 msgs (1 sys, 3 non-sys), ~81 tokens.
INFO     src.swarm.utils.context_utils:context_utils.py:275 --- Finished Truncation --- Result Msgs: 4
____________________________________________________________________________________________________________ test_pairs_system_message_priority_and_exceeds_limit ____________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,795 - 
--- Running Truncation Test [PairsSysExceeds] (Mode: pairs, MaxTk: 100, MaxMsg: 10) ---
[INFO] 2025-08-24 20:29:16,795 - src.swarm.utils.context_utils:242 - --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 100, Max Messages: 10, Input Msgs: 3
[INFO] 2025-08-24 20:29:16,795 - src.swarm.utils.context_utils:76 - Sophisticated truncation. Target: 9 msgs, 0 tokens.
[DEBUG] 2025-08-24 20:29:16,795 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=1, Role=assistant, Tokens=33. Kept: Msgs=0, Tokens=0
[DEBUG] 2025-08-24 20:29:16,795 - src.swarm.utils.context_utils:140 -     -> Case 2: Assistant w/ Tools at index 1
[DEBUG] 2025-08-24 20:29:16,795 - src.swarm.utils.context_utils:153 -       Found 0 tools for 1 calls. Pair Cost=33, Pair Len=1.
[DEBUG] 2025-08-24 20:29:16,795 - src.swarm.utils.context_utils:156 -       Did not find all expected tools for this assistant call.
[DEBUG] 2025-08-24 20:29:16,795 - src.swarm.utils.context_utils:160 -       Budget Check: (CurrentTokens=0 + PairTokens=33 <= TargetTokens=0) -> False
[DEBUG] 2025-08-24 20:29:16,795 - src.swarm.utils.context_utils:161 -       Budget Check: (CurrentMsgs=0 + PairMsgs=1 <= TargetMsgs=9) -> True
[DEBUG] 2025-08-24 20:29:16,795 - src.swarm.utils.context_utils:175 -       Pair doesn't fit or not all tools found.
[DEBUG] 2025-08-24 20:29:16,795 - src.swarm.utils.context_utils:183 -       Cannot keep single assistant 1 either (Tokens fit: False, Msgs fit: True).
[DEBUG] 2025-08-24 20:29:16,795 - src.swarm.utils.context_utils:200 -   [Loop Default Decrement] No action/break for index 1.
[DEBUG] 2025-08-24 20:29:16,795 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=0, Role=user, Tokens=12. Kept: Msgs=0, Tokens=0
[DEBUG] 2025-08-24 20:29:16,795 - src.swarm.utils.context_utils:187 -     -> Case 3: Regular Message at index 0
[INFO] 2025-08-24 20:29:16,796 - src.swarm.utils.context_utils:195 -     -> Action: SKIPPING message 0 (Tokens fit: False, Msgs fit: True). Stopping.
[INFO] 2025-08-24 20:29:16,796 - src.swarm.utils.context_utils:206 - Sophisticated truncation result: 1 msgs (1 sys, 0 non-sys), ~100 tokens.
[INFO] 2025-08-24 20:29:16,796 - src.swarm.utils.context_utils:275 - --- Finished Truncation --- Result Msgs: 1
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,796 - --- Test Passed [PairsSysExceeds] ---
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,796 - 
--- Running Truncation Test [PairsSysFits] (Mode: pairs, MaxTk: 200, MaxMsg: 10) ---
[INFO] 2025-08-24 20:29:16,796 - src.swarm.utils.context_utils:242 - --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 200, Max Messages: 10, Input Msgs: 3
[INFO] 2025-08-24 20:29:16,796 - src.swarm.utils.context_utils:75 - History fits.
[INFO] 2025-08-24 20:29:16,796 - src.swarm.utils.context_utils:275 - --- Finished Truncation --- Result Msgs: 3
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,796 - --- Test Passed [PairsSysFits] ---
----------------------------------------------------------------------------------------------------------------------------- Captured log call ------------------------------------------------------------------------------------------------------------------------------
INFO     src.swarm.utils.context_utils:context_utils.py:242 --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 100, Max Messages: 10, Input Msgs: 3
INFO     src.swarm.utils.context_utils:context_utils.py:76 Sophisticated truncation. Target: 9 msgs, 0 tokens.
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=1, Role=assistant, Tokens=33. Kept: Msgs=0, Tokens=0
DEBUG    src.swarm.utils.context_utils:context_utils.py:140     -> Case 2: Assistant w/ Tools at index 1
DEBUG    src.swarm.utils.context_utils:context_utils.py:153       Found 0 tools for 1 calls. Pair Cost=33, Pair Len=1.
DEBUG    src.swarm.utils.context_utils:context_utils.py:156       Did not find all expected tools for this assistant call.
DEBUG    src.swarm.utils.context_utils:context_utils.py:160       Budget Check: (CurrentTokens=0 + PairTokens=33 <= TargetTokens=0) -> False
DEBUG    src.swarm.utils.context_utils:context_utils.py:161       Budget Check: (CurrentMsgs=0 + PairMsgs=1 <= TargetMsgs=9) -> True
DEBUG    src.swarm.utils.context_utils:context_utils.py:175       Pair doesn't fit or not all tools found.
DEBUG    src.swarm.utils.context_utils:context_utils.py:183       Cannot keep single assistant 1 either (Tokens fit: False, Msgs fit: True).
DEBUG    src.swarm.utils.context_utils:context_utils.py:200   [Loop Default Decrement] No action/break for index 1.
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=0, Role=user, Tokens=12. Kept: Msgs=0, Tokens=0
DEBUG    src.swarm.utils.context_utils:context_utils.py:187     -> Case 3: Regular Message at index 0
INFO     src.swarm.utils.context_utils:context_utils.py:195     -> Action: SKIPPING message 0 (Tokens fit: False, Msgs fit: True). Stopping.
INFO     src.swarm.utils.context_utils:context_utils.py:206 Sophisticated truncation result: 1 msgs (1 sys, 0 non-sys), ~100 tokens.
INFO     src.swarm.utils.context_utils:context_utils.py:275 --- Finished Truncation --- Result Msgs: 1
INFO     src.swarm.utils.context_utils:context_utils.py:242 --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 200, Max Messages: 10, Input Msgs: 3
INFO     src.swarm.utils.context_utils:context_utils.py:75 History fits.
INFO     src.swarm.utils.context_utils:context_utils.py:275 --- Finished Truncation --- Result Msgs: 3
___________________________________________________________________________________________________________________ test_pairs_multi_call_in_one_turn_fits ___________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,799 - 
--- Running Truncation Test [PairsMultiCallFits] (Mode: pairs, MaxTk: 400, MaxMsg: 10) ---
[INFO] 2025-08-24 20:29:16,799 - src.swarm.utils.context_utils:242 - --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 400, Max Messages: 10, Input Msgs: 6
[INFO] 2025-08-24 20:29:16,799 - src.swarm.utils.context_utils:75 - History fits.
[INFO] 2025-08-24 20:29:16,799 - src.swarm.utils.context_utils:275 - --- Finished Truncation --- Result Msgs: 6
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,799 - --- Test Passed [PairsMultiCallFits] ---
----------------------------------------------------------------------------------------------------------------------------- Captured log call ------------------------------------------------------------------------------------------------------------------------------
INFO     src.swarm.utils.context_utils:context_utils.py:242 --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 400, Max Messages: 10, Input Msgs: 6
INFO     src.swarm.utils.context_utils:context_utils.py:75 History fits.
INFO     src.swarm.utils.context_utils:context_utils.py:275 --- Finished Truncation --- Result Msgs: 6
________________________________________________________________________________________________________________ test_pairs_multi_call_in_one_turn_cuts_user _________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,801 - 
--- Running Truncation Test [PairsMultiCallCutUser] (Mode: pairs, MaxTk: 150, MaxMsg: 10) ---
[INFO] 2025-08-24 20:29:16,802 - src.swarm.utils.context_utils:242 - --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 150, Max Messages: 10, Input Msgs: 6
[INFO] 2025-08-24 20:29:16,802 - src.swarm.utils.context_utils:76 - Sophisticated truncation. Target: 9 msgs, 128 tokens.
[DEBUG] 2025-08-24 20:29:16,802 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=4, Role=assistant, Tokens=25. Kept: Msgs=0, Tokens=0
[DEBUG] 2025-08-24 20:29:16,802 - src.swarm.utils.context_utils:187 -     -> Case 3: Regular Message at index 4
[INFO] 2025-08-24 20:29:16,802 - src.swarm.utils.context_utils:191 -     -> Action: KEEPING SINGLE message 4
[DEBUG] 2025-08-24 20:29:16,802 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=3, Role=tool, Tokens=22. Kept: Msgs=1, Tokens=25
[DEBUG] 2025-08-24 20:29:16,802 - src.swarm.utils.context_utils:99 -     -> Case 1: Tool Msg (ID: call_mc2)
[DEBUG] 2025-08-24 20:29:16,802 - src.swarm.utils.context_utils:114 -       Found assistant pair at 1, but it has multiple tool calls (2). Deferring to Case 2.
[DEBUG] 2025-08-24 20:29:16,802 - src.swarm.utils.context_utils:135 -     -> Case 1 Result: Pair found but deferred or didn't fit.
[DEBUG] 2025-08-24 20:29:16,802 - src.swarm.utils.context_utils:200 -   [Loop Default Decrement] No action/break for index 3.
[DEBUG] 2025-08-24 20:29:16,802 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=2, Role=tool, Tokens=22. Kept: Msgs=1, Tokens=25
[DEBUG] 2025-08-24 20:29:16,802 - src.swarm.utils.context_utils:99 -     -> Case 1: Tool Msg (ID: call_mc1)
[DEBUG] 2025-08-24 20:29:16,802 - src.swarm.utils.context_utils:114 -       Found assistant pair at 1, but it has multiple tool calls (2). Deferring to Case 2.
[DEBUG] 2025-08-24 20:29:16,802 - src.swarm.utils.context_utils:135 -     -> Case 1 Result: Pair found but deferred or didn't fit.
[DEBUG] 2025-08-24 20:29:16,802 - src.swarm.utils.context_utils:200 -   [Loop Default Decrement] No action/break for index 2.
[DEBUG] 2025-08-24 20:29:16,802 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=1, Role=assistant, Tokens=59. Kept: Msgs=1, Tokens=25
[DEBUG] 2025-08-24 20:29:16,802 - src.swarm.utils.context_utils:140 -     -> Case 2: Assistant w/ Tools at index 1
[DEBUG] 2025-08-24 20:29:16,802 - src.swarm.utils.context_utils:153 -       Found 2 tools for 2 calls. Pair Cost=103, Pair Len=3.
[DEBUG] 2025-08-24 20:29:16,802 - src.swarm.utils.context_utils:160 -       Budget Check: (CurrentTokens=25 + PairTokens=103 <= TargetTokens=128) -> True
[DEBUG] 2025-08-24 20:29:16,802 - src.swarm.utils.context_utils:161 -       Budget Check: (CurrentMsgs=1 + PairMsgs=3 <= TargetMsgs=9) -> True
[INFO] 2025-08-24 20:29:16,802 - src.swarm.utils.context_utils:164 -     -> Action: KEEPING Pair A(idx 1)+Tools([2, 3])
[DEBUG] 2025-08-24 20:29:16,803 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=0, Role=user, Tokens=224. Kept: Msgs=4, Tokens=128
[DEBUG] 2025-08-24 20:29:16,803 - src.swarm.utils.context_utils:187 -     -> Case 3: Regular Message at index 0
[INFO] 2025-08-24 20:29:16,803 - src.swarm.utils.context_utils:195 -     -> Action: SKIPPING message 0 (Tokens fit: False, Msgs fit: True). Stopping.
[INFO] 2025-08-24 20:29:16,803 - src.swarm.utils.context_utils:206 - Sophisticated truncation result: 5 msgs (1 sys, 4 non-sys), ~150 tokens.
[INFO] 2025-08-24 20:29:16,803 - src.swarm.utils.context_utils:275 - --- Finished Truncation --- Result Msgs: 5
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,803 - --- Test Passed [PairsMultiCallCutUser] ---
----------------------------------------------------------------------------------------------------------------------------- Captured log call ------------------------------------------------------------------------------------------------------------------------------
INFO     src.swarm.utils.context_utils:context_utils.py:242 --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 150, Max Messages: 10, Input Msgs: 6
INFO     src.swarm.utils.context_utils:context_utils.py:76 Sophisticated truncation. Target: 9 msgs, 128 tokens.
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=4, Role=assistant, Tokens=25. Kept: Msgs=0, Tokens=0
DEBUG    src.swarm.utils.context_utils:context_utils.py:187     -> Case 3: Regular Message at index 4
INFO     src.swarm.utils.context_utils:context_utils.py:191     -> Action: KEEPING SINGLE message 4
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=3, Role=tool, Tokens=22. Kept: Msgs=1, Tokens=25
DEBUG    src.swarm.utils.context_utils:context_utils.py:99     -> Case 1: Tool Msg (ID: call_mc2)
DEBUG    src.swarm.utils.context_utils:context_utils.py:114       Found assistant pair at 1, but it has multiple tool calls (2). Deferring to Case 2.
DEBUG    src.swarm.utils.context_utils:context_utils.py:135     -> Case 1 Result: Pair found but deferred or didn't fit.
DEBUG    src.swarm.utils.context_utils:context_utils.py:200   [Loop Default Decrement] No action/break for index 3.
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=2, Role=tool, Tokens=22. Kept: Msgs=1, Tokens=25
DEBUG    src.swarm.utils.context_utils:context_utils.py:99     -> Case 1: Tool Msg (ID: call_mc1)
DEBUG    src.swarm.utils.context_utils:context_utils.py:114       Found assistant pair at 1, but it has multiple tool calls (2). Deferring to Case 2.
DEBUG    src.swarm.utils.context_utils:context_utils.py:135     -> Case 1 Result: Pair found but deferred or didn't fit.
DEBUG    src.swarm.utils.context_utils:context_utils.py:200   [Loop Default Decrement] No action/break for index 2.
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=1, Role=assistant, Tokens=59. Kept: Msgs=1, Tokens=25
DEBUG    src.swarm.utils.context_utils:context_utils.py:140     -> Case 2: Assistant w/ Tools at index 1
DEBUG    src.swarm.utils.context_utils:context_utils.py:153       Found 2 tools for 2 calls. Pair Cost=103, Pair Len=3.
DEBUG    src.swarm.utils.context_utils:context_utils.py:160       Budget Check: (CurrentTokens=25 + PairTokens=103 <= TargetTokens=128) -> True
DEBUG    src.swarm.utils.context_utils:context_utils.py:161       Budget Check: (CurrentMsgs=1 + PairMsgs=3 <= TargetMsgs=9) -> True
INFO     src.swarm.utils.context_utils:context_utils.py:164     -> Action: KEEPING Pair A(idx 1)+Tools([2, 3])
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=0, Role=user, Tokens=224. Kept: Msgs=4, Tokens=128
DEBUG    src.swarm.utils.context_utils:context_utils.py:187     -> Case 3: Regular Message at index 0
INFO     src.swarm.utils.context_utils:context_utils.py:195     -> Action: SKIPPING message 0 (Tokens fit: False, Msgs fit: True). Stopping.
INFO     src.swarm.utils.context_utils:context_utils.py:206 Sophisticated truncation result: 5 msgs (1 sys, 4 non-sys), ~150 tokens.
INFO     src.swarm.utils.context_utils:context_utils.py:275 --- Finished Truncation --- Result Msgs: 5
________________________________________________________________________________________________________________ test_pairs_multi_call_in_one_turn_cuts_pair _________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,805 - 
--- Running Truncation Test [PairsMultiCallCutPair] (Mode: pairs, MaxTk: 100, MaxMsg: 10) ---
[INFO] 2025-08-24 20:29:16,805 - src.swarm.utils.context_utils:242 - --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 100, Max Messages: 10, Input Msgs: 6
[INFO] 2025-08-24 20:29:16,806 - src.swarm.utils.context_utils:76 - Sophisticated truncation. Target: 9 msgs, 78 tokens.
[DEBUG] 2025-08-24 20:29:16,806 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=4, Role=assistant, Tokens=25. Kept: Msgs=0, Tokens=0
[DEBUG] 2025-08-24 20:29:16,806 - src.swarm.utils.context_utils:187 -     -> Case 3: Regular Message at index 4
[INFO] 2025-08-24 20:29:16,806 - src.swarm.utils.context_utils:191 -     -> Action: KEEPING SINGLE message 4
[DEBUG] 2025-08-24 20:29:16,806 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=3, Role=tool, Tokens=22. Kept: Msgs=1, Tokens=25
[DEBUG] 2025-08-24 20:29:16,806 - src.swarm.utils.context_utils:99 -     -> Case 1: Tool Msg (ID: call_mc2)
[DEBUG] 2025-08-24 20:29:16,806 - src.swarm.utils.context_utils:114 -       Found assistant pair at 1, but it has multiple tool calls (2). Deferring to Case 2.
[DEBUG] 2025-08-24 20:29:16,806 - src.swarm.utils.context_utils:135 -     -> Case 1 Result: Pair found but deferred or didn't fit.
[DEBUG] 2025-08-24 20:29:16,806 - src.swarm.utils.context_utils:200 -   [Loop Default Decrement] No action/break for index 3.
[DEBUG] 2025-08-24 20:29:16,806 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=2, Role=tool, Tokens=22. Kept: Msgs=1, Tokens=25
[DEBUG] 2025-08-24 20:29:16,806 - src.swarm.utils.context_utils:99 -     -> Case 1: Tool Msg (ID: call_mc1)
[DEBUG] 2025-08-24 20:29:16,806 - src.swarm.utils.context_utils:114 -       Found assistant pair at 1, but it has multiple tool calls (2). Deferring to Case 2.
[DEBUG] 2025-08-24 20:29:16,806 - src.swarm.utils.context_utils:135 -     -> Case 1 Result: Pair found but deferred or didn't fit.
[DEBUG] 2025-08-24 20:29:16,806 - src.swarm.utils.context_utils:200 -   [Loop Default Decrement] No action/break for index 2.
[DEBUG] 2025-08-24 20:29:16,806 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=1, Role=assistant, Tokens=59. Kept: Msgs=1, Tokens=25
[DEBUG] 2025-08-24 20:29:16,806 - src.swarm.utils.context_utils:140 -     -> Case 2: Assistant w/ Tools at index 1
[DEBUG] 2025-08-24 20:29:16,806 - src.swarm.utils.context_utils:153 -       Found 2 tools for 2 calls. Pair Cost=103, Pair Len=3.
[DEBUG] 2025-08-24 20:29:16,806 - src.swarm.utils.context_utils:160 -       Budget Check: (CurrentTokens=25 + PairTokens=103 <= TargetTokens=78) -> False
[DEBUG] 2025-08-24 20:29:16,806 - src.swarm.utils.context_utils:161 -       Budget Check: (CurrentMsgs=1 + PairMsgs=3 <= TargetMsgs=9) -> True
[DEBUG] 2025-08-24 20:29:16,806 - src.swarm.utils.context_utils:175 -       Pair doesn't fit or not all tools found.
[DEBUG] 2025-08-24 20:29:16,806 - src.swarm.utils.context_utils:183 -       Cannot keep single assistant 1 either (Tokens fit: False, Msgs fit: True).
[DEBUG] 2025-08-24 20:29:16,806 - src.swarm.utils.context_utils:200 -   [Loop Default Decrement] No action/break for index 1.
[DEBUG] 2025-08-24 20:29:16,806 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=0, Role=user, Tokens=224. Kept: Msgs=1, Tokens=25
[DEBUG] 2025-08-24 20:29:16,806 - src.swarm.utils.context_utils:187 -     -> Case 3: Regular Message at index 0
[INFO] 2025-08-24 20:29:16,806 - src.swarm.utils.context_utils:195 -     -> Action: SKIPPING message 0 (Tokens fit: False, Msgs fit: True). Stopping.
[INFO] 2025-08-24 20:29:16,806 - src.swarm.utils.context_utils:206 - Sophisticated truncation result: 2 msgs (1 sys, 1 non-sys), ~47 tokens.
[INFO] 2025-08-24 20:29:16,806 - src.swarm.utils.context_utils:275 - --- Finished Truncation --- Result Msgs: 2
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,806 - --- Test Passed [PairsMultiCallCutPair] ---
----------------------------------------------------------------------------------------------------------------------------- Captured log call ------------------------------------------------------------------------------------------------------------------------------
INFO     src.swarm.utils.context_utils:context_utils.py:242 --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 100, Max Messages: 10, Input Msgs: 6
INFO     src.swarm.utils.context_utils:context_utils.py:76 Sophisticated truncation. Target: 9 msgs, 78 tokens.
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=4, Role=assistant, Tokens=25. Kept: Msgs=0, Tokens=0
DEBUG    src.swarm.utils.context_utils:context_utils.py:187     -> Case 3: Regular Message at index 4
INFO     src.swarm.utils.context_utils:context_utils.py:191     -> Action: KEEPING SINGLE message 4
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=3, Role=tool, Tokens=22. Kept: Msgs=1, Tokens=25
DEBUG    src.swarm.utils.context_utils:context_utils.py:99     -> Case 1: Tool Msg (ID: call_mc2)
DEBUG    src.swarm.utils.context_utils:context_utils.py:114       Found assistant pair at 1, but it has multiple tool calls (2). Deferring to Case 2.
DEBUG    src.swarm.utils.context_utils:context_utils.py:135     -> Case 1 Result: Pair found but deferred or didn't fit.
DEBUG    src.swarm.utils.context_utils:context_utils.py:200   [Loop Default Decrement] No action/break for index 3.
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=2, Role=tool, Tokens=22. Kept: Msgs=1, Tokens=25
DEBUG    src.swarm.utils.context_utils:context_utils.py:99     -> Case 1: Tool Msg (ID: call_mc1)
DEBUG    src.swarm.utils.context_utils:context_utils.py:114       Found assistant pair at 1, but it has multiple tool calls (2). Deferring to Case 2.
DEBUG    src.swarm.utils.context_utils:context_utils.py:135     -> Case 1 Result: Pair found but deferred or didn't fit.
DEBUG    src.swarm.utils.context_utils:context_utils.py:200   [Loop Default Decrement] No action/break for index 2.
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=1, Role=assistant, Tokens=59. Kept: Msgs=1, Tokens=25
DEBUG    src.swarm.utils.context_utils:context_utils.py:140     -> Case 2: Assistant w/ Tools at index 1
DEBUG    src.swarm.utils.context_utils:context_utils.py:153       Found 2 tools for 2 calls. Pair Cost=103, Pair Len=3.
DEBUG    src.swarm.utils.context_utils:context_utils.py:160       Budget Check: (CurrentTokens=25 + PairTokens=103 <= TargetTokens=78) -> False
DEBUG    src.swarm.utils.context_utils:context_utils.py:161       Budget Check: (CurrentMsgs=1 + PairMsgs=3 <= TargetMsgs=9) -> True
DEBUG    src.swarm.utils.context_utils:context_utils.py:175       Pair doesn't fit or not all tools found.
DEBUG    src.swarm.utils.context_utils:context_utils.py:183       Cannot keep single assistant 1 either (Tokens fit: False, Msgs fit: True).
DEBUG    src.swarm.utils.context_utils:context_utils.py:200   [Loop Default Decrement] No action/break for index 1.
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=0, Role=user, Tokens=224. Kept: Msgs=1, Tokens=25
DEBUG    src.swarm.utils.context_utils:context_utils.py:187     -> Case 3: Regular Message at index 0
INFO     src.swarm.utils.context_utils:context_utils.py:195     -> Action: SKIPPING message 0 (Tokens fit: False, Msgs fit: True). Stopping.
INFO     src.swarm.utils.context_utils:context_utils.py:206 Sophisticated truncation result: 2 msgs (1 sys, 1 non-sys), ~47 tokens.
INFO     src.swarm.utils.context_utils:context_utils.py:275 --- Finished Truncation --- Result Msgs: 2
_____________________________________________________________________________________________________________________ test_pairs_back_to_back_tools_fit ______________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,809 - 
--- Running Truncation Test [PairsB2BFits] (Mode: pairs, MaxTk: 200, MaxMsg: 10) ---
[INFO] 2025-08-24 20:29:16,809 - src.swarm.utils.context_utils:242 - --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 200, Max Messages: 10, Input Msgs: 7
[INFO] 2025-08-24 20:29:16,809 - src.swarm.utils.context_utils:75 - History fits.
[INFO] 2025-08-24 20:29:16,809 - src.swarm.utils.context_utils:275 - --- Finished Truncation --- Result Msgs: 7
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,809 - --- Test Passed [PairsB2BFits] ---
----------------------------------------------------------------------------------------------------------------------------- Captured log call ------------------------------------------------------------------------------------------------------------------------------
INFO     src.swarm.utils.context_utils:context_utils.py:242 --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 200, Max Messages: 10, Input Msgs: 7
INFO     src.swarm.utils.context_utils:context_utils.py:75 History fits.
INFO     src.swarm.utils.context_utils:context_utils.py:275 --- Finished Truncation --- Result Msgs: 7
___________________________________________________________________________________________________________________ test_pairs_back_to_back_tools_cut_user ___________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,812 - 
--- Running Truncation Test [PairsB2BCutUser] (Mode: pairs, MaxTk: 150, MaxMsg: 10) ---
[INFO] 2025-08-24 20:29:16,812 - src.swarm.utils.context_utils:242 - --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 150, Max Messages: 10, Input Msgs: 7
[INFO] 2025-08-24 20:29:16,812 - src.swarm.utils.context_utils:76 - Sophisticated truncation. Target: 9 msgs, 128 tokens.
[DEBUG] 2025-08-24 20:29:16,812 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=5, Role=assistant, Tokens=19. Kept: Msgs=0, Tokens=0
[DEBUG] 2025-08-24 20:29:16,812 - src.swarm.utils.context_utils:187 -     -> Case 3: Regular Message at index 5
[INFO] 2025-08-24 20:29:16,812 - src.swarm.utils.context_utils:191 -     -> Action: KEEPING SINGLE message 5
[DEBUG] 2025-08-24 20:29:16,812 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=4, Role=tool, Tokens=23. Kept: Msgs=1, Tokens=19
[DEBUG] 2025-08-24 20:29:16,812 - src.swarm.utils.context_utils:99 -     -> Case 1: Tool Msg (ID: call_b2b_2)
[DEBUG] 2025-08-24 20:29:16,812 - src.swarm.utils.context_utils:119 -       Found single-call assistant pair at 3. Pair cost=63, Pair msgs=2
[DEBUG] 2025-08-24 20:29:16,812 - src.swarm.utils.context_utils:122 -       Budget Check: (CurrentTokens=19 + PairTokens=63 <= TargetTokens=128) -> True
[DEBUG] 2025-08-24 20:29:16,812 - src.swarm.utils.context_utils:123 -       Budget Check: (CurrentMsgs=1 + PairMsgs=2 <= TargetMsgs=9) -> True
[INFO] 2025-08-24 20:29:16,812 - src.swarm.utils.context_utils:125 -       Action: KEEPING Pair T(idx 4)+A(idx 3)
[DEBUG] 2025-08-24 20:29:16,812 - src.swarm.utils.context_utils:80 -   [Loop Skip] Idx 3 already kept.
[DEBUG] 2025-08-24 20:29:16,813 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=2, Role=tool, Tokens=21. Kept: Msgs=3, Tokens=82
[DEBUG] 2025-08-24 20:29:16,813 - src.swarm.utils.context_utils:99 -     -> Case 1: Tool Msg (ID: call_b2b_1)
[DEBUG] 2025-08-24 20:29:16,813 - src.swarm.utils.context_utils:119 -       Found single-call assistant pair at 1. Pair cost=55, Pair msgs=2
[DEBUG] 2025-08-24 20:29:16,813 - src.swarm.utils.context_utils:122 -       Budget Check: (CurrentTokens=82 + PairTokens=55 <= TargetTokens=128) -> False
[DEBUG] 2025-08-24 20:29:16,813 - src.swarm.utils.context_utils:123 -       Budget Check: (CurrentMsgs=3 + PairMsgs=2 <= TargetMsgs=9) -> True
[DEBUG] 2025-08-24 20:29:16,813 - src.swarm.utils.context_utils:131 -         Pair doesn't fit budget.
[DEBUG] 2025-08-24 20:29:16,813 - src.swarm.utils.context_utils:135 -     -> Case 1 Result: Pair found but deferred or didn't fit.
[DEBUG] 2025-08-24 20:29:16,813 - src.swarm.utils.context_utils:200 -   [Loop Default Decrement] No action/break for index 2.
[DEBUG] 2025-08-24 20:29:16,813 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=1, Role=assistant, Tokens=34. Kept: Msgs=3, Tokens=82
[DEBUG] 2025-08-24 20:29:16,813 - src.swarm.utils.context_utils:140 -     -> Case 2: Assistant w/ Tools at index 1
[DEBUG] 2025-08-24 20:29:16,813 - src.swarm.utils.context_utils:153 -       Found 1 tools for 1 calls. Pair Cost=55, Pair Len=2.
[DEBUG] 2025-08-24 20:29:16,813 - src.swarm.utils.context_utils:160 -       Budget Check: (CurrentTokens=82 + PairTokens=55 <= TargetTokens=128) -> False
[DEBUG] 2025-08-24 20:29:16,813 - src.swarm.utils.context_utils:161 -       Budget Check: (CurrentMsgs=3 + PairMsgs=2 <= TargetMsgs=9) -> True
[DEBUG] 2025-08-24 20:29:16,813 - src.swarm.utils.context_utils:175 -       Pair doesn't fit or not all tools found.
[INFO] 2025-08-24 20:29:16,813 - src.swarm.utils.context_utils:179 -     -> Action: KEEPING SINGLE Assistant 1 (pair failed/incomplete).
[DEBUG] 2025-08-24 20:29:16,813 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=0, Role=user, Tokens=12. Kept: Msgs=4, Tokens=116
[DEBUG] 2025-08-24 20:29:16,813 - src.swarm.utils.context_utils:187 -     -> Case 3: Regular Message at index 0
[INFO] 2025-08-24 20:29:16,813 - src.swarm.utils.context_utils:191 -     -> Action: KEEPING SINGLE message 0
[INFO] 2025-08-24 20:29:16,813 - src.swarm.utils.context_utils:206 - Sophisticated truncation result: 6 msgs (1 sys, 5 non-sys), ~150 tokens.
[INFO] 2025-08-24 20:29:16,813 - src.swarm.utils.context_utils:275 - --- Finished Truncation --- Result Msgs: 6
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,813 - --- Test Passed [PairsB2BCutUser] ---
----------------------------------------------------------------------------------------------------------------------------- Captured log call ------------------------------------------------------------------------------------------------------------------------------
INFO     src.swarm.utils.context_utils:context_utils.py:242 --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 150, Max Messages: 10, Input Msgs: 7
INFO     src.swarm.utils.context_utils:context_utils.py:76 Sophisticated truncation. Target: 9 msgs, 128 tokens.
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=5, Role=assistant, Tokens=19. Kept: Msgs=0, Tokens=0
DEBUG    src.swarm.utils.context_utils:context_utils.py:187     -> Case 3: Regular Message at index 5
INFO     src.swarm.utils.context_utils:context_utils.py:191     -> Action: KEEPING SINGLE message 5
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=4, Role=tool, Tokens=23. Kept: Msgs=1, Tokens=19
DEBUG    src.swarm.utils.context_utils:context_utils.py:99     -> Case 1: Tool Msg (ID: call_b2b_2)
DEBUG    src.swarm.utils.context_utils:context_utils.py:119       Found single-call assistant pair at 3. Pair cost=63, Pair msgs=2
DEBUG    src.swarm.utils.context_utils:context_utils.py:122       Budget Check: (CurrentTokens=19 + PairTokens=63 <= TargetTokens=128) -> True
DEBUG    src.swarm.utils.context_utils:context_utils.py:123       Budget Check: (CurrentMsgs=1 + PairMsgs=2 <= TargetMsgs=9) -> True
INFO     src.swarm.utils.context_utils:context_utils.py:125       Action: KEEPING Pair T(idx 4)+A(idx 3)
DEBUG    src.swarm.utils.context_utils:context_utils.py:80   [Loop Skip] Idx 3 already kept.
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=2, Role=tool, Tokens=21. Kept: Msgs=3, Tokens=82
DEBUG    src.swarm.utils.context_utils:context_utils.py:99     -> Case 1: Tool Msg (ID: call_b2b_1)
DEBUG    src.swarm.utils.context_utils:context_utils.py:119       Found single-call assistant pair at 1. Pair cost=55, Pair msgs=2
DEBUG    src.swarm.utils.context_utils:context_utils.py:122       Budget Check: (CurrentTokens=82 + PairTokens=55 <= TargetTokens=128) -> False
DEBUG    src.swarm.utils.context_utils:context_utils.py:123       Budget Check: (CurrentMsgs=3 + PairMsgs=2 <= TargetMsgs=9) -> True
DEBUG    src.swarm.utils.context_utils:context_utils.py:131         Pair doesn't fit budget.
DEBUG    src.swarm.utils.context_utils:context_utils.py:135     -> Case 1 Result: Pair found but deferred or didn't fit.
DEBUG    src.swarm.utils.context_utils:context_utils.py:200   [Loop Default Decrement] No action/break for index 2.
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=1, Role=assistant, Tokens=34. Kept: Msgs=3, Tokens=82
DEBUG    src.swarm.utils.context_utils:context_utils.py:140     -> Case 2: Assistant w/ Tools at index 1
DEBUG    src.swarm.utils.context_utils:context_utils.py:153       Found 1 tools for 1 calls. Pair Cost=55, Pair Len=2.
DEBUG    src.swarm.utils.context_utils:context_utils.py:160       Budget Check: (CurrentTokens=82 + PairTokens=55 <= TargetTokens=128) -> False
DEBUG    src.swarm.utils.context_utils:context_utils.py:161       Budget Check: (CurrentMsgs=3 + PairMsgs=2 <= TargetMsgs=9) -> True
DEBUG    src.swarm.utils.context_utils:context_utils.py:175       Pair doesn't fit or not all tools found.
INFO     src.swarm.utils.context_utils:context_utils.py:179     -> Action: KEEPING SINGLE Assistant 1 (pair failed/incomplete).
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=0, Role=user, Tokens=12. Kept: Msgs=4, Tokens=116
DEBUG    src.swarm.utils.context_utils:context_utils.py:187     -> Case 3: Regular Message at index 0
INFO     src.swarm.utils.context_utils:context_utils.py:191     -> Action: KEEPING SINGLE message 0
INFO     src.swarm.utils.context_utils:context_utils.py:206 Sophisticated truncation result: 6 msgs (1 sys, 5 non-sys), ~150 tokens.
INFO     src.swarm.utils.context_utils:context_utils.py:275 --- Finished Truncation --- Result Msgs: 6
________________________________________________________________________________________________________________ test_pairs_back_to_back_tools_cut_first_pair ________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,816 - 
--- Running Truncation Test [PairsB2BCutFirstPair] (Mode: pairs, MaxTk: 100, MaxMsg: 10) ---
[INFO] 2025-08-24 20:29:16,816 - src.swarm.utils.context_utils:242 - --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 100, Max Messages: 10, Input Msgs: 7
[INFO] 2025-08-24 20:29:16,816 - src.swarm.utils.context_utils:76 - Sophisticated truncation. Target: 9 msgs, 78 tokens.
[DEBUG] 2025-08-24 20:29:16,816 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=5, Role=assistant, Tokens=19. Kept: Msgs=0, Tokens=0
[DEBUG] 2025-08-24 20:29:16,816 - src.swarm.utils.context_utils:187 -     -> Case 3: Regular Message at index 5
[INFO] 2025-08-24 20:29:16,816 - src.swarm.utils.context_utils:191 -     -> Action: KEEPING SINGLE message 5
[DEBUG] 2025-08-24 20:29:16,816 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=4, Role=tool, Tokens=23. Kept: Msgs=1, Tokens=19
[DEBUG] 2025-08-24 20:29:16,816 - src.swarm.utils.context_utils:99 -     -> Case 1: Tool Msg (ID: call_b2b_2)
[DEBUG] 2025-08-24 20:29:16,816 - src.swarm.utils.context_utils:119 -       Found single-call assistant pair at 3. Pair cost=63, Pair msgs=2
[DEBUG] 2025-08-24 20:29:16,816 - src.swarm.utils.context_utils:122 -       Budget Check: (CurrentTokens=19 + PairTokens=63 <= TargetTokens=78) -> False
[DEBUG] 2025-08-24 20:29:16,816 - src.swarm.utils.context_utils:123 -       Budget Check: (CurrentMsgs=1 + PairMsgs=2 <= TargetMsgs=9) -> True
[DEBUG] 2025-08-24 20:29:16,816 - src.swarm.utils.context_utils:131 -         Pair doesn't fit budget.
[DEBUG] 2025-08-24 20:29:16,816 - src.swarm.utils.context_utils:135 -     -> Case 1 Result: Pair found but deferred or didn't fit.
[DEBUG] 2025-08-24 20:29:16,816 - src.swarm.utils.context_utils:200 -   [Loop Default Decrement] No action/break for index 4.
[DEBUG] 2025-08-24 20:29:16,816 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=3, Role=assistant, Tokens=40. Kept: Msgs=1, Tokens=19
[DEBUG] 2025-08-24 20:29:16,816 - src.swarm.utils.context_utils:140 -     -> Case 2: Assistant w/ Tools at index 3
[DEBUG] 2025-08-24 20:29:16,816 - src.swarm.utils.context_utils:153 -       Found 1 tools for 1 calls. Pair Cost=63, Pair Len=2.
[DEBUG] 2025-08-24 20:29:16,817 - src.swarm.utils.context_utils:160 -       Budget Check: (CurrentTokens=19 + PairTokens=63 <= TargetTokens=78) -> False
[DEBUG] 2025-08-24 20:29:16,817 - src.swarm.utils.context_utils:161 -       Budget Check: (CurrentMsgs=1 + PairMsgs=2 <= TargetMsgs=9) -> True
[DEBUG] 2025-08-24 20:29:16,817 - src.swarm.utils.context_utils:175 -       Pair doesn't fit or not all tools found.
[INFO] 2025-08-24 20:29:16,817 - src.swarm.utils.context_utils:179 -     -> Action: KEEPING SINGLE Assistant 3 (pair failed/incomplete).
[DEBUG] 2025-08-24 20:29:16,817 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=2, Role=tool, Tokens=21. Kept: Msgs=2, Tokens=59
[DEBUG] 2025-08-24 20:29:16,817 - src.swarm.utils.context_utils:99 -     -> Case 1: Tool Msg (ID: call_b2b_1)
[DEBUG] 2025-08-24 20:29:16,817 - src.swarm.utils.context_utils:119 -       Found single-call assistant pair at 1. Pair cost=55, Pair msgs=2
[DEBUG] 2025-08-24 20:29:16,817 - src.swarm.utils.context_utils:122 -       Budget Check: (CurrentTokens=59 + PairTokens=55 <= TargetTokens=78) -> False
[DEBUG] 2025-08-24 20:29:16,817 - src.swarm.utils.context_utils:123 -       Budget Check: (CurrentMsgs=2 + PairMsgs=2 <= TargetMsgs=9) -> True
[DEBUG] 2025-08-24 20:29:16,817 - src.swarm.utils.context_utils:131 -         Pair doesn't fit budget.
[DEBUG] 2025-08-24 20:29:16,817 - src.swarm.utils.context_utils:135 -     -> Case 1 Result: Pair found but deferred or didn't fit.
[DEBUG] 2025-08-24 20:29:16,817 - src.swarm.utils.context_utils:200 -   [Loop Default Decrement] No action/break for index 2.
[DEBUG] 2025-08-24 20:29:16,817 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=1, Role=assistant, Tokens=34. Kept: Msgs=2, Tokens=59
[DEBUG] 2025-08-24 20:29:16,817 - src.swarm.utils.context_utils:140 -     -> Case 2: Assistant w/ Tools at index 1
[DEBUG] 2025-08-24 20:29:16,817 - src.swarm.utils.context_utils:153 -       Found 1 tools for 1 calls. Pair Cost=55, Pair Len=2.
[DEBUG] 2025-08-24 20:29:16,817 - src.swarm.utils.context_utils:160 -       Budget Check: (CurrentTokens=59 + PairTokens=55 <= TargetTokens=78) -> False
[DEBUG] 2025-08-24 20:29:16,817 - src.swarm.utils.context_utils:161 -       Budget Check: (CurrentMsgs=2 + PairMsgs=2 <= TargetMsgs=9) -> True
[DEBUG] 2025-08-24 20:29:16,817 - src.swarm.utils.context_utils:175 -       Pair doesn't fit or not all tools found.
[DEBUG] 2025-08-24 20:29:16,817 - src.swarm.utils.context_utils:183 -       Cannot keep single assistant 1 either (Tokens fit: False, Msgs fit: True).
[DEBUG] 2025-08-24 20:29:16,817 - src.swarm.utils.context_utils:200 -   [Loop Default Decrement] No action/break for index 1.
[DEBUG] 2025-08-24 20:29:16,817 - src.swarm.utils.context_utils:88 -   [Loop Eval] Idx=0, Role=user, Tokens=12. Kept: Msgs=2, Tokens=59
[DEBUG] 2025-08-24 20:29:16,817 - src.swarm.utils.context_utils:187 -     -> Case 3: Regular Message at index 0
[INFO] 2025-08-24 20:29:16,817 - src.swarm.utils.context_utils:191 -     -> Action: KEEPING SINGLE message 0
[INFO] 2025-08-24 20:29:16,817 - src.swarm.utils.context_utils:206 - Sophisticated truncation result: 4 msgs (1 sys, 3 non-sys), ~93 tokens.
[INFO] 2025-08-24 20:29:16,817 - src.swarm.utils.context_utils:275 - --- Finished Truncation --- Result Msgs: 4
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,817 - --- Test Passed [PairsB2BCutFirstPair] ---
----------------------------------------------------------------------------------------------------------------------------- Captured log call ------------------------------------------------------------------------------------------------------------------------------
INFO     src.swarm.utils.context_utils:context_utils.py:242 --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 100, Max Messages: 10, Input Msgs: 7
INFO     src.swarm.utils.context_utils:context_utils.py:76 Sophisticated truncation. Target: 9 msgs, 78 tokens.
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=5, Role=assistant, Tokens=19. Kept: Msgs=0, Tokens=0
DEBUG    src.swarm.utils.context_utils:context_utils.py:187     -> Case 3: Regular Message at index 5
INFO     src.swarm.utils.context_utils:context_utils.py:191     -> Action: KEEPING SINGLE message 5
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=4, Role=tool, Tokens=23. Kept: Msgs=1, Tokens=19
DEBUG    src.swarm.utils.context_utils:context_utils.py:99     -> Case 1: Tool Msg (ID: call_b2b_2)
DEBUG    src.swarm.utils.context_utils:context_utils.py:119       Found single-call assistant pair at 3. Pair cost=63, Pair msgs=2
DEBUG    src.swarm.utils.context_utils:context_utils.py:122       Budget Check: (CurrentTokens=19 + PairTokens=63 <= TargetTokens=78) -> False
DEBUG    src.swarm.utils.context_utils:context_utils.py:123       Budget Check: (CurrentMsgs=1 + PairMsgs=2 <= TargetMsgs=9) -> True
DEBUG    src.swarm.utils.context_utils:context_utils.py:131         Pair doesn't fit budget.
DEBUG    src.swarm.utils.context_utils:context_utils.py:135     -> Case 1 Result: Pair found but deferred or didn't fit.
DEBUG    src.swarm.utils.context_utils:context_utils.py:200   [Loop Default Decrement] No action/break for index 4.
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=3, Role=assistant, Tokens=40. Kept: Msgs=1, Tokens=19
DEBUG    src.swarm.utils.context_utils:context_utils.py:140     -> Case 2: Assistant w/ Tools at index 3
DEBUG    src.swarm.utils.context_utils:context_utils.py:153       Found 1 tools for 1 calls. Pair Cost=63, Pair Len=2.
DEBUG    src.swarm.utils.context_utils:context_utils.py:160       Budget Check: (CurrentTokens=19 + PairTokens=63 <= TargetTokens=78) -> False
DEBUG    src.swarm.utils.context_utils:context_utils.py:161       Budget Check: (CurrentMsgs=1 + PairMsgs=2 <= TargetMsgs=9) -> True
DEBUG    src.swarm.utils.context_utils:context_utils.py:175       Pair doesn't fit or not all tools found.
INFO     src.swarm.utils.context_utils:context_utils.py:179     -> Action: KEEPING SINGLE Assistant 3 (pair failed/incomplete).
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=2, Role=tool, Tokens=21. Kept: Msgs=2, Tokens=59
DEBUG    src.swarm.utils.context_utils:context_utils.py:99     -> Case 1: Tool Msg (ID: call_b2b_1)
DEBUG    src.swarm.utils.context_utils:context_utils.py:119       Found single-call assistant pair at 1. Pair cost=55, Pair msgs=2
DEBUG    src.swarm.utils.context_utils:context_utils.py:122       Budget Check: (CurrentTokens=59 + PairTokens=55 <= TargetTokens=78) -> False
DEBUG    src.swarm.utils.context_utils:context_utils.py:123       Budget Check: (CurrentMsgs=2 + PairMsgs=2 <= TargetMsgs=9) -> True
DEBUG    src.swarm.utils.context_utils:context_utils.py:131         Pair doesn't fit budget.
DEBUG    src.swarm.utils.context_utils:context_utils.py:135     -> Case 1 Result: Pair found but deferred or didn't fit.
DEBUG    src.swarm.utils.context_utils:context_utils.py:200   [Loop Default Decrement] No action/break for index 2.
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=1, Role=assistant, Tokens=34. Kept: Msgs=2, Tokens=59
DEBUG    src.swarm.utils.context_utils:context_utils.py:140     -> Case 2: Assistant w/ Tools at index 1
DEBUG    src.swarm.utils.context_utils:context_utils.py:153       Found 1 tools for 1 calls. Pair Cost=55, Pair Len=2.
DEBUG    src.swarm.utils.context_utils:context_utils.py:160       Budget Check: (CurrentTokens=59 + PairTokens=55 <= TargetTokens=78) -> False
DEBUG    src.swarm.utils.context_utils:context_utils.py:161       Budget Check: (CurrentMsgs=2 + PairMsgs=2 <= TargetMsgs=9) -> True
DEBUG    src.swarm.utils.context_utils:context_utils.py:175       Pair doesn't fit or not all tools found.
DEBUG    src.swarm.utils.context_utils:context_utils.py:183       Cannot keep single assistant 1 either (Tokens fit: False, Msgs fit: True).
DEBUG    src.swarm.utils.context_utils:context_utils.py:200   [Loop Default Decrement] No action/break for index 1.
DEBUG    src.swarm.utils.context_utils:context_utils.py:88   [Loop Eval] Idx=0, Role=user, Tokens=12. Kept: Msgs=2, Tokens=59
DEBUG    src.swarm.utils.context_utils:context_utils.py:187     -> Case 3: Regular Message at index 0
INFO     src.swarm.utils.context_utils:context_utils.py:191     -> Action: KEEPING SINGLE message 0
INFO     src.swarm.utils.context_utils:context_utils.py:206 Sophisticated truncation result: 4 msgs (1 sys, 3 non-sys), ~93 tokens.
INFO     src.swarm.utils.context_utils:context_utils.py:275 --- Finished Truncation --- Result Msgs: 4
________________________________________________________________________________________________________________________ test_pairs_empty_input_list _________________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,820 - 
--- Running Truncation Test [RobustEmpty] (Mode: pairs, MaxTk: 100, MaxMsg: 10) ---
[DEBUG] 2025-08-24 20:29:16,820 - src.swarm.utils.context_utils:239 - Truncate called with empty/invalid list.
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,820 - --- Test Passed [RobustEmpty] ---
----------------------------------------------------------------------------------------------------------------------------- Captured log call ------------------------------------------------------------------------------------------------------------------------------
DEBUG    src.swarm.utils.context_utils:context_utils.py:239 Truncate called with empty/invalid list.
_______________________________________________________________________________________________________________________ test_pairs_only_system_message _______________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,823 - 
--- Running Truncation Test [RobustSysOnly] (Mode: pairs, MaxTk: 100, MaxMsg: 10) ---
[INFO] 2025-08-24 20:29:16,823 - src.swarm.utils.context_utils:242 - --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 100, Max Messages: 10, Input Msgs: 1
[INFO] 2025-08-24 20:29:16,823 - src.swarm.utils.context_utils:71 - No valid non-system msgs.
[INFO] 2025-08-24 20:29:16,823 - src.swarm.utils.context_utils:275 - --- Finished Truncation --- Result Msgs: 1
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,823 - --- Test Passed [RobustSysOnly] ---
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,823 - 
--- Running Truncation Test [RobustSysOnlyExceeds] (Mode: pairs, MaxTk: 10, MaxMsg: 10) ---
[INFO] 2025-08-24 20:29:16,823 - src.swarm.utils.context_utils:242 - --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 10, Max Messages: 10, Input Msgs: 1
[WARNING] 2025-08-24 20:29:16,823 - src.swarm.utils.context_utils:70 - System msgs exceed limits.
[WARNING] 2025-08-24 20:29:16,823 - src.swarm.utils.context_utils:270 - Truncation empty list, likely due to system message exceeding limits.
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,823 - --- Test Passed [RobustSysOnlyExceeds] ---
----------------------------------------------------------------------------------------------------------------------------- Captured log call ------------------------------------------------------------------------------------------------------------------------------
INFO     src.swarm.utils.context_utils:context_utils.py:242 --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 100, Max Messages: 10, Input Msgs: 1
INFO     src.swarm.utils.context_utils:context_utils.py:71 No valid non-system msgs.
INFO     src.swarm.utils.context_utils:context_utils.py:275 --- Finished Truncation --- Result Msgs: 1
INFO     src.swarm.utils.context_utils:context_utils.py:242 --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 10, Max Messages: 10, Input Msgs: 1
WARNING  src.swarm.utils.context_utils:context_utils.py:70 System msgs exceed limits.
WARNING  src.swarm.utils.context_utils:context_utils.py:270 Truncation empty list, likely due to system message exceeding limits.
____________________________________________________________________________________________________________________ test_pairs_invalid_messages_mixed_in ____________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,826 - 
--- Running Truncation Test [RobustInvalidSimple] (Mode: simple, MaxTk: 1000, MaxMsg: 4) ---
[INFO] 2025-08-24 20:29:16,826 - src.swarm.utils.context_utils:242 - --- Starting Truncation --- Mode: Simple (Recent Only), Max Tokens: 1000, Max Messages: 4, Input Msgs: 7
[WARNING] 2025-08-24 20:29:16,826 - src.swarm.utils.context_utils:24 - Skipping msg missing role: {'content': 'No role here'}
[INFO] 2025-08-24 20:29:16,826 - src.swarm.utils.context_utils:214 - Simple Mode: Filtered 2 invalid msgs.
[INFO] 2025-08-24 20:29:16,826 - src.swarm.utils.context_utils:233 - Simple truncation result: 4 messages (1 sys), ~99 tokens.
[WARNING] 2025-08-24 20:29:16,826 - src.swarm.utils.context_utils:24 - Skipping msg missing role: {'content': 'No role here'}
[INFO] 2025-08-24 20:29:16,826 - src.swarm.utils.context_utils:275 - --- Finished Truncation --- Result Msgs: 4
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,826 - --- Test Passed [RobustInvalidSimple] ---
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,826 - 
--- Running Truncation Test [RobustInvalidPairs] (Mode: pairs, MaxTk: 1000, MaxMsg: 10) ---
[INFO] 2025-08-24 20:29:16,827 - src.swarm.utils.context_utils:242 - --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 1000, Max Messages: 10, Input Msgs: 7
[WARNING] 2025-08-24 20:29:16,827 - src.swarm.utils.context_utils:24 - Skipping msg missing role: {'content': 'No role here'}
[INFO] 2025-08-24 20:29:16,827 - src.swarm.utils.context_utils:63 - Filtered 2 invalid msgs.
[INFO] 2025-08-24 20:29:16,827 - src.swarm.utils.context_utils:75 - History fits.
[WARNING] 2025-08-24 20:29:16,827 - src.swarm.utils.context_utils:24 - Skipping msg missing role: {'content': 'No role here'}
[INFO] 2025-08-24 20:29:16,827 - src.swarm.utils.context_utils:275 - --- Finished Truncation --- Result Msgs: 5
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,827 - --- Test Passed [RobustInvalidPairs] ---
----------------------------------------------------------------------------------------------------------------------------- Captured log call ------------------------------------------------------------------------------------------------------------------------------
INFO     src.swarm.utils.context_utils:context_utils.py:242 --- Starting Truncation --- Mode: Simple (Recent Only), Max Tokens: 1000, Max Messages: 4, Input Msgs: 7
WARNING  src.swarm.utils.context_utils:context_utils.py:24 Skipping msg missing role: {'content': 'No role here'}
INFO     src.swarm.utils.context_utils:context_utils.py:214 Simple Mode: Filtered 2 invalid msgs.
INFO     src.swarm.utils.context_utils:context_utils.py:233 Simple truncation result: 4 messages (1 sys), ~99 tokens.
WARNING  src.swarm.utils.context_utils:context_utils.py:24 Skipping msg missing role: {'content': 'No role here'}
INFO     src.swarm.utils.context_utils:context_utils.py:275 --- Finished Truncation --- Result Msgs: 4
INFO     src.swarm.utils.context_utils:context_utils.py:242 --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 1000, Max Messages: 10, Input Msgs: 7
WARNING  src.swarm.utils.context_utils:context_utils.py:24 Skipping msg missing role: {'content': 'No role here'}
INFO     src.swarm.utils.context_utils:context_utils.py:63 Filtered 2 invalid msgs.
INFO     src.swarm.utils.context_utils:context_utils.py:75 History fits.
WARNING  src.swarm.utils.context_utils:context_utils.py:24 Skipping msg missing role: {'content': 'No role here'}
INFO     src.swarm.utils.context_utils:context_utils.py:275 --- Finished Truncation --- Result Msgs: 5
_________________________________________________________________________________________________________________ test_simple_truncation_fallback_simulation _________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,830 - 
--- Running Truncation Test [RobustFallback] (Mode: pairs, MaxTk: 80, MaxMsg: 10) ---
[INFO] 2025-08-24 20:29:16,831 - src.swarm.utils.context_utils:242 - --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 80, Max Messages: 10, Input Msgs: 5
[ERROR] 2025-08-24 20:29:16,831 - src.swarm.utils.context_utils:250 - !!! Critical error during primary truncation (Sophisticated (Pair-Preserving)): Simulated error in sophisticated truncation
Traceback (most recent call last):
  File "/mnt/models/open-swarm-mcp/src/swarm/utils/context_utils.py", line 245, in truncate_message_history
    if truncation_mode == "pairs": result = _truncate_sophisticated(messages, model, max_tokens, max_messages)
  File "/mnt/models/open-swarm-mcp/tests/test_truncate_message_history.py", line 197, in broken_sophisticated
    def broken_sophisticated(*args, **kwargs): raise ValueError("Simulated error in sophisticated truncation")
ValueError: Simulated error in sophisticated truncation
[WARNING] 2025-08-24 20:29:16,831 - src.swarm.utils.context_utils:252 - Attempting fallback to simple truncation.
[INFO] 2025-08-24 20:29:16,831 - src.swarm.utils.context_utils:233 - Simple truncation result: 3 messages (1 sys), ~66 tokens.
[INFO] 2025-08-24 20:29:16,831 - src.swarm.utils.context_utils:275 - --- Finished Truncation --- Result Msgs: 3
[INFO] TEST_TRUNC_CORE - 2025-08-24 20:29:16,831 - --- Test Passed [RobustFallback] ---
----------------------------------------------------------------------------------------------------------------------------- Captured log call ------------------------------------------------------------------------------------------------------------------------------
INFO     src.swarm.utils.context_utils:context_utils.py:242 --- Starting Truncation --- Mode: Sophisticated (Pair-Preserving), Max Tokens: 80, Max Messages: 10, Input Msgs: 5
ERROR    src.swarm.utils.context_utils:context_utils.py:250 !!! Critical error during primary truncation (Sophisticated (Pair-Preserving)): Simulated error in sophisticated truncation
Traceback (most recent call last):
  File "/mnt/models/open-swarm-mcp/src/swarm/utils/context_utils.py", line 245, in truncate_message_history
    if truncation_mode == "pairs": result = _truncate_sophisticated(messages, model, max_tokens, max_messages)
  File "/mnt/models/open-swarm-mcp/tests/test_truncate_message_history.py", line 197, in broken_sophisticated
    def broken_sophisticated(*args, **kwargs): raise ValueError("Simulated error in sophisticated truncation")
ValueError: Simulated error in sophisticated truncation
WARNING  src.swarm.utils.context_utils:context_utils.py:252 Attempting fallback to simple truncation.
INFO     src.swarm.utils.context_utils:context_utils.py:233 Simple truncation result: 3 messages (1 sys), ~66 tokens.
INFO     src.swarm.utils.context_utils:context_utils.py:275 --- Finished Truncation --- Result Msgs: 3
__________________________________________________________________________________________________________ TestBlueprintBaseConfigLoading.test_init_does_not_raise ___________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[DEBUG] 2025-08-24 20:29:16,840 - swarm.core.blueprint_base:439 - [DEBUG _resolve_llm_profile] blueprint_id/name: test_init
[DEBUG] 2025-08-24 20:29:16,840 - swarm.core.blueprint_base:440 - [DEBUG _resolve_llm_profile] self._config: {'llm': {'default': {'provider': 'mock'}}, 'settings': {'default_markdown_output': True, 'default_llm_profile': 'default'}, 'blueprints': {}}
[DEBUG] 2025-08-24 20:29:16,840 - swarm.core.blueprint_base:489 - [DEBUG _resolve_llm_profile] Final resolved profile: default
____________________________________________________________________________________________________ TestBlueprintBaseConfigLoading.test_llm_profile_resolution_priority _____________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[DEBUG] 2025-08-24 20:29:16,846 - swarm.core.blueprint_base:439 - [DEBUG _resolve_llm_profile] blueprint_id/name: bp
[DEBUG] 2025-08-24 20:29:16,846 - swarm.core.blueprint_base:440 - [DEBUG _resolve_llm_profile] self._config: {'llm': {'foo': {'provider': 'mock'}}, 'settings': {'default_llm': 'foo'}, 'blueprints': {'bp': {'llm_profile': 'foo'}}}
[DEBUG] 2025-08-24 20:29:16,846 - swarm.core.blueprint_base:443 - [DEBUG _resolve_llm_profile] Using programmatic override: foo
[DEBUG] 2025-08-24 20:29:16,846 - swarm.core.blueprint_base:489 - [DEBUG _resolve_llm_profile] Final resolved profile: foo
[DEBUG] 2025-08-24 20:29:16,846 - swarm.core.blueprint_base:439 - [DEBUG _resolve_llm_profile] blueprint_id/name: bp2
[DEBUG] 2025-08-24 20:29:16,846 - swarm.core.blueprint_base:440 - [DEBUG _resolve_llm_profile] self._config: {'llm': {'bar': {'provider': 'mock'}}, 'settings': {'default_llm': 'bar'}, 'blueprints': {'bp2': {'llm_profile': 'bar'}}}
[DEBUG] 2025-08-24 20:29:16,846 - swarm.core.blueprint_base:451 - [DEBUG _resolve_llm_profile] Checking per-blueprint config for: bp2
[DEBUG] 2025-08-24 20:29:16,847 - swarm.core.blueprint_base:453 - [DEBUG _resolve_llm_profile] bp_cfg: {'llm_profile': 'bar'}
[DEBUG] 2025-08-24 20:29:16,847 - swarm.core.blueprint_base:455 - [DEBUG _resolve_llm_profile] Using per-blueprint llm_profile: bar
[DEBUG] 2025-08-24 20:29:16,847 - swarm.core.blueprint_base:489 - [DEBUG _resolve_llm_profile] Final resolved profile: bar
[DEBUG] 2025-08-24 20:29:16,847 - swarm.core.blueprint_base:439 - [DEBUG _resolve_llm_profile] blueprint_id/name: bp3
[DEBUG] 2025-08-24 20:29:16,847 - swarm.core.blueprint_base:440 - [DEBUG _resolve_llm_profile] self._config: {'llm': {'baz': {'provider': 'mock'}}, 'settings': {'default_llm': 'baz'}, 'blueprints': {}}
[DEBUG] 2025-08-24 20:29:16,847 - swarm.core.blueprint_base:489 - [DEBUG _resolve_llm_profile] Final resolved profile: baz
[DEBUG] 2025-08-24 20:29:16,847 - swarm.core.blueprint_base:439 - [DEBUG _resolve_llm_profile] blueprint_id/name: bp4
[DEBUG] 2025-08-24 20:29:16,847 - swarm.core.blueprint_base:440 - [DEBUG _resolve_llm_profile] self._config: {'llm': {'env_model': {'provider': 'mock'}}, 'settings': {}, 'blueprints': {}}
[DEBUG] 2025-08-24 20:29:16,847 - swarm.core.blueprint_base:489 - [DEBUG _resolve_llm_profile] Final resolved profile: env_model
[DEBUG] 2025-08-24 20:29:16,847 - swarm.core.blueprint_base:439 - [DEBUG _resolve_llm_profile] blueprint_id/name: bp5
[DEBUG] 2025-08-24 20:29:16,847 - swarm.core.blueprint_base:440 - [DEBUG _resolve_llm_profile] self._config: {'llm': {'default': {'provider': 'mock'}}, 'settings': {}, 'blueprints': {}}
[DEBUG] 2025-08-24 20:29:16,847 - swarm.core.blueprint_base:489 - [DEBUG _resolve_llm_profile] Final resolved profile: default
_______________________________________________________________________________________________________ TestBlueprintBaseConfigLoading.test_missing_llm_profile_raises _______________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[DEBUG] 2025-08-24 20:29:16,850 - swarm.core.blueprint_base:439 - [DEBUG _resolve_llm_profile] blueprint_id/name: bp
[DEBUG] 2025-08-24 20:29:16,851 - swarm.core.blueprint_base:440 - [DEBUG _resolve_llm_profile] self._config: {'llm': {}, 'settings': {}, 'blueprints': {}}
[DEBUG] 2025-08-24 20:29:16,851 - swarm.core.blueprint_base:489 - [DEBUG _resolve_llm_profile] Final resolved profile: default
___________________________________________________________________________________________________________________ test_pretty_print_response_plain_text ____________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
DEBUG_PPRINT: Entered pretty_print_response. RICH_AVAILABLE=True, use_markdown=False
DEBUG_PPRINT: _console type: <class 'test_output_utils.test_pretty_print_response_plain_text.<locals>.DummyConsole'>
DEBUG_PPRINT: Processing message 1/1: Assistant
DEBUG_PPRINT: Content for message 1: 'Hello world'
DEBUG_PPRINT: Regex match for message 1: None
DEBUG_PPRINT: Message 1 - Plain text printing.
_________________________________________________________________________________________________________________ test_pretty_print_response_with_code_fence _________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
DEBUG_PPRINT: Entered pretty_print_response. RICH_AVAILABLE=True, use_markdown=False
DEBUG_PPRINT: _console type: <class 'test_output_utils.test_pretty_print_response_with_code_fence.<locals>.DummyConsole'>
DEBUG_PPRINT: Processing message 1/1: Assistant
DEBUG_PPRINT: Content for message 1: '```python\nprint("hello")\n```'
DEBUG_PPRINT: Regex match for message 1: <re.Match object; span=(0, 28), match='```python\nprint("hello")\n```'>
DEBUG_PPRINT: Message 1 - Code block matched!
DEBUG_PPRINT: Message 1 - Printing prefix only.
DEBUG_PPRINT: Message 1 - Printing Syntax object: lang='python', code=''print("hello")''
________________________________________________________________________________________________________________________ test_spinner_runs_and_stops _________________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stdout call ----------------------------------------------------------------------------------------------------------------------------
Running.Running..Running...Running... Taking longer than expected                                                                                
___________________________________________________________________________________________________________________________ test_spinner_long_wait ___________________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stdout call ----------------------------------------------------------------------------------------------------------------------------
Generating.Generating..Generating... Taking longer than expected                                                                                
_______________________________________________________________________________________________________________ TestSettingsManager.test_collect_all_settings ________________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[DEBUG] 2025-08-24 20:29:20,709 - swarm.extensions.config.config_loader:35 - Found config XDG: /home/chatgpt/.config/swarm/swarm_config.json
[DEBUG] 2025-08-24 20:29:20,709 - swarm.extensions.config.config_loader:83 - Loading config from /home/chatgpt/.config/swarm/swarm_config.json
[INFO] 2025-08-24 20:29:20,709 - swarm.extensions.config.config_loader:87 - Loaded config from /home/chatgpt/.config/swarm/swarm_config.json
[DEBUG] 2025-08-24 20:29:20,709 - swarm.extensions.config.config_loader:120 - Validating config structure...
[DEBUG] 2025-08-24 20:29:20,709 - swarm.extensions.config.config_loader:130 - Config basic structure OK.
[DEBUG] 2025-08-24 20:29:20,710 - swarm.extensions.config.config_loader:35 - Found config XDG: /home/chatgpt/.config/swarm/swarm_config.json
[DEBUG] 2025-08-24 20:29:20,710 - swarm.extensions.config.config_loader:83 - Loading config from /home/chatgpt/.config/swarm/swarm_config.json
[INFO] 2025-08-24 20:29:20,710 - swarm.extensions.config.config_loader:87 - Loaded config from /home/chatgpt/.config/swarm/swarm_config.json
[DEBUG] 2025-08-24 20:29:20,710 - swarm.extensions.config.config_loader:120 - Validating config structure...
[DEBUG] 2025-08-24 20:29:20,710 - swarm.extensions.config.config_loader:130 - Config basic structure OK.
[DEBUG] 2025-08-24 20:29:20,710 - swarm.extensions.config.config_loader:35 - Found config XDG: /home/chatgpt/.config/swarm/swarm_config.json
[DEBUG] 2025-08-24 20:29:20,710 - swarm.extensions.config.config_loader:83 - Loading config from /home/chatgpt/.config/swarm/swarm_config.json
[INFO] 2025-08-24 20:29:20,710 - swarm.extensions.config.config_loader:87 - Loaded config from /home/chatgpt/.config/swarm/swarm_config.json
[DEBUG] 2025-08-24 20:29:20,710 - swarm.extensions.config.config_loader:120 - Validating config structure...
[DEBUG] 2025-08-24 20:29:20,710 - swarm.extensions.config.config_loader:130 - Config basic structure OK.
_______________________________________________________________________________________________________ TestSettingsIntegration.test_full_settings_collection_workflow _______________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[INFO] 2025-08-24 20:29:24,278 - swarm.utils.comfyui_client:25 - ComfyUI is disabled. Avatar generation will not be available.
[DEBUG] 2025-08-24 20:29:24,279 - swarm.extensions.config.config_loader:35 - Found config XDG: /home/chatgpt/.config/swarm/swarm_config.json
[DEBUG] 2025-08-24 20:29:24,280 - swarm.extensions.config.config_loader:83 - Loading config from /home/chatgpt/.config/swarm/swarm_config.json
[INFO] 2025-08-24 20:29:24,280 - swarm.extensions.config.config_loader:87 - Loaded config from /home/chatgpt/.config/swarm/swarm_config.json
[DEBUG] 2025-08-24 20:29:24,280 - swarm.extensions.config.config_loader:120 - Validating config structure...
[DEBUG] 2025-08-24 20:29:24,280 - swarm.extensions.config.config_loader:130 - Config basic structure OK.
[DEBUG] 2025-08-24 20:29:24,280 - swarm.extensions.config.config_loader:35 - Found config XDG: /home/chatgpt/.config/swarm/swarm_config.json
[DEBUG] 2025-08-24 20:29:24,280 - swarm.extensions.config.config_loader:83 - Loading config from /home/chatgpt/.config/swarm/swarm_config.json
[INFO] 2025-08-24 20:29:24,280 - swarm.extensions.config.config_loader:87 - Loaded config from /home/chatgpt/.config/swarm/swarm_config.json
[DEBUG] 2025-08-24 20:29:24,280 - swarm.extensions.config.config_loader:120 - Validating config structure...
[DEBUG] 2025-08-24 20:29:24,280 - swarm.extensions.config.config_loader:130 - Config basic structure OK.
[DEBUG] 2025-08-24 20:29:24,280 - swarm.extensions.config.config_loader:35 - Found config XDG: /home/chatgpt/.config/swarm/swarm_config.json
[DEBUG] 2025-08-24 20:29:24,280 - swarm.extensions.config.config_loader:83 - Loading config from /home/chatgpt/.config/swarm/swarm_config.json
[INFO] 2025-08-24 20:29:24,281 - swarm.extensions.config.config_loader:87 - Loaded config from /home/chatgpt/.config/swarm/swarm_config.json
[DEBUG] 2025-08-24 20:29:24,281 - swarm.extensions.config.config_loader:120 - Validating config structure...
[DEBUG] 2025-08-24 20:29:24,281 - swarm.extensions.config.config_loader:130 - Config basic structure OK.
[DEBUG] 2025-08-24 20:29:24,298 - swarm.extensions.config.config_loader:35 - Found config XDG: /home/chatgpt/.config/swarm/swarm_config.json
[DEBUG] 2025-08-24 20:29:24,298 - swarm.extensions.config.config_loader:83 - Loading config from /home/chatgpt/.config/swarm/swarm_config.json
[INFO] 2025-08-24 20:29:24,299 - swarm.extensions.config.config_loader:87 - Loaded config from /home/chatgpt/.config/swarm/swarm_config.json
[DEBUG] 2025-08-24 20:29:24,299 - swarm.extensions.config.config_loader:120 - Validating config structure...
[DEBUG] 2025-08-24 20:29:24,299 - swarm.extensions.config.config_loader:130 - Config basic structure OK.
[DEBUG] 2025-08-24 20:29:24,299 - swarm.extensions.config.config_loader:35 - Found config XDG: /home/chatgpt/.config/swarm/swarm_config.json
[DEBUG] 2025-08-24 20:29:24,299 - swarm.extensions.config.config_loader:83 - Loading config from /home/chatgpt/.config/swarm/swarm_config.json
[INFO] 2025-08-24 20:29:24,299 - swarm.extensions.config.config_loader:87 - Loaded config from /home/chatgpt/.config/swarm/swarm_config.json
[DEBUG] 2025-08-24 20:29:24,299 - swarm.extensions.config.config_loader:120 - Validating config structure...
[DEBUG] 2025-08-24 20:29:24,299 - swarm.extensions.config.config_loader:130 - Config basic structure OK.
[DEBUG] 2025-08-24 20:29:24,299 - swarm.extensions.config.config_loader:35 - Found config XDG: /home/chatgpt/.config/swarm/swarm_config.json
[DEBUG] 2025-08-24 20:29:24,299 - swarm.extensions.config.config_loader:83 - Loading config from /home/chatgpt/.config/swarm/swarm_config.json
[INFO] 2025-08-24 20:29:24,299 - swarm.extensions.config.config_loader:87 - Loaded config from /home/chatgpt/.config/swarm/swarm_config.json
[DEBUG] 2025-08-24 20:29:24,299 - swarm.extensions.config.config_loader:120 - Validating config structure...
[DEBUG] 2025-08-24 20:29:24,299 - swarm.extensions.config.config_loader:130 - Config basic structure OK.
_________________________________________________________________________________________________________ test_models_and_blueprints_endpoints_include_dynamic_team __________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stdout call ----------------------------------------------------------------------------------------------------------------------------
# Last swarm update: 2025-08-24T20:29:29Z (UTC)
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[DEBUG] 2025-08-24 20:29:29,480 - swarm.auth:40 - [Auth][StaticToken] Attempting static token authentication.
[ERROR] 2025-08-24 20:29:29,480 - swarm.auth:46 - [Auth][StaticToken] SWARM_API_KEY is not set in Django settings. Cannot use static token auth.
[INFO] 2025-08-24 20:29:29,480 - swarm.views.utils:99 - Discovering blueprint classes (sync)...
[INFO] 2025-08-24 20:29:29,481 - swarm.core.blueprint_discovery:61 - Starting blueprint discovery in directory: /mnt/models/open-swarm-mcp/src/swarm/blueprints
[DEBUG] 2025-08-24 20:29:29,481 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'chucks_angels' in directory: chucks_angels
[DEBUG] 2025-08-24 20:29:29,481 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_chucks_angels.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/chucks_angels
[DEBUG] 2025-08-24 20:29:29,481 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.chucks_angels.blueprint_chucks_angels
[DEBUG] 2025-08-24 20:29:29,481 - swarm.core.blueprint_discovery:138 - Found Blueprint class 'ChucksAngelsBlueprint' in module 'swarm.blueprints.chucks_angels.blueprint_chucks_angels'
[DEBUG] 2025-08-24 20:29:29,481 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'whiskeytango_foxtrot' in directory: whiskeytango_foxtrot
[DEBUG] 2025-08-24 20:29:29,481 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_whiskeytango_foxtrot.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/whiskeytango_foxtrot
[DEBUG] 2025-08-24 20:29:29,485 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.whiskeytango_foxtrot.blueprint_whiskeytango_foxtrot
[WARNING] 2025-08-24 20:29:29,486 - swarm.core.blueprint_discovery:172 - No BlueprintBase subclass found directly defined in module: swarm.blueprints.whiskeytango_foxtrot.blueprint_whiskeytango_foxtrot
[DEBUG] 2025-08-24 20:29:29,486 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'nebula_shellz' in directory: nebula_shellz
[DEBUG] 2025-08-24 20:29:29,486 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_nebula_shellz.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/nebula_shellz
[DEBUG] 2025-08-24 20:29:29,492 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.nebula_shellz.blueprint_nebula_shellz
[DEBUG] 2025-08-24 20:29:29,492 - swarm.core.blueprint_discovery:138 - Found Blueprint class 'NebuchaShellzzarBlueprint' in module 'swarm.blueprints.nebula_shellz.blueprint_nebula_shellz'
[DEBUG] 2025-08-24 20:29:29,492 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'family_ties' in directory: family_ties
[DEBUG] 2025-08-24 20:29:29,492 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_family_ties.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/family_ties
[DEBUG] 2025-08-24 20:29:29,493 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.family_ties.blueprint_family_ties
[WARNING] 2025-08-24 20:29:29,493 - swarm.core.blueprint_discovery:172 - No BlueprintBase subclass found directly defined in module: swarm.blueprints.family_ties.blueprint_family_ties
[DEBUG] 2025-08-24 20:29:29,493 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'common' in directory: common
[WARNING] 2025-08-24 20:29:29,493 - swarm.core.blueprint_discovery:90 - Skipping directory 'common': No suitable main Python file ('common.py' or 'blueprint_common.py') found.
[DEBUG] 2025-08-24 20:29:29,493 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'whinge_surf' in directory: whinge_surf
[DEBUG] 2025-08-24 20:29:29,493 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_whinge_surf.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/whinge_surf
[DEBUG] 2025-08-24 20:29:29,493 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.whinge_surf.blueprint_whinge_surf
[DEBUG] 2025-08-24 20:29:29,493 - swarm.core.blueprint_discovery:138 - Found Blueprint class 'WhingeSurfBlueprint' in module 'swarm.blueprints.whinge_surf.blueprint_whinge_surf'
[DEBUG] 2025-08-24 20:29:29,494 - swarm.core.blueprint_discovery:153 - Using class docstring for description of 'WhingeSurfBlueprint'.
[DEBUG] 2025-08-24 20:29:29,494 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'dynamic_team' in directory: dynamic_team
[DEBUG] 2025-08-24 20:29:29,494 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_dynamic_team.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/dynamic_team
[DEBUG] 2025-08-24 20:29:29,494 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.dynamic_team.blueprint_dynamic_team
[DEBUG] 2025-08-24 20:29:29,494 - swarm.core.blueprint_discovery:138 - Found Blueprint class 'DynamicTeamBlueprint' in module 'swarm.blueprints.dynamic_team.blueprint_dynamic_team'
[DEBUG] 2025-08-24 20:29:29,494 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'rue_code' in directory: rue_code
[DEBUG] 2025-08-24 20:29:29,494 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_rue_code.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/rue_code
[DEBUG] 2025-08-24 20:29:29,494 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.rue_code.blueprint_rue_code
[DEBUG] 2025-08-24 20:29:29,495 - swarm.core.blueprint_discovery:138 - Found Blueprint class 'RueCodeBlueprint' in module 'swarm.blueprints.rue_code.blueprint_rue_code'
[DEBUG] 2025-08-24 20:29:29,495 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'messenger' in directory: messenger
[WARNING] 2025-08-24 20:29:29,495 - swarm.core.blueprint_discovery:90 - Skipping directory 'messenger': No suitable main Python file ('messenger.py' or 'blueprint_messenger.py') found.
[DEBUG] 2025-08-24 20:29:29,495 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'unapologetic_poets' in directory: unapologetic_poets
[WARNING] 2025-08-24 20:29:29,495 - swarm.core.blueprint_discovery:90 - Skipping directory 'unapologetic_poets': No suitable main Python file ('unapologetic_poets.py' or 'blueprint_unapologetic_poets.py') found.
[DEBUG] 2025-08-24 20:29:29,495 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'omniplex' in directory: omniplex
[DEBUG] 2025-08-24 20:29:29,495 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_omniplex.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/omniplex
[DEBUG] 2025-08-24 20:29:29,495 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.omniplex.blueprint_omniplex
[DEBUG] 2025-08-24 20:29:29,495 - swarm.core.blueprint_discovery:138 - Found Blueprint class 'OmniplexBlueprint' in module 'swarm.blueprints.omniplex.blueprint_omniplex'
[DEBUG] 2025-08-24 20:29:29,495 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'gawd' in directory: gawd
[DEBUG] 2025-08-24 20:29:29,496 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_gawd.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/gawd
[DEBUG] 2025-08-24 20:29:29,496 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.gawd.blueprint_gawd
[DEBUG] 2025-08-24 20:29:29,496 - swarm.core.blueprint_discovery:138 - Found Blueprint class 'GAWDBlueprint' in module 'swarm.blueprints.gawd.blueprint_gawd'
[DEBUG] 2025-08-24 20:29:29,496 - swarm.core.blueprint_discovery:153 - Using class docstring for description of 'GAWDBlueprint'.
[DEBUG] 2025-08-24 20:29:29,496 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'codey' in directory: codey
[DEBUG] 2025-08-24 20:29:29,496 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_codey.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/codey
[DEBUG] 2025-08-24 20:29:29,496 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.codey.blueprint_codey
[DEBUG] 2025-08-24 20:29:29,496 - swarm.core.blueprint_discovery:138 - Found Blueprint class 'CodeyBlueprint' in module 'swarm.blueprints.codey.blueprint_codey'
[DEBUG] 2025-08-24 20:29:29,497 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'chatbot' in directory: chatbot
[DEBUG] 2025-08-24 20:29:29,497 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_chatbot.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/chatbot
[DEBUG] 2025-08-24 20:29:29,506 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.chatbot.blueprint_chatbot
[DEBUG] 2025-08-24 20:29:29,506 - swarm.core.blueprint_discovery:138 - Found Blueprint class 'ChatbotBlueprint' in module 'swarm.blueprints.chatbot.blueprint_chatbot'
[DEBUG] 2025-08-24 20:29:29,506 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'zeus' in directory: zeus
[DEBUG] 2025-08-24 20:29:29,506 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_zeus.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/zeus
[DEBUG] 2025-08-24 20:29:29,507 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.zeus.blueprint_zeus
[DEBUG] 2025-08-24 20:29:29,507 - swarm.core.blueprint_discovery:138 - Found Blueprint class 'ZeusBlueprint' in module 'swarm.blueprints.zeus.blueprint_zeus'
[DEBUG] 2025-08-24 20:29:29,507 - swarm.core.blueprint_discovery:153 - Using class docstring for description of 'ZeusBlueprint'.
[WARNING] 2025-08-24 20:29:29,507 - swarm.core.blueprint_discovery:133 - Multiple BlueprintBase subclasses found in blueprint_zeus.py. Using the first one found: 'zeus'. Previously found: 'ZeusCoordinatorBlueprint'.
[DEBUG] 2025-08-24 20:29:29,507 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'poets' in directory: poets
[DEBUG] 2025-08-24 20:29:29,507 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_poets.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/poets
[DEBUG] 2025-08-24 20:29:29,507 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.poets.blueprint_poets
[DEBUG] 2025-08-24 20:29:29,507 - swarm.core.blueprint_discovery:138 - Found Blueprint class 'PoetsBlueprint' in module 'swarm.blueprints.poets.blueprint_poets'
[DEBUG] 2025-08-24 20:29:29,507 - swarm.core.blueprint_discovery:153 - Using class docstring for description of 'PoetsBlueprint'.
[DEBUG] 2025-08-24 20:29:29,507 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'suggestion' in directory: suggestion
[DEBUG] 2025-08-24 20:29:29,507 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_suggestion.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/suggestion
[DEBUG] 2025-08-24 20:29:29,512 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.suggestion.blueprint_suggestion
[DEBUG] 2025-08-24 20:29:29,512 - swarm.core.blueprint_discovery:138 - Found Blueprint class 'SuggestionBlueprint' in module 'swarm.blueprints.suggestion.blueprint_suggestion'
[DEBUG] 2025-08-24 20:29:29,512 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'dilbot' in directory: dilbot
[WARNING] 2025-08-24 20:29:29,513 - swarm.core.blueprint_discovery:90 - Skipping directory 'dilbot': No suitable main Python file ('dilbot.py' or 'blueprint_dilbot.py') found.
[DEBUG] 2025-08-24 20:29:29,513 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'mission_improbable' in directory: mission_improbable
[DEBUG] 2025-08-24 20:29:29,513 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_mission_improbable.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/mission_improbable
[DEBUG] 2025-08-24 20:29:29,513 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.mission_improbable.blueprint_mission_improbable
[DEBUG] 2025-08-24 20:29:29,513 - swarm.core.blueprint_discovery:138 - Found Blueprint class 'MissionImprobableBlueprint' in module 'swarm.blueprints.mission_improbable.blueprint_mission_improbable'
[DEBUG] 2025-08-24 20:29:29,513 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'flock' in directory: flock
[DEBUG] 2025-08-24 20:29:29,513 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_flock.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/flock
[DEBUG] 2025-08-24 20:29:29,514 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.flock.blueprint_flock
[WARNING] 2025-08-24 20:29:29,514 - swarm.core.blueprint_discovery:172 - No BlueprintBase subclass found directly defined in module: swarm.blueprints.flock.blueprint_flock
[DEBUG] 2025-08-24 20:29:29,514 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'stewie' in directory: stewie
[WARNING] 2025-08-24 20:29:29,514 - swarm.core.blueprint_discovery:90 - Skipping directory 'stewie': No suitable main Python file ('stewie.py' or 'blueprint_stewie.py') found.
[DEBUG] 2025-08-24 20:29:29,514 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'geese' in directory: geese
[DEBUG] 2025-08-24 20:29:29,514 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_geese.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/geese
[DEBUG] 2025-08-24 20:29:29,514 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.geese.blueprint_geese
[DEBUG] 2025-08-24 20:29:29,514 - swarm.core.blueprint_discovery:138 - Found Blueprint class 'GeeseBlueprint' in module 'swarm.blueprints.geese.blueprint_geese'
[DEBUG] 2025-08-24 20:29:29,515 - swarm.core.blueprint_discovery:153 - Using class docstring for description of 'GeeseBlueprint'.
[DEBUG] 2025-08-24 20:29:29,515 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'django_chat' in directory: django_chat
[DEBUG] 2025-08-24 20:29:29,515 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_django_chat.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/django_chat
[DEBUG] 2025-08-24 20:29:29,519 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.django_chat.blueprint_django_chat
[DEBUG] 2025-08-24 20:29:29,519 - swarm.core.blueprint_discovery:138 - Found Blueprint class 'DjangoChatBlueprint' in module 'swarm.blueprints.django_chat.blueprint_django_chat'
[WARNING] 2025-08-24 20:29:29,519 - swarm.core.blueprint_discovery:143 - Blueprint class 'DjangoChatBlueprint' has a 'metadata' attribute that is not a dict. Type: <class 'property'>. Skipping metadata extraction for this field.
[DEBUG] 2025-08-24 20:29:29,519 - swarm.core.blueprint_discovery:153 - Using class docstring for description of 'DjangoChatBlueprint'.
[DEBUG] 2025-08-24 20:29:29,519 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'digitalbutlers' in directory: digitalbutlers
[DEBUG] 2025-08-24 20:29:29,519 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_digitalbutlers.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/digitalbutlers
[DEBUG] 2025-08-24 20:29:29,519 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.digitalbutlers.blueprint_digitalbutlers
[WARNING] 2025-08-24 20:29:29,519 - swarm.core.blueprint_discovery:172 - No BlueprintBase subclass found directly defined in module: swarm.blueprints.digitalbutlers.blueprint_digitalbutlers
[DEBUG] 2025-08-24 20:29:29,520 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'echocraft' in directory: echocraft
[DEBUG] 2025-08-24 20:29:29,520 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_echocraft.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/echocraft
[DEBUG] 2025-08-24 20:29:29,520 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.echocraft.blueprint_echocraft
[DEBUG] 2025-08-24 20:29:29,520 - swarm.core.blueprint_discovery:138 - Found Blueprint class 'EchoCraftBlueprint' in module 'swarm.blueprints.echocraft.blueprint_echocraft'
[DEBUG] 2025-08-24 20:29:29,520 - swarm.core.blueprint_discovery:153 - Using class docstring for description of 'EchoCraftBlueprint'.
[DEBUG] 2025-08-24 20:29:29,520 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'hello_world' in directory: hello_world
[WARNING] 2025-08-24 20:29:29,520 - swarm.core.blueprint_discovery:90 - Skipping directory 'hello_world': No suitable main Python file ('hello_world.py' or 'blueprint_hello_world.py') found.
[DEBUG] 2025-08-24 20:29:29,521 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'llm_test_judge' in directory: llm_test_judge
[WARNING] 2025-08-24 20:29:29,521 - swarm.core.blueprint_discovery:90 - Skipping directory 'llm_test_judge': No suitable main Python file ('llm_test_judge.py' or 'blueprint_llm_test_judge.py') found.
[DEBUG] 2025-08-24 20:29:29,521 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'jeeves' in directory: jeeves
[DEBUG] 2025-08-24 20:29:29,521 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_jeeves.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/jeeves
[DEBUG] 2025-08-24 20:29:29,521 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.jeeves.blueprint_jeeves
[DEBUG] 2025-08-24 20:29:29,521 - swarm.core.blueprint_discovery:138 - Found Blueprint class 'JeevesBlueprint' in module 'swarm.blueprints.jeeves.blueprint_jeeves'
[DEBUG] 2025-08-24 20:29:29,521 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'gaggle' in directory: gaggle
[WARNING] 2025-08-24 20:29:29,521 - swarm.core.blueprint_discovery:90 - Skipping directory 'gaggle': No suitable main Python file ('gaggle.py' or 'blueprint_gaggle.py') found.
[DEBUG] 2025-08-24 20:29:29,522 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'monkai_magic' in directory: monkai_magic
[DEBUG] 2025-08-24 20:29:29,522 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_monkai_magic.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/monkai_magic
[DEBUG] 2025-08-24 20:29:29,525 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.monkai_magic.blueprint_monkai_magic
[DEBUG] 2025-08-24 20:29:29,525 - swarm.core.blueprint_discovery:138 - Found Blueprint class 'MonkaiMagicBlueprint' in module 'swarm.blueprints.monkai_magic.blueprint_monkai_magic'
[DEBUG] 2025-08-24 20:29:29,525 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'mcp_demo' in directory: mcp_demo
[DEBUG] 2025-08-24 20:29:29,525 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_mcp_demo.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/mcp_demo
[INFO] 2025-08-24 20:29:29,526 - swarm.blueprints.mcp_demo.blueprint_mcp_demo:47 - Last swarm update: 2025-08-24T20:29:29Z (UTC)
[DEBUG] 2025-08-24 20:29:29,526 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.mcp_demo.blueprint_mcp_demo
[DEBUG] 2025-08-24 20:29:29,526 - swarm.core.blueprint_discovery:138 - Found Blueprint class 'MCPDemoBlueprint' in module 'swarm.blueprints.mcp_demo.blueprint_mcp_demo'
[INFO] 2025-08-24 20:29:29,526 - swarm.core.blueprint_discovery:182 - Blueprint discovery complete. Found 19 blueprints: ['chucks_angels', 'nebula_shellz', 'whinge_surf', 'dynamic_team', 'rue_code', 'omniplex', 'gawd', 'codey', 'chatbot', 'zeus', 'poets', 'suggestion', 'mission_improbable', 'geese', 'django_chat', 'echocraft', 'jeeves', 'monkai_magic', 'mcp_demo']
[INFO] 2025-08-24 20:29:29,526 - swarm.views.utils:114 - Found blueprint classes: ['chucks_angels', 'nebula_shellz', 'whinge_surf', 'dynamic_team', 'rue_code', 'omniplex', 'gawd', 'codey', 'chatbot', 'zeus', 'poets', 'suggestion', 'mission_improbable', 'geese', 'django_chat', 'echocraft', 'jeeves', 'monkai_magic', 'mcp_demo', 'demo-api-team']
[DEBUG] 2025-08-24 20:29:29,528 - swarm.auth:40 - [Auth][StaticToken] Attempting static token authentication.
[ERROR] 2025-08-24 20:29:29,528 - swarm.auth:46 - [Auth][StaticToken] SWARM_API_KEY is not set in Django settings. Cannot use static token auth.
______________________________________________________________________________________________________________ test_reset_clears_dynamic_registry_and_discovery ______________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stdout call ----------------------------------------------------------------------------------------------------------------------------
# Last swarm update: 2025-08-24T20:29:29Z (UTC)
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[INFO] 2025-08-24 20:29:29,554 - swarm.views.utils:99 - Discovering blueprint classes (sync)...
[INFO] 2025-08-24 20:29:29,554 - swarm.core.blueprint_discovery:61 - Starting blueprint discovery in directory: /mnt/models/open-swarm-mcp/src/swarm/blueprints
[DEBUG] 2025-08-24 20:29:29,555 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'chucks_angels' in directory: chucks_angels
[DEBUG] 2025-08-24 20:29:29,555 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_chucks_angels.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/chucks_angels
[DEBUG] 2025-08-24 20:29:29,555 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.chucks_angels.blueprint_chucks_angels
[DEBUG] 2025-08-24 20:29:29,555 - swarm.core.blueprint_discovery:138 - Found Blueprint class 'ChucksAngelsBlueprint' in module 'swarm.blueprints.chucks_angels.blueprint_chucks_angels'
[DEBUG] 2025-08-24 20:29:29,555 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'whiskeytango_foxtrot' in directory: whiskeytango_foxtrot
[DEBUG] 2025-08-24 20:29:29,555 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_whiskeytango_foxtrot.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/whiskeytango_foxtrot
[DEBUG] 2025-08-24 20:29:29,559 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.whiskeytango_foxtrot.blueprint_whiskeytango_foxtrot
[WARNING] 2025-08-24 20:29:29,559 - swarm.core.blueprint_discovery:172 - No BlueprintBase subclass found directly defined in module: swarm.blueprints.whiskeytango_foxtrot.blueprint_whiskeytango_foxtrot
[DEBUG] 2025-08-24 20:29:29,560 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'nebula_shellz' in directory: nebula_shellz
[DEBUG] 2025-08-24 20:29:29,560 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_nebula_shellz.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/nebula_shellz
[DEBUG] 2025-08-24 20:29:29,565 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.nebula_shellz.blueprint_nebula_shellz
[DEBUG] 2025-08-24 20:29:29,565 - swarm.core.blueprint_discovery:138 - Found Blueprint class 'NebuchaShellzzarBlueprint' in module 'swarm.blueprints.nebula_shellz.blueprint_nebula_shellz'
[DEBUG] 2025-08-24 20:29:29,565 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'family_ties' in directory: family_ties
[DEBUG] 2025-08-24 20:29:29,565 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_family_ties.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/family_ties
[DEBUG] 2025-08-24 20:29:29,565 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.family_ties.blueprint_family_ties
[WARNING] 2025-08-24 20:29:29,565 - swarm.core.blueprint_discovery:172 - No BlueprintBase subclass found directly defined in module: swarm.blueprints.family_ties.blueprint_family_ties
[DEBUG] 2025-08-24 20:29:29,565 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'common' in directory: common
[WARNING] 2025-08-24 20:29:29,565 - swarm.core.blueprint_discovery:90 - Skipping directory 'common': No suitable main Python file ('common.py' or 'blueprint_common.py') found.
[DEBUG] 2025-08-24 20:29:29,565 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'whinge_surf' in directory: whinge_surf
[DEBUG] 2025-08-24 20:29:29,566 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_whinge_surf.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/whinge_surf
[DEBUG] 2025-08-24 20:29:29,566 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.whinge_surf.blueprint_whinge_surf
[DEBUG] 2025-08-24 20:29:29,566 - swarm.core.blueprint_discovery:138 - Found Blueprint class 'WhingeSurfBlueprint' in module 'swarm.blueprints.whinge_surf.blueprint_whinge_surf'
[DEBUG] 2025-08-24 20:29:29,566 - swarm.core.blueprint_discovery:153 - Using class docstring for description of 'WhingeSurfBlueprint'.
[DEBUG] 2025-08-24 20:29:29,566 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'dynamic_team' in directory: dynamic_team
[DEBUG] 2025-08-24 20:29:29,566 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_dynamic_team.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/dynamic_team
[DEBUG] 2025-08-24 20:29:29,566 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.dynamic_team.blueprint_dynamic_team
[DEBUG] 2025-08-24 20:29:29,567 - swarm.core.blueprint_discovery:138 - Found Blueprint class 'DynamicTeamBlueprint' in module 'swarm.blueprints.dynamic_team.blueprint_dynamic_team'
[DEBUG] 2025-08-24 20:29:29,567 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'rue_code' in directory: rue_code
[DEBUG] 2025-08-24 20:29:29,567 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_rue_code.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/rue_code
[DEBUG] 2025-08-24 20:29:29,567 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.rue_code.blueprint_rue_code
[DEBUG] 2025-08-24 20:29:29,567 - swarm.core.blueprint_discovery:138 - Found Blueprint class 'RueCodeBlueprint' in module 'swarm.blueprints.rue_code.blueprint_rue_code'
[DEBUG] 2025-08-24 20:29:29,568 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'messenger' in directory: messenger
[WARNING] 2025-08-24 20:29:29,568 - swarm.core.blueprint_discovery:90 - Skipping directory 'messenger': No suitable main Python file ('messenger.py' or 'blueprint_messenger.py') found.
[DEBUG] 2025-08-24 20:29:29,568 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'unapologetic_poets' in directory: unapologetic_poets
[WARNING] 2025-08-24 20:29:29,568 - swarm.core.blueprint_discovery:90 - Skipping directory 'unapologetic_poets': No suitable main Python file ('unapologetic_poets.py' or 'blueprint_unapologetic_poets.py') found.
[DEBUG] 2025-08-24 20:29:29,568 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'omniplex' in directory: omniplex
[DEBUG] 2025-08-24 20:29:29,568 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_omniplex.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/omniplex
[DEBUG] 2025-08-24 20:29:29,568 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.omniplex.blueprint_omniplex
[DEBUG] 2025-08-24 20:29:29,568 - swarm.core.blueprint_discovery:138 - Found Blueprint class 'OmniplexBlueprint' in module 'swarm.blueprints.omniplex.blueprint_omniplex'
[DEBUG] 2025-08-24 20:29:29,568 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'gawd' in directory: gawd
[DEBUG] 2025-08-24 20:29:29,568 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_gawd.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/gawd
[DEBUG] 2025-08-24 20:29:29,569 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.gawd.blueprint_gawd
[DEBUG] 2025-08-24 20:29:29,569 - swarm.core.blueprint_discovery:138 - Found Blueprint class 'GAWDBlueprint' in module 'swarm.blueprints.gawd.blueprint_gawd'
[DEBUG] 2025-08-24 20:29:29,569 - swarm.core.blueprint_discovery:153 - Using class docstring for description of 'GAWDBlueprint'.
[DEBUG] 2025-08-24 20:29:29,569 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'codey' in directory: codey
[DEBUG] 2025-08-24 20:29:29,569 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_codey.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/codey
[DEBUG] 2025-08-24 20:29:29,569 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.codey.blueprint_codey
[DEBUG] 2025-08-24 20:29:29,569 - swarm.core.blueprint_discovery:138 - Found Blueprint class 'CodeyBlueprint' in module 'swarm.blueprints.codey.blueprint_codey'
[DEBUG] 2025-08-24 20:29:29,570 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'chatbot' in directory: chatbot
[DEBUG] 2025-08-24 20:29:29,570 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_chatbot.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/chatbot
[DEBUG] 2025-08-24 20:29:29,578 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.chatbot.blueprint_chatbot
[DEBUG] 2025-08-24 20:29:29,578 - swarm.core.blueprint_discovery:138 - Found Blueprint class 'ChatbotBlueprint' in module 'swarm.blueprints.chatbot.blueprint_chatbot'
[DEBUG] 2025-08-24 20:29:29,579 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'zeus' in directory: zeus
[DEBUG] 2025-08-24 20:29:29,579 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_zeus.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/zeus
[DEBUG] 2025-08-24 20:29:29,579 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.zeus.blueprint_zeus
[DEBUG] 2025-08-24 20:29:29,579 - swarm.core.blueprint_discovery:138 - Found Blueprint class 'ZeusBlueprint' in module 'swarm.blueprints.zeus.blueprint_zeus'
[DEBUG] 2025-08-24 20:29:29,579 - swarm.core.blueprint_discovery:153 - Using class docstring for description of 'ZeusBlueprint'.
[WARNING] 2025-08-24 20:29:29,579 - swarm.core.blueprint_discovery:133 - Multiple BlueprintBase subclasses found in blueprint_zeus.py. Using the first one found: 'zeus'. Previously found: 'ZeusCoordinatorBlueprint'.
[DEBUG] 2025-08-24 20:29:29,579 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'poets' in directory: poets
[DEBUG] 2025-08-24 20:29:29,579 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_poets.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/poets
[DEBUG] 2025-08-24 20:29:29,580 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.poets.blueprint_poets
[DEBUG] 2025-08-24 20:29:29,580 - swarm.core.blueprint_discovery:138 - Found Blueprint class 'PoetsBlueprint' in module 'swarm.blueprints.poets.blueprint_poets'
[DEBUG] 2025-08-24 20:29:29,580 - swarm.core.blueprint_discovery:153 - Using class docstring for description of 'PoetsBlueprint'.
[DEBUG] 2025-08-24 20:29:29,580 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'suggestion' in directory: suggestion
[DEBUG] 2025-08-24 20:29:29,580 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_suggestion.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/suggestion
[DEBUG] 2025-08-24 20:29:29,585 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.suggestion.blueprint_suggestion
[DEBUG] 2025-08-24 20:29:29,585 - swarm.core.blueprint_discovery:138 - Found Blueprint class 'SuggestionBlueprint' in module 'swarm.blueprints.suggestion.blueprint_suggestion'
[DEBUG] 2025-08-24 20:29:29,585 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'dilbot' in directory: dilbot
[WARNING] 2025-08-24 20:29:29,585 - swarm.core.blueprint_discovery:90 - Skipping directory 'dilbot': No suitable main Python file ('dilbot.py' or 'blueprint_dilbot.py') found.
[DEBUG] 2025-08-24 20:29:29,585 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'mission_improbable' in directory: mission_improbable
[DEBUG] 2025-08-24 20:29:29,585 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_mission_improbable.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/mission_improbable
[DEBUG] 2025-08-24 20:29:29,586 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.mission_improbable.blueprint_mission_improbable
[DEBUG] 2025-08-24 20:29:29,586 - swarm.core.blueprint_discovery:138 - Found Blueprint class 'MissionImprobableBlueprint' in module 'swarm.blueprints.mission_improbable.blueprint_mission_improbable'
[DEBUG] 2025-08-24 20:29:29,586 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'flock' in directory: flock
[DEBUG] 2025-08-24 20:29:29,586 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_flock.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/flock
[DEBUG] 2025-08-24 20:29:29,587 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.flock.blueprint_flock
[WARNING] 2025-08-24 20:29:29,587 - swarm.core.blueprint_discovery:172 - No BlueprintBase subclass found directly defined in module: swarm.blueprints.flock.blueprint_flock
[DEBUG] 2025-08-24 20:29:29,587 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'stewie' in directory: stewie
[WARNING] 2025-08-24 20:29:29,587 - swarm.core.blueprint_discovery:90 - Skipping directory 'stewie': No suitable main Python file ('stewie.py' or 'blueprint_stewie.py') found.
[DEBUG] 2025-08-24 20:29:29,587 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'geese' in directory: geese
[DEBUG] 2025-08-24 20:29:29,587 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_geese.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/geese
[DEBUG] 2025-08-24 20:29:29,587 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.geese.blueprint_geese
[DEBUG] 2025-08-24 20:29:29,587 - swarm.core.blueprint_discovery:138 - Found Blueprint class 'GeeseBlueprint' in module 'swarm.blueprints.geese.blueprint_geese'
[DEBUG] 2025-08-24 20:29:29,587 - swarm.core.blueprint_discovery:153 - Using class docstring for description of 'GeeseBlueprint'.
[DEBUG] 2025-08-24 20:29:29,588 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'django_chat' in directory: django_chat
[DEBUG] 2025-08-24 20:29:29,588 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_django_chat.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/django_chat
[DEBUG] 2025-08-24 20:29:29,592 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.django_chat.blueprint_django_chat
[DEBUG] 2025-08-24 20:29:29,592 - swarm.core.blueprint_discovery:138 - Found Blueprint class 'DjangoChatBlueprint' in module 'swarm.blueprints.django_chat.blueprint_django_chat'
[WARNING] 2025-08-24 20:29:29,592 - swarm.core.blueprint_discovery:143 - Blueprint class 'DjangoChatBlueprint' has a 'metadata' attribute that is not a dict. Type: <class 'property'>. Skipping metadata extraction for this field.
[DEBUG] 2025-08-24 20:29:29,592 - swarm.core.blueprint_discovery:153 - Using class docstring for description of 'DjangoChatBlueprint'.
[DEBUG] 2025-08-24 20:29:29,592 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'digitalbutlers' in directory: digitalbutlers
[DEBUG] 2025-08-24 20:29:29,592 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_digitalbutlers.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/digitalbutlers
[DEBUG] 2025-08-24 20:29:29,592 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.digitalbutlers.blueprint_digitalbutlers
[WARNING] 2025-08-24 20:29:29,593 - swarm.core.blueprint_discovery:172 - No BlueprintBase subclass found directly defined in module: swarm.blueprints.digitalbutlers.blueprint_digitalbutlers
[DEBUG] 2025-08-24 20:29:29,593 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'echocraft' in directory: echocraft
[DEBUG] 2025-08-24 20:29:29,593 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_echocraft.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/echocraft
[DEBUG] 2025-08-24 20:29:29,593 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.echocraft.blueprint_echocraft
[DEBUG] 2025-08-24 20:29:29,593 - swarm.core.blueprint_discovery:138 - Found Blueprint class 'EchoCraftBlueprint' in module 'swarm.blueprints.echocraft.blueprint_echocraft'
[DEBUG] 2025-08-24 20:29:29,593 - swarm.core.blueprint_discovery:153 - Using class docstring for description of 'EchoCraftBlueprint'.
[DEBUG] 2025-08-24 20:29:29,594 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'hello_world' in directory: hello_world
[WARNING] 2025-08-24 20:29:29,594 - swarm.core.blueprint_discovery:90 - Skipping directory 'hello_world': No suitable main Python file ('hello_world.py' or 'blueprint_hello_world.py') found.
[DEBUG] 2025-08-24 20:29:29,594 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'llm_test_judge' in directory: llm_test_judge
[WARNING] 2025-08-24 20:29:29,594 - swarm.core.blueprint_discovery:90 - Skipping directory 'llm_test_judge': No suitable main Python file ('llm_test_judge.py' or 'blueprint_llm_test_judge.py') found.
[DEBUG] 2025-08-24 20:29:29,594 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'jeeves' in directory: jeeves
[DEBUG] 2025-08-24 20:29:29,594 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_jeeves.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/jeeves
[DEBUG] 2025-08-24 20:29:29,594 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.jeeves.blueprint_jeeves
[DEBUG] 2025-08-24 20:29:29,594 - swarm.core.blueprint_discovery:138 - Found Blueprint class 'JeevesBlueprint' in module 'swarm.blueprints.jeeves.blueprint_jeeves'
[DEBUG] 2025-08-24 20:29:29,595 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'gaggle' in directory: gaggle
[WARNING] 2025-08-24 20:29:29,595 - swarm.core.blueprint_discovery:90 - Skipping directory 'gaggle': No suitable main Python file ('gaggle.py' or 'blueprint_gaggle.py') found.
[DEBUG] 2025-08-24 20:29:29,595 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'monkai_magic' in directory: monkai_magic
[DEBUG] 2025-08-24 20:29:29,595 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_monkai_magic.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/monkai_magic
[DEBUG] 2025-08-24 20:29:29,598 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.monkai_magic.blueprint_monkai_magic
[DEBUG] 2025-08-24 20:29:29,599 - swarm.core.blueprint_discovery:138 - Found Blueprint class 'MonkaiMagicBlueprint' in module 'swarm.blueprints.monkai_magic.blueprint_monkai_magic'
[DEBUG] 2025-08-24 20:29:29,599 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'mcp_demo' in directory: mcp_demo
[DEBUG] 2025-08-24 20:29:29,599 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_mcp_demo.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/mcp_demo
[INFO] 2025-08-24 20:29:29,599 - swarm.blueprints.mcp_demo.blueprint_mcp_demo:47 - Last swarm update: 2025-08-24T20:29:29Z (UTC)
[DEBUG] 2025-08-24 20:29:29,599 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.mcp_demo.blueprint_mcp_demo
[DEBUG] 2025-08-24 20:29:29,599 - swarm.core.blueprint_discovery:138 - Found Blueprint class 'MCPDemoBlueprint' in module 'swarm.blueprints.mcp_demo.blueprint_mcp_demo'
[INFO] 2025-08-24 20:29:29,600 - swarm.core.blueprint_discovery:182 - Blueprint discovery complete. Found 19 blueprints: ['chucks_angels', 'nebula_shellz', 'whinge_surf', 'dynamic_team', 'rue_code', 'omniplex', 'gawd', 'codey', 'chatbot', 'zeus', 'poets', 'suggestion', 'mission_improbable', 'geese', 'django_chat', 'echocraft', 'jeeves', 'monkai_magic', 'mcp_demo']
[INFO] 2025-08-24 20:29:29,600 - swarm.views.utils:114 - Found blueprint classes: ['chucks_angels', 'nebula_shellz', 'whinge_surf', 'dynamic_team', 'rue_code', 'omniplex', 'gawd', 'codey', 'chatbot', 'zeus', 'poets', 'suggestion', 'mission_improbable', 'geese', 'django_chat', 'echocraft', 'jeeves', 'monkai_magic', 'mcp_demo']
_____________________________________________________________________________________________________________ test_dynamic_team_registry_and_discovery_roundtrip _____________________________________________________________________________________________________________
---------------------------------------------------------------------------------------------------------------------------- Captured stdout call ----------------------------------------------------------------------------------------------------------------------------
# Last swarm update: 2025-08-24T20:29:29Z (UTC)
---------------------------------------------------------------------------------------------------------------------------- Captured stderr call ----------------------------------------------------------------------------------------------------------------------------
[INFO] 2025-08-24 20:29:29,607 - swarm.views.utils:99 - Discovering blueprint classes (sync)...
[INFO] 2025-08-24 20:29:29,607 - swarm.core.blueprint_discovery:61 - Starting blueprint discovery in directory: /mnt/models/open-swarm-mcp/src/swarm/blueprints
[DEBUG] 2025-08-24 20:29:29,608 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'chucks_angels' in directory: chucks_angels
[DEBUG] 2025-08-24 20:29:29,608 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_chucks_angels.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/chucks_angels
[DEBUG] 2025-08-24 20:29:29,608 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.chucks_angels.blueprint_chucks_angels
[DEBUG] 2025-08-24 20:29:29,608 - swarm.core.blueprint_discovery:138 - Found Blueprint class 'ChucksAngelsBlueprint' in module 'swarm.blueprints.chucks_angels.blueprint_chucks_angels'
[DEBUG] 2025-08-24 20:29:29,608 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'whiskeytango_foxtrot' in directory: whiskeytango_foxtrot
[DEBUG] 2025-08-24 20:29:29,608 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_whiskeytango_foxtrot.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/whiskeytango_foxtrot
[DEBUG] 2025-08-24 20:29:29,612 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.whiskeytango_foxtrot.blueprint_whiskeytango_foxtrot
[WARNING] 2025-08-24 20:29:29,613 - swarm.core.blueprint_discovery:172 - No BlueprintBase subclass found directly defined in module: swarm.blueprints.whiskeytango_foxtrot.blueprint_whiskeytango_foxtrot
[DEBUG] 2025-08-24 20:29:29,613 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'nebula_shellz' in directory: nebula_shellz
[DEBUG] 2025-08-24 20:29:29,613 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_nebula_shellz.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/nebula_shellz
[DEBUG] 2025-08-24 20:29:29,616 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.nebula_shellz.blueprint_nebula_shellz
[DEBUG] 2025-08-24 20:29:29,616 - swarm.core.blueprint_discovery:138 - Found Blueprint class 'NebuchaShellzzarBlueprint' in module 'swarm.blueprints.nebula_shellz.blueprint_nebula_shellz'
[DEBUG] 2025-08-24 20:29:29,616 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'family_ties' in directory: family_ties
[DEBUG] 2025-08-24 20:29:29,616 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_family_ties.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/family_ties
[DEBUG] 2025-08-24 20:29:29,617 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.family_ties.blueprint_family_ties
[WARNING] 2025-08-24 20:29:29,617 - swarm.core.blueprint_discovery:172 - No BlueprintBase subclass found directly defined in module: swarm.blueprints.family_ties.blueprint_family_ties
[DEBUG] 2025-08-24 20:29:29,617 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'common' in directory: common
[WARNING] 2025-08-24 20:29:29,617 - swarm.core.blueprint_discovery:90 - Skipping directory 'common': No suitable main Python file ('common.py' or 'blueprint_common.py') found.
[DEBUG] 2025-08-24 20:29:29,617 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'whinge_surf' in directory: whinge_surf
[DEBUG] 2025-08-24 20:29:29,617 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_whinge_surf.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/whinge_surf
[DEBUG] 2025-08-24 20:29:29,617 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.whinge_surf.blueprint_whinge_surf
[DEBUG] 2025-08-24 20:29:29,617 - swarm.core.blueprint_discovery:138 - Found Blueprint class 'WhingeSurfBlueprint' in module 'swarm.blueprints.whinge_surf.blueprint_whinge_surf'
[DEBUG] 2025-08-24 20:29:29,617 - swarm.core.blueprint_discovery:153 - Using class docstring for description of 'WhingeSurfBlueprint'.
[DEBUG] 2025-08-24 20:29:29,618 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'dynamic_team' in directory: dynamic_team
[DEBUG] 2025-08-24 20:29:29,618 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_dynamic_team.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/dynamic_team
[DEBUG] 2025-08-24 20:29:29,618 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.dynamic_team.blueprint_dynamic_team
[DEBUG] 2025-08-24 20:29:29,618 - swarm.core.blueprint_discovery:138 - Found Blueprint class 'DynamicTeamBlueprint' in module 'swarm.blueprints.dynamic_team.blueprint_dynamic_team'
[DEBUG] 2025-08-24 20:29:29,618 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'rue_code' in directory: rue_code
[DEBUG] 2025-08-24 20:29:29,618 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_rue_code.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/rue_code
[DEBUG] 2025-08-24 20:29:29,618 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.rue_code.blueprint_rue_code
[DEBUG] 2025-08-24 20:29:29,619 - swarm.core.blueprint_discovery:138 - Found Blueprint class 'RueCodeBlueprint' in module 'swarm.blueprints.rue_code.blueprint_rue_code'
[DEBUG] 2025-08-24 20:29:29,620 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'messenger' in directory: messenger
[WARNING] 2025-08-24 20:29:29,620 - swarm.core.blueprint_discovery:90 - Skipping directory 'messenger': No suitable main Python file ('messenger.py' or 'blueprint_messenger.py') found.
[DEBUG] 2025-08-24 20:29:29,620 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'unapologetic_poets' in directory: unapologetic_poets
[WARNING] 2025-08-24 20:29:29,620 - swarm.core.blueprint_discovery:90 - Skipping directory 'unapologetic_poets': No suitable main Python file ('unapologetic_poets.py' or 'blueprint_unapologetic_poets.py') found.
[DEBUG] 2025-08-24 20:29:29,621 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'omniplex' in directory: omniplex
[DEBUG] 2025-08-24 20:29:29,621 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_omniplex.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/omniplex
[DEBUG] 2025-08-24 20:29:29,621 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.omniplex.blueprint_omniplex
[DEBUG] 2025-08-24 20:29:29,621 - swarm.core.blueprint_discovery:138 - Found Blueprint class 'OmniplexBlueprint' in module 'swarm.blueprints.omniplex.blueprint_omniplex'
[DEBUG] 2025-08-24 20:29:29,621 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'gawd' in directory: gawd
[DEBUG] 2025-08-24 20:29:29,621 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_gawd.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/gawd
[DEBUG] 2025-08-24 20:29:29,621 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.gawd.blueprint_gawd
[DEBUG] 2025-08-24 20:29:29,622 - swarm.core.blueprint_discovery:138 - Found Blueprint class 'GAWDBlueprint' in module 'swarm.blueprints.gawd.blueprint_gawd'
[DEBUG] 2025-08-24 20:29:29,622 - swarm.core.blueprint_discovery:153 - Using class docstring for description of 'GAWDBlueprint'.
[DEBUG] 2025-08-24 20:29:29,622 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'codey' in directory: codey
[DEBUG] 2025-08-24 20:29:29,622 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_codey.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/codey
[DEBUG] 2025-08-24 20:29:29,622 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.codey.blueprint_codey
[DEBUG] 2025-08-24 20:29:29,622 - swarm.core.blueprint_discovery:138 - Found Blueprint class 'CodeyBlueprint' in module 'swarm.blueprints.codey.blueprint_codey'
[DEBUG] 2025-08-24 20:29:29,622 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'chatbot' in directory: chatbot
[DEBUG] 2025-08-24 20:29:29,623 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_chatbot.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/chatbot
[DEBUG] 2025-08-24 20:29:29,631 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.chatbot.blueprint_chatbot
[DEBUG] 2025-08-24 20:29:29,632 - swarm.core.blueprint_discovery:138 - Found Blueprint class 'ChatbotBlueprint' in module 'swarm.blueprints.chatbot.blueprint_chatbot'
[DEBUG] 2025-08-24 20:29:29,632 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'zeus' in directory: zeus
[DEBUG] 2025-08-24 20:29:29,632 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_zeus.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/zeus
[DEBUG] 2025-08-24 20:29:29,632 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.zeus.blueprint_zeus
[DEBUG] 2025-08-24 20:29:29,632 - swarm.core.blueprint_discovery:138 - Found Blueprint class 'ZeusBlueprint' in module 'swarm.blueprints.zeus.blueprint_zeus'
[DEBUG] 2025-08-24 20:29:29,632 - swarm.core.blueprint_discovery:153 - Using class docstring for description of 'ZeusBlueprint'.
[WARNING] 2025-08-24 20:29:29,632 - swarm.core.blueprint_discovery:133 - Multiple BlueprintBase subclasses found in blueprint_zeus.py. Using the first one found: 'zeus'. Previously found: 'ZeusCoordinatorBlueprint'.
[DEBUG] 2025-08-24 20:29:29,633 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'poets' in directory: poets
[DEBUG] 2025-08-24 20:29:29,633 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_poets.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/poets
[DEBUG] 2025-08-24 20:29:29,633 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.poets.blueprint_poets
[DEBUG] 2025-08-24 20:29:29,633 - swarm.core.blueprint_discovery:138 - Found Blueprint class 'PoetsBlueprint' in module 'swarm.blueprints.poets.blueprint_poets'
[DEBUG] 2025-08-24 20:29:29,633 - swarm.core.blueprint_discovery:153 - Using class docstring for description of 'PoetsBlueprint'.
[DEBUG] 2025-08-24 20:29:29,633 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'suggestion' in directory: suggestion
[DEBUG] 2025-08-24 20:29:29,633 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_suggestion.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/suggestion
[DEBUG] 2025-08-24 20:29:29,639 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.suggestion.blueprint_suggestion
[DEBUG] 2025-08-24 20:29:29,639 - swarm.core.blueprint_discovery:138 - Found Blueprint class 'SuggestionBlueprint' in module 'swarm.blueprints.suggestion.blueprint_suggestion'
[DEBUG] 2025-08-24 20:29:29,639 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'dilbot' in directory: dilbot
[WARNING] 2025-08-24 20:29:29,639 - swarm.core.blueprint_discovery:90 - Skipping directory 'dilbot': No suitable main Python file ('dilbot.py' or 'blueprint_dilbot.py') found.
[DEBUG] 2025-08-24 20:29:29,639 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'mission_improbable' in directory: mission_improbable
[DEBUG] 2025-08-24 20:29:29,639 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_mission_improbable.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/mission_improbable
[DEBUG] 2025-08-24 20:29:29,640 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.mission_improbable.blueprint_mission_improbable
[DEBUG] 2025-08-24 20:29:29,640 - swarm.core.blueprint_discovery:138 - Found Blueprint class 'MissionImprobableBlueprint' in module 'swarm.blueprints.mission_improbable.blueprint_mission_improbable'
[DEBUG] 2025-08-24 20:29:29,640 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'flock' in directory: flock
[DEBUG] 2025-08-24 20:29:29,640 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_flock.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/flock
[DEBUG] 2025-08-24 20:29:29,641 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.flock.blueprint_flock
[WARNING] 2025-08-24 20:29:29,641 - swarm.core.blueprint_discovery:172 - No BlueprintBase subclass found directly defined in module: swarm.blueprints.flock.blueprint_flock
[DEBUG] 2025-08-24 20:29:29,641 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'stewie' in directory: stewie
[WARNING] 2025-08-24 20:29:29,641 - swarm.core.blueprint_discovery:90 - Skipping directory 'stewie': No suitable main Python file ('stewie.py' or 'blueprint_stewie.py') found.
[DEBUG] 2025-08-24 20:29:29,641 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'geese' in directory: geese
[DEBUG] 2025-08-24 20:29:29,641 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_geese.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/geese
[DEBUG] 2025-08-24 20:29:29,641 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.geese.blueprint_geese
[DEBUG] 2025-08-24 20:29:29,641 - swarm.core.blueprint_discovery:138 - Found Blueprint class 'GeeseBlueprint' in module 'swarm.blueprints.geese.blueprint_geese'
[DEBUG] 2025-08-24 20:29:29,641 - swarm.core.blueprint_discovery:153 - Using class docstring for description of 'GeeseBlueprint'.
[DEBUG] 2025-08-24 20:29:29,642 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'django_chat' in directory: django_chat
[DEBUG] 2025-08-24 20:29:29,642 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_django_chat.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/django_chat
[DEBUG] 2025-08-24 20:29:29,646 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.django_chat.blueprint_django_chat
[DEBUG] 2025-08-24 20:29:29,646 - swarm.core.blueprint_discovery:138 - Found Blueprint class 'DjangoChatBlueprint' in module 'swarm.blueprints.django_chat.blueprint_django_chat'
[WARNING] 2025-08-24 20:29:29,646 - swarm.core.blueprint_discovery:143 - Blueprint class 'DjangoChatBlueprint' has a 'metadata' attribute that is not a dict. Type: <class 'property'>. Skipping metadata extraction for this field.
[DEBUG] 2025-08-24 20:29:29,646 - swarm.core.blueprint_discovery:153 - Using class docstring for description of 'DjangoChatBlueprint'.
[DEBUG] 2025-08-24 20:29:29,646 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'digitalbutlers' in directory: digitalbutlers
[DEBUG] 2025-08-24 20:29:29,646 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_digitalbutlers.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/digitalbutlers
[DEBUG] 2025-08-24 20:29:29,647 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.digitalbutlers.blueprint_digitalbutlers
[WARNING] 2025-08-24 20:29:29,647 - swarm.core.blueprint_discovery:172 - No BlueprintBase subclass found directly defined in module: swarm.blueprints.digitalbutlers.blueprint_digitalbutlers
[DEBUG] 2025-08-24 20:29:29,647 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'echocraft' in directory: echocraft
[DEBUG] 2025-08-24 20:29:29,647 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_echocraft.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/echocraft
[DEBUG] 2025-08-24 20:29:29,647 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.echocraft.blueprint_echocraft
[DEBUG] 2025-08-24 20:29:29,647 - swarm.core.blueprint_discovery:138 - Found Blueprint class 'EchoCraftBlueprint' in module 'swarm.blueprints.echocraft.blueprint_echocraft'
[DEBUG] 2025-08-24 20:29:29,647 - swarm.core.blueprint_discovery:153 - Using class docstring for description of 'EchoCraftBlueprint'.
[DEBUG] 2025-08-24 20:29:29,648 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'hello_world' in directory: hello_world
[WARNING] 2025-08-24 20:29:29,648 - swarm.core.blueprint_discovery:90 - Skipping directory 'hello_world': No suitable main Python file ('hello_world.py' or 'blueprint_hello_world.py') found.
[DEBUG] 2025-08-24 20:29:29,648 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'llm_test_judge' in directory: llm_test_judge
[WARNING] 2025-08-24 20:29:29,648 - swarm.core.blueprint_discovery:90 - Skipping directory 'llm_test_judge': No suitable main Python file ('llm_test_judge.py' or 'blueprint_llm_test_judge.py') found.
[DEBUG] 2025-08-24 20:29:29,648 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'jeeves' in directory: jeeves
[DEBUG] 2025-08-24 20:29:29,648 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_jeeves.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/jeeves
[DEBUG] 2025-08-24 20:29:29,649 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.jeeves.blueprint_jeeves
[DEBUG] 2025-08-24 20:29:29,649 - swarm.core.blueprint_discovery:138 - Found Blueprint class 'JeevesBlueprint' in module 'swarm.blueprints.jeeves.blueprint_jeeves'
[DEBUG] 2025-08-24 20:29:29,649 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'gaggle' in directory: gaggle
[WARNING] 2025-08-24 20:29:29,649 - swarm.core.blueprint_discovery:90 - Skipping directory 'gaggle': No suitable main Python file ('gaggle.py' or 'blueprint_gaggle.py') found.
[DEBUG] 2025-08-24 20:29:29,649 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'monkai_magic' in directory: monkai_magic
[DEBUG] 2025-08-24 20:29:29,649 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_monkai_magic.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/monkai_magic
[DEBUG] 2025-08-24 20:29:29,653 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.monkai_magic.blueprint_monkai_magic
[DEBUG] 2025-08-24 20:29:29,653 - swarm.core.blueprint_discovery:138 - Found Blueprint class 'MonkaiMagicBlueprint' in module 'swarm.blueprints.monkai_magic.blueprint_monkai_magic'
[DEBUG] 2025-08-24 20:29:29,653 - swarm.core.blueprint_discovery:75 - Processing potential blueprint 'mcp_demo' in directory: mcp_demo
[DEBUG] 2025-08-24 20:29:29,653 - swarm.core.blueprint_discovery:94 - Found blueprint file: blueprint_mcp_demo.py in /mnt/models/open-swarm-mcp/src/swarm/blueprints/mcp_demo
[INFO] 2025-08-24 20:29:29,654 - swarm.blueprints.mcp_demo.blueprint_mcp_demo:47 - Last swarm update: 2025-08-24T20:29:29Z (UTC)
[DEBUG] 2025-08-24 20:29:29,654 - swarm.core.blueprint_discovery:123 - Successfully loaded module: swarm.blueprints.mcp_demo.blueprint_mcp_demo
[DEBUG] 2025-08-24 20:29:29,654 - swarm.core.blueprint_discovery:138 - Found Blueprint class 'MCPDemoBlueprint' in module 'swarm.blueprints.mcp_demo.blueprint_mcp_demo'
[INFO] 2025-08-24 20:29:29,654 - swarm.core.blueprint_discovery:182 - Blueprint discovery complete. Found 19 blueprints: ['chucks_angels', 'nebula_shellz', 'whinge_surf', 'dynamic_team', 'rue_code', 'omniplex', 'gawd', 'codey', 'chatbot', 'zeus', 'poets', 'suggestion', 'mission_improbable', 'geese', 'django_chat', 'echocraft', 'jeeves', 'monkai_magic', 'mcp_demo']
[INFO] 2025-08-24 20:29:29,654 - swarm.views.utils:114 - Found blueprint classes: ['chucks_angels', 'nebula_shellz', 'whinge_surf', 'dynamic_team', 'rue_code', 'omniplex', 'gawd', 'codey', 'chatbot', 'zeus', 'poets', 'suggestion', 'mission_improbable', 'geese', 'django_chat', 'echocraft', 'jeeves', 'monkai_magic', 'mcp_demo', 'demo-team']
-------------------------------------------------------------------------------------------------------------------------- Captured stderr teardown --------------------------------------------------------------------------------------------------------------------------
Destroying test database for alias 'default'...
========================================================================================================================== short test summary info ===========================================================================================================================
PASSED tests/api/test_models_negative.py::test_models_empty_registry_returns_200
PASSED tests/api/test_models_negative.py::test_models_non_mapping_iterable_gracefully_handles_type
PASSED tests/blueprints/test_divine_code.py::test_zeus_agent_creation
PASSED tests/blueprints/test_divine_code.py::test_zeus_run_method
PASSED tests/blueprints/test_divine_code.py::test_zeus_delegation_to_odin
PASSED tests/blueprints/test_divine_code.py::test_zeus_basic
PASSED tests/blueprints/test_divine_code.py::test_zeus_full_flow_example
PASSED tests/blueprints/test_echocraft.py::test_echocraft_blueprint_run
PASSED tests/blueprints/test_echocraft.py::test_echocraft_blueprint_no_user_message
PASSED tests/blueprints/test_echocraft.py::test_echocraft_blueprint_multiple_messages
PASSED tests/blueprints/test_echocraft_cli.py::test_run_echocraft_cli_success
PASSED tests/blueprints/test_echocraft_cli.py::test_run_echocraft_cli_unexpected_response_format
PASSED tests/blueprints/test_family_ties.py::test_stewie_agent_creation
PASSED tests/blueprints/test_geese.py::test_operation_box_styles
PASSED tests/blueprints/test_geese.py::test_display_splash_screen_variants
PASSED tests/blueprints/test_geese.py::test_spinner_messages
PASSED tests/blueprints/test_geese.py::test_story_generation_flow
PASSED tests/blueprints/test_geese_spinner_and_box.py::test_display_operation_box_basic
PASSED tests/blueprints/test_geese_spinner_and_box.py::test_display_operation_box_default_emoji
PASSED tests/blueprints/test_jeeves.py::test_jeeves_agent_creation
PASSED tests/blueprints/test_jeeves.py::test_jeeves_delegation_to_mycroft
PASSED tests/blueprints/test_jeeves.py::test_jeeves_cli_execution
PASSED tests/blueprints/test_jeeves_progressive_tool.py::test_display_operation_box_progress
PASSED tests/blueprints/test_jeeves_spinner_and_box.py::test_jeeves_spinner_frames[0-Polishing the silver]
PASSED tests/blueprints/test_jeeves_spinner_and_box.py::test_jeeves_spinner_frames[1-Generating.]
PASSED tests/blueprints/test_jeeves_spinner_and_box.py::test_jeeves_spinner_frames[2-Generating..]
PASSED tests/blueprints/test_jeeves_spinner_and_box.py::test_jeeves_spinner_frames[3-Generating...]
PASSED tests/blueprints/test_jeeves_spinner_and_box.py::test_jeeves_spinner_frames[4-Running...]
PASSED tests/blueprints/test_jeeves_spinner_and_box.py::test_jeeves_spinner_frames[5-Polishing the silver]
PASSED tests/blueprints/test_jeeves_spinner_and_box.py::test_jeeves_spinner_long_wait
PASSED tests/blueprints/test_jeeves_spinner_and_box.py::test_display_operation_box_basic
PASSED tests/blueprints/test_jeeves_spinner_and_box.py::test_display_operation_box_long_wait
PASSED tests/blueprints/test_mcp_demo.py::test_mcpdemo_agent_creation
PASSED tests/blueprints/test_mcp_demo.py::test_mcpdemo_bad_config
PASSED tests/blueprints/test_mcp_demo.py::test_mcpdemo_filesystem_interaction
PASSED tests/blueprints/test_mcp_demo.py::test_mcpdemo_memory_interaction
PASSED tests/blueprints/test_mcp_demo.py::test_mcpdemo_cli_execution
PASSED tests/blueprints/test_mission_improbable.py::test_mission_db_initialization
PASSED tests/blueprints/test_mission_improbable.py::test_mission_agent_creation
PASSED tests/blueprints/test_omniplex.py::test_omniplex_agent_creation_all_types
PASSED tests/blueprints/test_omniplex.py::test_omniplex_agent_creation_only_npx
PASSED tests/blueprints/test_omniplex.py::test_omniplex_delegation_to_amazo
PASSED tests/blueprints/test_omniplex.py::test_omniplex_cli_execution
PASSED tests/blueprints/test_poets.py::test_poets_db_initialization
PASSED tests/blueprints/test_poets.py::test_poets_agent_creation
PASSED tests/blueprints/test_rue_code_cost.py::test_gpt4_cost
PASSED tests/blueprints/test_rue_code_cost.py::test_invalid_model
PASSED tests/blueprints/test_rue_code_spinner_and_box.py::test_rue_spinner_states
PASSED tests/blueprints/test_rue_code_spinner_and_box.py::test_rue_operation_box_output
PASSED tests/blueprints/test_rue_code_spinner_and_box.py::test_rue_run_box
PASSED tests/blueprints/test_rue_code_spinner_and_box.py::test_rue_run_empty
PASSED tests/blueprints/test_whinge_surf.py::test_run_and_check_status
PASSED tests/blueprints/test_whinge_surf.py::test_kill_subprocess
PASSED tests/blueprints/test_whinge_surf.py::test_tail_and_show_output
PASSED tests/blueprints/test_whinge_surf.py::test_list_and_prune_jobs
PASSED tests/blueprints/test_whinge_surf.py::test_resource_usage_and_analyze_self
PASSED tests/blueprints/test_whinge_surf.py::test_self_update
PASSED tests/blueprints/test_whinge_surf_analysis.py::test_analyze_self_runs
PASSED tests/blueprints/test_whiskeytangofoxtrot.py::test_wtf_agent_creation
PASSED tests/blueprints/test_whiskeytangofoxtrot.py::test_wtf_db_initialization
PASSED tests/blueprints/test_zeus.py::test_metadata_lists_cli_as_divine_ass
PASSED tests/blueprints/test_zeus_cli.py::test_zeus_cli_banner
PASSED tests/blueprints/test_zeus_cli.py::test_zeus_cli_multiple_inputs
PASSED tests/blueprints/test_zeus_spinner_and_box.py::test_zeus_spinner_states
PASSED tests/blueprints/test_zeus_spinner_and_box.py::test_zeus_operation_box_output
PASSED tests/blueprints/test_zeus_spinner_and_box.py::test_zeus_assist_box
PASSED tests/blueprints/test_zeus_spinner_and_box.py::test_zeus_run_empty
PASSED tests/cli/test_cli_config.py::test_create_llm_config
PASSED tests/cli/test_cli_config.py::test_read_llm_config
PASSED tests/cli/test_cli_config.py::test_update_llm_config
PASSED tests/cli/test_cli_config.py::test_partial_update_llm_config
PASSED tests/cli/test_cli_config.py::test_delete_llm_config
PASSED tests/cli/test_cli_config.py::test_invalid_config_handling
PASSED tests/cli/test_cli_config.py::test_config_list_all
PASSED tests/cli/test_config_secrets_and_env_expansion.py::test_env_var_expansion_in_config_loader
PASSED tests/cli/test_launchers.py::test_swarm_cli_entrypoint
PASSED tests/cli/test_launchers.py::test_swarm_cli_install_executable_creates_executable
PASSED tests/cli/test_launchers.py::test_swarm_install_executable_failure
PASSED tests/cli/test_launchers.py::test_swarm_launch_runs_executable
PASSED tests/cli/test_launchers.py::test_swarm_launch_failure_not_found
PASSED tests/cli/test_list_blueprints.py::test_execute_list_user_installed
PASSED tests/cli/test_list_blueprints.py::test_execute_list_available
PASSED tests/cli/test_list_blueprints.py::test_execute_no_user_installed_blueprints
PASSED tests/cli/test_list_blueprints.py::test_execute_no_available_blueprints
PASSED tests/cli/test_list_blueprints.py::test_execute_discovery_exception_user_installed
PASSED tests/cli/test_list_blueprints.py::test_execute_discovery_exception_available
PASSED tests/cli/test_swarm_cli_startup_hints.py::test_startup_hints_no_config_no_key[args0]
PASSED tests/cli/test_swarm_cli_startup_hints.py::test_startup_hints_no_config_no_key[args1]
PASSED tests/cli/test_swarm_cli_startup_hints.py::test_startup_hints_no_key_with_config
PASSED tests/cli/test_swarm_cli_startup_hints.py::test_startup_hints_suppressed_when_env_flag_unset
PASSED tests/core/test_blueprint_model_override.py::test_blueprint_default_model_override
PASSED tests/core/test_blueprint_model_override.py::test_fallback_logs_warning
PASSED tests/core/test_config_default_generation.py::test_default_config_generation
PASSED tests/core/test_config_discovery.py::test_xdg_config_discovery
PASSED tests/core/test_config_discovery.py::test_config_fallback_to_cwd
PASSED tests/core/test_config_loader.py::test_load_full_configuration_defaults
PASSED tests/core/test_config_loader.py::test_load_full_configuration_profile_merging
PASSED tests/core/test_config_loader.py::test_load_full_configuration_env_substitution
PASSED tests/core/test_config_loader.py::test_load_full_configuration_missing_file
PASSED tests/core/test_config_loader.py::test_load_full_configuration_bad_json
PASSED tests/core/test_config_loader.py::test_load_full_configuration_empty_config
PASSED tests/core/test_config_loader.py::test_load_environment
PASSED tests/core/test_fallback_to_default_model.py::test_fallback_to_default_model
PASSED tests/core/test_mcp_server_config.py::test_mcp_server_config_parsing
PASSED tests/core/test_mcp_server_config.py::test_mcp_server_add_remove_and_edge_cases
PASSED tests/core/test_redact_sensitive_data.py::test_redacts_api_keys_and_tokens
PASSED tests/core/test_redact_sensitive_data.py::test_does_not_redact_non_sensitive_strings
PASSED tests/core/test_redact_sensitive_data.py::test_partial_redaction_behavior
PASSED tests/core/test_redact_sensitive_data.py::test_handles_empty_and_non_dict_inputs
PASSED tests/extensions/launchers/test_swarm_api_launcher.py::test_swarm_api_basic_run
PASSED tests/extensions/launchers/test_swarm_api_launcher.py::test_swarm_api_custom_port_and_config_creation
PASSED tests/extensions/launchers/test_swarm_api_launcher.py::test_swarm_api_daemon_mode
PASSED tests/extensions/launchers/test_swarm_api_launcher.py::test_swarm_api_blueprint_not_found
PASSED tests/integration/test_cli_codey.py::test_codey_cli_ux
PASSED tests/integration/test_cli_codey_packaged.py::test_packaged_codey_cli_install_and_launch
PASSED tests/integration/test_cli_commands.py::test_cli_help[/mnt/models/open-swarm-mcp/.venv/bin/codey---help]
PASSED tests/integration/test_cli_commands.py::test_cli_help[/mnt/models/open-swarm-mcp/.venv/bin/swarm-cli---help]
PASSED tests/integration/test_cli_commands.py::test_cli_minimal_prompt[/mnt/models/open-swarm-mcp/.venv/bin/codey-Say hello from codey!]
PASSED tests/integration/test_cli_commands.py::test_swarm_cli_interactive_shell
PASSED tests/integration/test_cli_jeeves.py::test_jeeves_cli_ux
PASSED tests/integration/test_cli_rue_code.py::test_rue_cli_token_cost
PASSED tests/integration/test_cli_rue_code.py::test_rue_cli_ux
PASSED tests/integration/test_cli_whinge.py::test_whinge_cli_background_job
PASSED tests/integration/test_cli_zeus.py::test_zeus_cli_integration
PASSED tests/manual/test_blueprintbase_init.py::test_init
PASSED tests/test_cli_mode_selection.py::test_valid_input
PASSED tests/test_core_filter_duplicate_system_messages.py::test_filter_duplicate_system_messages
PASSED tests/test_core_filter_duplicate_system_messages.py::test_filter_no_system_messages
PASSED tests/test_core_filter_duplicate_system_messages.py::test_filter_only_system_messages
PASSED tests/test_core_filter_duplicate_system_messages.py::test_filter_empty_list
PASSED tests/test_core_filter_duplicate_system_messages.py::test_filter_mixed_valid_invalid
PASSED tests/test_core_filter_messages.py::test_filter_messages_empty_and_none_content
PASSED tests/test_core_filter_messages.py::test_filter_messages_all_valid
PASSED tests/test_core_filter_messages.py::test_filter_messages_with_non_dict_items
PASSED tests/test_core_filter_messages.py::test_filter_messages_empty_input
PASSED tests/test_core_filter_messages.py::test_filter_messages_ignores_other_keys
PASSED tests/test_core_truncate_message_history.py::test_truncate_no_action_needed[simple]
PASSED tests/test_core_truncate_message_history.py::test_truncate_no_action_needed[pairs]
PASSED tests/test_core_truncate_message_history.py::test_truncate_by_message_count_basic[simple]
PASSED tests/test_core_truncate_message_history.py::test_truncate_by_message_count_basic[pairs]
PASSED tests/test_core_truncate_message_history.py::test_truncate_by_token_count_basic[simple]
PASSED tests/test_core_truncate_message_history.py::test_truncate_by_token_count_basic[pairs]
PASSED tests/test_core_truncate_message_history.py::test_pairs_preserves_basic_pair_ample_space
PASSED tests/test_core_truncate_message_history.py::test_pairs_preserves_basic_pair_tight_space
PASSED tests/test_core_truncate_message_history.py::test_pairs_preserves_multi_step_ample_space
PASSED tests/test_core_truncate_message_history.py::test_pairs_preserves_multi_step_cuts_early_user
PASSED tests/test_core_truncate_message_history.py::test_pairs_preserves_multi_step_cuts_first_pair
PASSED tests/test_core_truncate_message_history.py::test_pairs_drops_lone_tool_due_to_separation_or_limit
PASSED tests/test_core_truncate_message_history.py::test_pairs_handles_missing_tool_response
PASSED tests/test_core_truncate_message_history.py::test_pairs_interspersed_messages_truncation
PASSED tests/test_core_truncate_message_history.py::test_pairs_system_message_priority_and_exceeds_limit
PASSED tests/test_core_truncate_message_history.py::test_pairs_multi_call_in_one_turn_fits
PASSED tests/test_core_truncate_message_history.py::test_pairs_multi_call_in_one_turn_cuts_user
PASSED tests/test_core_truncate_message_history.py::test_pairs_multi_call_in_one_turn_cuts_pair
PASSED tests/test_core_truncate_message_history.py::test_pairs_back_to_back_tools_fit
PASSED tests/test_core_truncate_message_history.py::test_pairs_back_to_back_tools_cut_user
PASSED tests/test_core_truncate_message_history.py::test_pairs_back_to_back_tools_cut_first_pair
PASSED tests/test_core_truncate_message_history.py::test_pairs_empty_input_list
PASSED tests/test_core_truncate_message_history.py::test_pairs_only_system_message
PASSED tests/test_core_truncate_message_history.py::test_pairs_invalid_messages_mixed_in
PASSED tests/test_core_truncate_message_history.py::test_pairs_non_serializable_content
PASSED tests/test_core_truncate_message_history.py::test_simple_truncation_fallback_simulation
PASSED tests/test_core_update_null_content.py::test_update_null_content_list
PASSED tests/test_core_update_null_content.py::test_update_null_content_single_dict
PASSED tests/test_core_update_null_content.py::test_update_null_content_no_change_needed
PASSED tests/test_core_update_null_content.py::test_update_null_content_empty_list_or_invalid_input
PASSED tests/test_dummy.py::test_dummy
PASSED tests/test_truncate_message_history.py::test_truncate_no_action_needed[simple]
PASSED tests/test_truncate_message_history.py::test_truncate_no_action_needed[pairs]
PASSED tests/test_truncate_message_history.py::test_truncate_by_message_count_basic[simple]
PASSED tests/test_truncate_message_history.py::test_truncate_by_message_count_basic[pairs]
PASSED tests/test_truncate_message_history.py::test_truncate_by_token_count_basic[simple]
PASSED tests/test_truncate_message_history.py::test_truncate_by_token_count_basic[pairs]
PASSED tests/test_truncate_message_history.py::test_pairs_preserves_basic_pair_ample_space
PASSED tests/test_truncate_message_history.py::test_pairs_preserves_basic_pair_tight_space
PASSED tests/test_truncate_message_history.py::test_pairs_preserves_multi_step_ample_space
PASSED tests/test_truncate_message_history.py::test_pairs_preserves_multi_step_cuts_early_user
PASSED tests/test_truncate_message_history.py::test_pairs_preserves_multi_step_cuts_first_pair
PASSED tests/test_truncate_message_history.py::test_pairs_drops_lone_tool_due_to_separation_or_limit
PASSED tests/test_truncate_message_history.py::test_pairs_handles_missing_tool_response
PASSED tests/test_truncate_message_history.py::test_pairs_interspersed_messages_truncation
PASSED tests/test_truncate_message_history.py::test_pairs_system_message_priority_and_exceeds_limit
PASSED tests/test_truncate_message_history.py::test_pairs_multi_call_in_one_turn_fits
PASSED tests/test_truncate_message_history.py::test_pairs_multi_call_in_one_turn_cuts_user
PASSED tests/test_truncate_message_history.py::test_pairs_multi_call_in_one_turn_cuts_pair
PASSED tests/test_truncate_message_history.py::test_pairs_back_to_back_tools_fit
PASSED tests/test_truncate_message_history.py::test_pairs_back_to_back_tools_cut_user
PASSED tests/test_truncate_message_history.py::test_pairs_back_to_back_tools_cut_first_pair
PASSED tests/test_truncate_message_history.py::test_pairs_empty_input_list
PASSED tests/test_truncate_message_history.py::test_pairs_only_system_message
PASSED tests/test_truncate_message_history.py::test_pairs_invalid_messages_mixed_in
PASSED tests/test_truncate_message_history.py::test_simple_truncation_fallback_simulation
PASSED tests/unit/test_ansi_box.py::test_ansi_box_basic
PASSED tests/unit/test_ansi_box.py::test_ansi_box_multiline
PASSED tests/unit/test_blueprint_base_config.py::TestBlueprintBaseConfigLoading::test_init_does_not_raise
PASSED tests/unit/test_blueprint_base_config.py::TestBlueprintBaseConfigLoading::test_markdown_setting_priority
PASSED tests/unit/test_blueprint_base_config.py::TestBlueprintBaseConfigLoading::test_llm_profile_resolution_priority
PASSED tests/unit/test_blueprint_base_config.py::TestBlueprintBaseConfigLoading::test_missing_llm_profile_raises
PASSED tests/unit/test_hook_chain_deterministic.py::test_deterministic_order_enabled
PASSED tests/unit/test_hook_chain_deterministic.py::test_deterministic_order_disabled
PASSED tests/unit/test_operation_box_utils.py::test_basic_box_output
PASSED tests/unit/test_operation_box_utils.py::test_code_vs_semantic_box
PASSED tests/unit/test_operation_box_utils.py::test_spinner_escalation_box
PASSED tests/unit/test_output_utils.py::test_pretty_print_response_plain_text
PASSED tests/unit/test_output_utils.py::test_pretty_print_response_with_code_fence
PASSED tests/unit/test_redact.py::test_redact_sensitive_data_basic
PASSED tests/unit/test_redact.py::test_redact_sensitive_data_string
PASSED tests/unit/test_redact.py::test_redact_sensitive_data_custom_keys
PASSED tests/unit/test_slash_commands.py::test_help_and_compact_registered
PASSED tests/unit/test_slash_commands.py::test_model_command_list_and_set
PASSED tests/unit/test_slash_commands.py::test_additional_slash_commands[/approval-approval]
PASSED tests/unit/test_slash_commands.py::test_additional_slash_commands[/history-history]
PASSED tests/unit/test_slash_commands.py::test_additional_slash_commands[/clear-cleared]
PASSED tests/unit/test_slash_commands.py::test_additional_slash_commands[/clearhistory-cleared]
PASSED tests/unit/test_spinner.py::test_spinner_runs_and_stops
PASSED tests/unit/test_spinner.py::test_spinner_long_wait
PASSED tests/views/test_agent_creator_pro.py::TestAdvancedCodeValidator::test_validate_blueprint_code_comprehensive
PASSED tests/views/test_agent_creator_pro.py::TestAdvancedCodeValidator::test_validate_blueprint_semantics_missing_yield
PASSED tests/views/test_agent_creator_pro.py::TestAdvancedCodeValidator::test_validate_blueprint_semantics_valid
PASSED tests/views/test_agent_creator_pro.py::TestAdvancedCodeValidator::test_validate_performance_problematic_code
PASSED tests/views/test_agent_creator_pro.py::TestAdvancedCodeValidator::test_validate_performance_safe_code
PASSED tests/views/test_agent_creator_pro.py::TestAdvancedCodeValidator::test_validate_security_dangerous_code
PASSED tests/views/test_agent_creator_pro.py::TestAdvancedCodeValidator::test_validate_security_hardcoded_secrets
PASSED tests/views/test_agent_creator_pro.py::TestAdvancedCodeValidator::test_validate_security_safe_code
PASSED tests/views/test_agent_creator_pro.py::TestProAgentGenerator::test_generate_agent_code_basic
PASSED tests/views/test_agent_creator_pro.py::TestProAgentGenerator::test_generate_agent_code_with_complex_expertise
PASSED tests/views/test_agent_creator_pro.py::TestProAgentGenerator::test_sanitize_class_name
PASSED tests/views/test_agent_creator_pro.py::TestProAgentGenerator::test_template_selection_analytical
PASSED tests/views/test_agent_creator_pro.py::TestProAgentGenerator::test_template_selection_conversational
PASSED tests/views/test_agent_creator_pro.py::TestProAgentGenerator::test_template_selection_creative
PASSED tests/views/test_agent_creator_pro.py::TestAgentCreatorProIntegration::test_full_agent_creation_workflow
PASSED tests/views/test_agent_creator_pro.py::TestAgentCreatorProErrorHandling::test_generator_handles_empty_expertise
PASSED tests/views/test_agent_creator_pro.py::TestAgentCreatorProErrorHandling::test_generator_handles_missing_fields
PASSED tests/views/test_agent_creator_pro.py::TestAgentCreatorProErrorHandling::test_validator_handles_empty_code
PASSED tests/views/test_agent_creator_pro.py::TestAgentCreatorProErrorHandling::test_validator_handles_invalid_syntax
PASSED tests/views/test_settings_dashboard.py::TestSettingsManager::test_collect_all_settings
PASSED tests/views/test_settings_dashboard.py::TestSettingsManager::test_collect_auth_settings
PASSED tests/views/test_settings_dashboard.py::TestSettingsManager::test_collect_database_settings
PASSED tests/views/test_settings_dashboard.py::TestSettingsManager::test_collect_django_settings
PASSED tests/views/test_settings_dashboard.py::TestSettingsManager::test_collect_llm_settings_error
PASSED tests/views/test_settings_dashboard.py::TestSettingsManager::test_collect_llm_settings_success
PASSED tests/views/test_settings_dashboard.py::TestSettingsManager::test_collect_logging_settings
PASSED tests/views/test_settings_dashboard.py::TestSettingsManager::test_collect_performance_settings
PASSED tests/views/test_settings_dashboard.py::TestSettingsManager::test_collect_swarm_core_settings
PASSED tests/views/test_settings_dashboard.py::TestSettingsManager::test_collect_ui_settings
PASSED tests/views/test_settings_dashboard.py::TestSettingsManager::test_settings_manager_initialization
PASSED tests/views/test_settings_dashboard.py::TestSettingsManagerEdgeCases::test_empty_config_file
PASSED tests/views/test_settings_dashboard.py::TestSettingsManagerEdgeCases::test_missing_django_settings
PASSED tests/views/test_settings_dashboard.py::TestSettingsManagerEdgeCases::test_no_environment_variables
PASSED tests/views/test_settings_dashboard.py::TestSettingsIntegration::test_full_settings_collection_workflow
PASSED tests/api/test_endpoints_list_blueprints_models.py::test_models_and_blueprints_endpoints_include_dynamic_team
PASSED tests/api/test_teams_export_import.py::test_export_json_and_csv_and_import_roundtrip
PASSED tests/integration/test_dynamic_teams_reset.py::test_reset_clears_dynamic_registry_and_discovery
PASSED tests/integration/test_dynamic_teams_smoke.py::test_dynamic_team_registry_and_discovery_roundtrip
SKIPPED [1] tests/test_blueprint_loading.py:2: Skipping blueprint loading tests due to complexity of verifying dynamic INSTALLED_APPS modification during test setup
SKIPPED [1] tests/blueprints/test_dilbot_universe.py:29: SQLite interaction testing needs refinement.
SKIPPED [1] tests/blueprints/test_dilbot_universe.py:56: SQLite interaction testing needs refinement.
SKIPPED [1] tests/blueprints/test_dilbot_universe.py:62: Blueprint interaction tests not yet implemented.
SKIPPED [1] tests/blueprints/test_dilbot_universe.py:69: Blueprint action tests not yet implemented
SKIPPED [1] tests/blueprints/test_divine_code.py:89: Blueprint CLI tests not yet implemented
SKIPPED [1] tests/blueprints/test_family_ties.py:34: Blueprint interaction tests not yet implemented
SKIPPED [1] tests/blueprints/test_family_ties.py:42: Blueprint CLI tests not yet implemented
SKIPPED [1] tests/blueprints/test_geese.py:56: Test needs review for SDK Agent tool handling
SKIPPED [1] tests/blueprints/test_geese.py:68: Test needs review for SDK Agent tool handling
SKIPPED [1] tests/blueprints/test_geese.py:72: Spinner tests need refactoring for GeeseSpinner class methods
SKIPPED [1] tests/blueprints/test_geese.py:76: Spinner tests need refactoring for GeeseSpinner class methods
SKIPPED [1] tests/blueprints/test_geese.py:80: Tool structure needs review with SDK Agent
SKIPPED [1] tests/blueprints/test_geese.py:113: Main entry test needs review for async structure and Geese CLI specifics
SKIPPED [1] tests/blueprints/test_geese.py:117: Relies on removed module-level functions; needs agent-based testing.
SKIPPED [1] tests/blueprints/test_geese.py:121: Relies on removed module-level functions; needs agent-based testing.
SKIPPED [1] tests/blueprints/test_geese.py:125: Relies on removed module-level functions; needs agent-based testing.
SKIPPED [1] tests/blueprints/test_geese_agent_mcp_assignment.py:14: Test needs update for refactored GeeseBlueprint agent creation.
SKIPPED [1] tests/blueprints/test_geese_agent_mcp_assignment.py:39: Test needs update for refactored GeeseBlueprint agent creation.
SKIPPED [1] tests/blueprints/test_geese_spinner_and_box.py:41: GeeseSpinner internal API changed; test needs update or removal.
SKIPPED [1] tests/blueprints/test_geese_spinner_and_box.py:73: Test needs update for refactored GeeseBlueprint agent creation.
SKIPPED [1] tests/blueprints/test_gotchaman.py:22: Implementation for GotchamanBlueprint not found in codebase; skipping test.
SKIPPED [1] tests/blueprints/test_gotchaman.py:26: Tool function tests not yet implemented
SKIPPED [1] tests/blueprints/test_gotchaman.py:46: Blueprint interaction tests not yet implemented
SKIPPED [1] tests/blueprints/test_gotchaman.py:53: Blueprint CLI tests not yet implemented
SKIPPED [1] tests/blueprints/test_jeeves.py:38: Blueprint interaction tests not yet implemented
SKIPPED [1] tests/blueprints/test_mcp_demo.py:109: Legacy CLI tests require specific old setup/mocking
SKIPPED [1] tests/blueprints/test_mcp_demo.py:114: Legacy CLI tests require specific old setup/mocking
SKIPPED [1] tests/blueprints/test_mcp_demo.py:119: Legacy CLI tests require specific old setup/mocking
SKIPPED [1] tests/blueprints/test_mcp_demo.py:124: Legacy CLI tests require specific old setup/mocking
SKIPPED [1] tests/blueprints/test_mission_improbable.py:74: Blueprint interaction tests not yet implemented
SKIPPED [1] tests/blueprints/test_mission_improbable.py:81: Blueprint CLI tests not yet implemented
SKIPPED [1] tests/blueprints/test_monkai_magic.py:21: Blueprint tests not yet implemented
SKIPPED [1] tests/blueprints/test_monkai_magic.py:36: Tool function tests not yet implemented
SKIPPED [1] tests/blueprints/test_monkai_magic.py:57: Blueprint interaction tests not yet implemented
SKIPPED [1] tests/blueprints/test_monkai_magic.py:64: Blueprint CLI tests not yet implemented
SKIPPED [1] tests/blueprints/test_nebula_shellz.py:9: CLI tests require more setup/mocking
SKIPPED [1] tests/blueprints/test_nebula_shellz.py:15: CLI tests require more setup/mocking
SKIPPED [1] tests/blueprints/test_nebula_shellz.py:20: CLI tests require more setup/mocking
SKIPPED [1] tests/blueprints/test_poets.py:99: Blueprint interaction tests not yet implemented
SKIPPED [1] tests/blueprints/test_poets.py:103: Blueprint CLI tests not yet implemented
SKIPPED [1] tests/blueprints/test_suggestion.py:34: Only run if DEFAULT_LLM is set to 'test'
SKIPPED [1] tests/blueprints/test_suggestion.py:45: Only run if DEFAULT_LLM is set to 'test'
SKIPPED [1] tests/blueprints/test_suggestion.py:52: Only run if DEFAULT_LLM is set to 'test'
SKIPPED [1] tests/blueprints/test_whiskeytangofoxtrot.py:98: Blueprint interaction tests not yet implemented
SKIPPED [1] tests/blueprints/test_whiskeytangofoxtrot.py:101: Blueprint CLI tests not yet implemented
SKIPPED [1] tests/integration/test_cli_geese.py:11: GeeseBlueprint functionality changed; CLI test needs review for story output vs search UX.
SKIPPED [1] tests/system/test_codey_binary.py:10: Binary ./dist/codey_cli not found. Build with: pyinstaller --onefile src/swarm/blueprints/codey/codey_cli.py --name codey_cli
SKIPPED [1] tests/system/test_rue_code_binary.py:10: Binary ./dist/rue_code_cli not found. Build with: pyinstaller --onefile src/swarm/blueprints/rue_code/rue_code_cli.py --name rue_code_cli
SKIPPED [1] tests/system/test_whinge_binary.py:10: Binary ./dist/whinge not found. Build with: pyinstaller --onefile src/swarm/blueprints/whinge_surf/whinge_surf_cli.py --name whinge
SKIPPED [1] tests/system/test_zeus_binary.py:10: Binary ./dist/zeus_cli not found. Build with: pyinstaller --onefile src/swarm/blueprints/zeus/zeus_cli.py --name zeus_cli
SKIPPED [1] tests/test_truncate_message_history.py:191: Need to verify how non-serializable data is handled
XFAIL tests/api/test_models_negative.py::test_models_exception_returns_500 - reason: View currently returns 200 on exception; adjust view to 500 to strengthen contract.
XFAIL tests/api/test_models_negative.py::test_models_unauthorized_when_permission_enforced - reason: Endpoint appears open (AllowAny); unauthorized path not applicable.
XFAIL tests/cli/test_config_secrets_and_env_expansion.py::test_cli_config_add_persists_secrets_to_env_file[OPENAI_API_KEY-sk-test-123] - reason: swarm-cli config add not implemented or unavailable. stderr:
Traceback (most recent call last):
  File "/usr/lib/python3.10/runpy.py", line 196, in _run_module_as_main
    return _run_code(code, main_globals, None,
  File "/usr/lib/python3.10/runpy.py", line 86, in _run_code
    exec(code, run_globals)
  File "/mnt/models/open-swarm-mcp/src/swarm/extensions/launchers/swarm_cli.py", line 12, in <module>
    from swarm.extensions.cli.main import main
ModuleNotFoundError: No module named 'swarm'

stdout:

XFAIL tests/cli/test_config_secrets_and_env_expansion.py::test_cli_config_add_persists_secrets_to_env_file[CUSTOM_SECRET-s3cr3t!] - reason: swarm-cli config add not implemented or unavailable. stderr:
Traceback (most recent call last):
  File "/usr/lib/python3.10/runpy.py", line 196, in _run_module_as_main
    return _run_code(code, main_globals, None,
  File "/usr/lib/python3.10/runpy.py", line 86, in _run_code
    exec(code, run_globals)
  File "/mnt/models/open-swarm-mcp/src/swarm/extensions/launchers/swarm_cli.py", line 12, in <module>
    from swarm.extensions.cli.main import main
ModuleNotFoundError: No module named 'swarm'

stdout:

ERROR tests/api/test_chat_completions_auth_async.py::TestChatCompletionsAuthAsync::test_no_auth_returns_403 - django.db.utils.OperationalError: no such table: auth_user
ERROR tests/api/test_chat_completions_auth_async.py::TestChatCompletionsAuthAsync::test_invalid_token_returns_403 - django.db.utils.OperationalError: no such table: auth_user
ERROR tests/api/test_chat_completions_auth_async.py::TestChatCompletionsAuthAsync::test_valid_token_allows_access - django.db.utils.OperationalError: no such table: auth_user
ERROR tests/api/test_chat_completions_auth_async.py::TestChatCompletionsAuthAsync::test_valid_session_allows_access - django.db.utils.OperationalError: no such table: auth_user
ERROR tests/api/test_chat_completions_auth_async.py::TestChatCompletionsAuthAsync::test_echocraft_non_streaming_success_auth_disabled - django.db.utils.OperationalError: no such table: auth_user
ERROR tests/api/test_chat_completions_auth_async.py::TestChatCompletionsAuthAsync::test_chatbot_non_streaming_success_auth_disabled - django.db.utils.OperationalError: no such table: auth_user
ERROR tests/api/test_chat_completions_failing_async.py::TestChatCompletionsAPIFailingAsync::test_echocraft_streaming_success - django.db.utils.OperationalError: no such table: auth_user
ERROR tests/api/test_chat_completions_failing_async.py::TestChatCompletionsAPIFailingAsync::test_chatbot_streaming_success - django.db.utils.OperationalError: no such table: auth_user
ERROR tests/api/test_chat_completions_failing_async.py::TestChatCompletionsAPIFailingAsync::test_blueprint_run_exception_streaming_returns_error_sse - django.db.utils.OperationalError: no such table: auth_user
ERROR tests/api/test_chat_completions_validation_async.py::TestChatCompletionsValidationAsync::test_missing_required_field_returns_400[model] - django.db.utils.OperationalError: no such table: auth_user
ERROR tests/api/test_chat_completions_validation_async.py::TestChatCompletionsValidationAsync::test_missing_required_field_returns_400[messages] - django.db.utils.OperationalError: no such table: auth_user
ERROR tests/api/test_chat_completions_validation_async.py::TestChatCompletionsValidationAsync::test_invalid_field_type_or_content_returns_400[invalid_data0-Ensure this field has at least 1 elements] - django.db.utils.OperationalError: no such table: auth_user
ERROR tests/api/test_chat_completions_validation_async.py::TestChatCompletionsValidationAsync::test_invalid_field_type_or_content_returns_400[invalid_data1-Expected a list of items] - django.db.utils.OperationalError: no such table: auth_user
ERROR tests/api/test_chat_completions_validation_async.py::TestChatCompletionsValidationAsync::test_invalid_field_type_or_content_returns_400[invalid_data2-This field is required.] - django.db.utils.OperationalError: no such table: auth_user
ERROR tests/api/test_chat_completions_validation_async.py::TestChatCompletionsValidationAsync::test_invalid_field_type_or_content_returns_400[invalid_data3-This field is required.] - django.db.utils.OperationalError: no such table: auth_user
ERROR tests/api/test_chat_completions_validation_async.py::TestChatCompletionsValidationAsync::test_invalid_field_type_or_content_returns_400[invalid_data4-invalid" is not a valid choice] - django.db.utils.OperationalError: no such table: auth_user
ERROR tests/api/test_chat_completions_validation_async.py::TestChatCompletionsValidationAsync::test_invalid_field_type_or_content_returns_400[invalid_data5-Content must be a string or null.] - django.db.utils.OperationalError: no such table: auth_user
ERROR tests/api/test_chat_completions_validation_async.py::TestChatCompletionsValidationAsync::test_malformed_json_returns_400 - django.db.utils.OperationalError: no such table: auth_user
ERROR tests/api/test_chat_completions_validation_async.py::TestChatCompletionsValidationAsync::test_nonexistent_model_permission_denied - django.db.utils.OperationalError: no such table: auth_user
ERROR tests/api/test_chat_completions_validation_async.py::TestChatCompletionsValidationAsync::test_nonexistent_model_not_found - django.db.utils.OperationalError: no such table: auth_user
ERROR tests/api/test_chat_completions_validation_async.py::TestChatCompletionsValidationAsync::test_blueprint_init_error_returns_500 - django.db.utils.OperationalError: no such table: auth_user
ERROR tests/api/test_chat_completions_validation_async.py::TestChatCompletionsValidationAsync::test_blueprint_run_exception_non_streaming_returns_500 - django.db.utils.OperationalError: no such table: auth_user
FAILED tests/views/test_agent_creator_pro.py::TestAgentCreatorProViews::test_agent_creator_pro_page_context - django.db.utils.OperationalError: no such table: auth_user
FAILED tests/views/test_agent_creator_pro.py::TestAgentCreatorProViews::test_agent_creator_pro_page_get - django.db.utils.OperationalError: no such table: auth_user
FAILED tests/views/test_settings_dashboard.py::TestSettingsDashboardViews::test_environment_variables_filtering - django.db.utils.OperationalError: no such table: auth_user
FAILED tests/views/test_settings_dashboard.py::TestSettingsDashboardViews::test_environment_variables_get - django.db.utils.OperationalError: no such table: auth_user
FAILED tests/views/test_settings_dashboard.py::TestSettingsDashboardViews::test_settings_api_get - django.db.utils.OperationalError: no such table: auth_user
FAILED tests/views/test_settings_dashboard.py::TestSettingsDashboardViews::test_settings_api_sensitive_data_filtering - django.db.utils.OperationalError: no such table: auth_user
FAILED tests/views/test_settings_dashboard.py::TestSettingsDashboardViews::test_settings_dashboard_context - django.db.utils.OperationalError: no such table: auth_user
FAILED tests/views/test_settings_dashboard.py::TestSettingsDashboardViews::test_settings_dashboard_error_handling - django.db.utils.OperationalError: no such table: auth_user
FAILED tests/views/test_settings_dashboard.py::TestSettingsDashboardViews::test_settings_dashboard_get - django.db.utils.OperationalError: no such table: auth_user
================================================================================================ 9 failed, 254 passed, 52 skipped, 4 xfailed, 3 warnings, 22 errors in 39.49s ================================================================================================
